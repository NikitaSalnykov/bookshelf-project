!function(){let e,t,n,i,r,s,o,a,l,c,u,h,d;function p(e){return e&&e.__esModule?e.default:e}var f,m,g,y,_,v,b,w,k,x,I,C,T="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function N(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var E={},S={},R=T.parcelRequired7c6;null==R&&((R=function(e){if(e in E)return E[e].exports;if(e in S){var t=S[e];delete S[e];var n={id:e,exports:{}};return E[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){S[e]=t},T.parcelRequired7c6=R),R("9VC5X"),R("xpKCW"),R("1VFfL");var P={},A=P={};function O(){throw Error("setTimeout has not been defined")}function L(){throw Error("clearTimeout has not been defined")}function D(e){if(w===setTimeout)return setTimeout(e,0);if((w===O||!w)&&setTimeout)return w=setTimeout,setTimeout(e,0);try{return w(e,0)}catch(t){try{return w.call(null,e,0)}catch(t){return w.call(this,e,0)}}}!function(){try{w="function"==typeof setTimeout?setTimeout:O}catch(e){w=O}try{k="function"==typeof clearTimeout?clearTimeout:L}catch(e){k=L}}();var M=[],F=!1,z=-1;function W(){F&&x&&(F=!1,x.length?M=x.concat(M):z=-1,M.length&&U())}function U(){if(!F){var e=D(W);F=!0;for(var t=M.length;t;){for(x=M,M=[];++z<t;)x&&x[z].run();z=-1,t=M.length}x=null,F=!1,function(e){if(k===clearTimeout)return clearTimeout(e);if((k===L||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(e);try{k(e)}catch(t){try{return k.call(null,e)}catch(t){return k.call(this,e)}}}(e)}}function B(e,t){this.fun=e,this.array=t}function q(){}A.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];M.push(new B(e,t)),1!==M.length||F||D(U)},B.prototype.run=function(){this.fun.apply(null,this.array)},A.title="browser",A.browser=!0,A.env={},A.argv=[],A.version="",A.versions={},A.on=q,A.addListener=q,A.once=q,A.off=q,A.removeListener=q,A.removeAllListeners=q,A.emit=q,A.prependListener=q,A.prependOnceListener=q,A.listeners=function(e){return[]},A.binding=function(e){throw Error("process.binding is not supported")},A.cwd=function(){return"/"},A.chdir=function(e){throw Error("process.chdir is not supported")},A.umask=function(){return 0};let j={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},H=function(e,t){if(!e)throw V(t)},V=function(e){return Error("Firebase Database ("+j.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},$=function(e){let t=[],n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:((64512&r)==55296&&i+1<e.length&&(64512&e.charCodeAt(i+1))==56320?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128):t[n++]=r>>12|224,t[n++]=r>>6&63|128),t[n++]=63&r|128)}return t},K=function(e){let t=[],n=0,i=0;for(;n<e.length;){let r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){let s=e[n++],o=e[n++],a=e[n++],l=((7&r)<<18|(63&s)<<12|(63&o)<<6|63&a)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(1023&l))}else{let s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")},X={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){let r=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,c=r>>2,u=(3&r)<<4|o>>4,h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray($(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):K(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){let r=n[e.charAt(t++)],s=t<e.length,o=s?n[e.charAt(t)]:0;++t;let a=t<e.length,l=a?n[e.charAt(t)]:64;++t;let c=t<e.length,u=c?n[e.charAt(t)]:64;if(++t,null==r||null==o||null==l||null==u)throw new G;let h=r<<2|o>>4;if(i.push(h),64!==l){let e=o<<4&240|l>>2;if(i.push(e),64!==u){let e=l<<6&192|u;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class G extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let Y=function(e){let t=$(e);return X.encodeByteArray(t,!0)},Q=function(e){return Y(e).replace(/\./g,"")},J=function(e){try{return X.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Z(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Z(e[n],t[n]));return e}let ee=()=>(function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==T)return T;throw Error("Unable to locate global object.")})().__FIREBASE_DEFAULTS__,et=()=>{if(void 0===P||void 0===P.env)return;let e=void 0;if(e)return JSON.parse(e)},en=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&J(e[1]);return t&&JSON.parse(t)},ei=()=>{try{return ee()||et()||en()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},er=()=>{var e;return null===(e=ei())||void 0===e?void 0:e.config};class es{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function eo(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ea(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(eo())}function el(){var e;let t=null===(e=ei())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(T.process)}catch(e){return!1}}function ec(){let e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function eu(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function eh(){let e=eo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ed(){return!0===j.NODE_CLIENT||!0===j.NODE_ADMIN}function ep(){try{return"object"==typeof indexedDB}catch(e){return!1}}class ef extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ef.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,em.prototype.create)}}class em{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?r.replace(eg,(e,t)=>{let i=n[t];return null!=i?String(i):`<${t}?>`}):"Error",o=`${this.serviceName}: ${s} (${i}).`,a=new ef(i,o,n);return a}}let eg=/\{\$([^}]+)}/g;function ey(e){return JSON.parse(e)}function e_(e){return JSON.stringify(e)}let ev=function(e){let t={},n={},i={},r="";try{let s=e.split(".");t=ey(J(s[0])||""),n=ey(J(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:i,signature:r}},eb=function(e){let t=ev(e),n=t.claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")},ew=function(e){let t=ev(e).claims;return"object"==typeof t&&!0===t.admin};function ek(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ex(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function eI(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function eC(e,t,n){let i={};for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function eT(e,t){if(e===t)return!0;let n=Object.keys(e),i=Object.keys(t);for(let r of n){if(!i.includes(r))return!1;let n=e[r],s=t[r];if(eN(n)&&eN(s)){if(!eT(n,s))return!1}else if(n!==s)return!1}for(let e of i)if(!n.includes(e))return!1;return!0}function eN(e){return null!==e&&"object"==typeof e}function eE(e){let t=[];for(let[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function eS(e){let t={},n=e.replace(/^\?/,"").split("&");return n.forEach(e=>{if(e){let[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}}),t}function eR(e){let t=e.indexOf("?");if(!t)return"";let n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class eP{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){let n,i;t||(t=0);let r=this.W_;if("string"==typeof e)for(let n=0;n<16;n++)r[n]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let n=0;n<16;n++)r[n]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){let t=r[e-3]^r[e-8]^r[e-14]^r[e-16];r[e]=(t<<1|t>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(n=l^o&(a^l),i=1518500249):(n=o^a^l,i=1859775393):e<60?(n=o&a|l&(o|a),i=2400959708):(n=o^a^l,i=3395469782);let t=(s<<5|s>>>27)+n+c+i+r[e]&4294967295;c=l,l=a,a=(o<<30|o>>>2)&4294967295,o=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);let n=t-this.blockSize,i=0,r=this.buf_,s=this.inbuf_;for(;i<t;){if(0===s)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(r[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<t;)if(r[s]=e[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){let e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let i=24;i>=0;i-=8)e[n]=this.chain_[t]>>i&255,++n;return e}}function eA(e,t){let n=new eO(e,t);return n.subscribe.bind(n)}class eO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw Error("Missing Observer.");void 0===(i=!function(e,t){if("object"!=typeof e||null===e)return!1;for(let n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?{next:e,error:t,complete:n}:e).next&&(i.next=eL),void 0===i.error&&(i.error=eL),void 0===i.complete&&(i.complete=eL);let r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}}),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eL(){}let eD=function(e,t,n,i){let r;if(i<t?r="at least "+t:i>n&&(r=0===n?"none":"no more than "+n),r){let t=e+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".";throw Error(t)}};function eM(e,t){return`${e} failed: ${t} argument `}function eF(e,t,n,i){if((!i||n)&&"function"!=typeof n)throw Error(eM(e,t)+"must be a valid function.")}function ez(e,t,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw Error(eM(e,t)+"must be a valid context object.")}let eW=function(e){let t=[],n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r>=55296&&r<=56319){let t=r-55296;H(++i<e.length,"Surrogate pair missing trail surrogate.");let n=e.charCodeAt(i)-56320;r=65536+(t<<10)+n}r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return t},eU=function(e){let t=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};function eB(e){return e&&e._delegate?e._delegate:e}class eq{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let ej="[DEFAULT]";class eH{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new es;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ej})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=ej){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=ej){return this.instances.has(e)}getOptions(e=ej){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);n===r&&t.resolve(i)}return i}onInit(e,t){var n;let i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);let s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:e===ej?void 0:e,options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}return n||null}normalizeInstanceIdentifier(e=ej){return this.component?this.component.multipleInstances?e:ej:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class eV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){let t=this.getProvider(e.name);t.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new eH(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var e$={};N(e$,"_DEFAULT_ENTRY_NAME",function(){return to}),N(e$,"_apps",function(){return tl}),N(e$,"_components",function(){return tc}),N(e$,"_addComponent",function(){return tu}),N(e$,"_addOrOverwriteComponent",function(){return th}),N(e$,"_registerComponent",function(){return td}),N(e$,"_getProvider",function(){return tp}),N(e$,"_removeServiceInstance",function(){return tf}),N(e$,"_clearComponents",function(){return tm}),N(e$,"SDK_VERSION",function(){return t_}),N(e$,"initializeApp",function(){return tv}),N(e$,"getApp",function(){return tb}),N(e$,"getApps",function(){return tw}),N(e$,"deleteApp",function(){return tk}),N(e$,"registerVersion",function(){return tx}),N(e$,"onLog",function(){return tI}),N(e$,"setLogLevel",function(){return tC}),N(e$,"FirebaseError",function(){return ef});let eK=[];(m=I||(I={}))[m.DEBUG=0]="DEBUG",m[m.VERBOSE=1]="VERBOSE",m[m.INFO=2]="INFO",m[m.WARN=3]="WARN",m[m.ERROR=4]="ERROR",m[m.SILENT=5]="SILENT";let eX={debug:I.DEBUG,verbose:I.VERBOSE,info:I.INFO,warn:I.WARN,error:I.ERROR,silent:I.SILENT},eG=I.INFO,eY={[I.DEBUG]:"log",[I.VERBOSE]:"log",[I.INFO]:"info",[I.WARN]:"warn",[I.ERROR]:"error"},eQ=(e,t,...n)=>{if(t<e.logLevel)return;let i=new Date().toISOString(),r=eY[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class eJ{constructor(e){this.name=e,this._logLevel=eG,this._logHandler=eQ,this._userLogHandler=null,eK.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in I))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?eX[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,I.DEBUG,...e),this._logHandler(this,I.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,I.VERBOSE,...e),this._logHandler(this,I.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,I.INFO,...e),this._logHandler(this,I.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,I.WARN,...e),this._logHandler(this,I.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,I.ERROR,...e),this._logHandler(this,I.ERROR,...e)}}let eZ=(e,t)=>t.some(t=>e instanceof t),e0=new WeakMap,e1=new WeakMap,e6=new WeakMap,e2=new WeakMap,e5=new WeakMap,e3={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return e1.get(e);if("objectStoreNames"===t)return e.objectStoreNames||e6.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return e4(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function e4(n){var i;if(n instanceof IDBRequest)return function(e){let t=new Promise((t,n)=>{let i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(e4(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&e0.set(t,e)}).catch(()=>{}),e5.set(t,e),t}(n);if(e2.has(n))return e2.get(n);let r="function"==typeof(i=n)?i!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(t||(t=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(i)?function(...e){return i.apply(e9(this),e),e4(e0.get(this))}:function(...e){return e4(i.apply(e9(this),e))}:function(e,...t){let n=i.call(e9(this),e,...t);return e6.set(n,e.sort?e.sort():[e]),e4(n)}:(i instanceof IDBTransaction&&function(e){if(e1.has(e))return;let t=new Promise((t,n)=>{let i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)});e1.set(e,t)}(i),eZ(i,e||(e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(i,e3):i;return r!==n&&(e2.set(n,r),e5.set(r,n)),r}let e9=e=>e5.get(e),e8=["get","getKey","getAll","getAllKeys","count"],e7=["put","add","delete","clear"],te=new Map;function tt(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(te.get(t))return te.get(t);let n=t.replace(/FromIndex$/,""),i=t!==n,r=e7.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||e8.includes(n)))return;let s=async function(e,...t){let s=this.transaction(e,r?"readwrite":"readonly"),o=s.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),r&&s.done]))[0]};return te.set(t,s),s}e3={...f=e3,get:(e,t,n)=>tt(e,t)||f.get(e,t,n),has:(e,t)=>!!tt(e,t)||f.has(e,t)};class tn{constructor(e){this.container=e}getPlatformInfoString(){let e=this.container.getProviders();return e.map(e=>{if(!function(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}let ti="@firebase/app",tr="0.9.14",ts=new eJ("@firebase/app"),to="[DEFAULT]",ta={[ti]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tl=new Map,tc=new Map;function tu(e,t){try{e.container.addComponent(t)}catch(n){ts.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function th(e,t){e.container.addOrOverwriteComponent(t)}function td(e){let t=e.name;if(tc.has(t))return ts.debug(`There were multiple attempts to register component ${t}.`),!1;for(let n of(tc.set(t,e),tl.values()))tu(n,e);return!0}function tp(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function tf(e,t,n=to){tp(e,t).clearInstance(n)}function tm(){tc.clear()}let tg=new em("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ty{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new eq("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tg.create("app-deleted",{appName:this._name})}}let t_="10.0.0";function tv(e,t={}){let n=e;if("object"!=typeof t){let e=t;t={name:e}}let i=Object.assign({name:to,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!=typeof r||!r)throw tg.create("bad-app-name",{appName:String(r)});if(n||(n=er()),!n)throw tg.create("no-options");let s=tl.get(r);if(s){if(eT(n,s.options)&&eT(i,s.config))return s;throw tg.create("duplicate-app",{appName:r})}let o=new eV(r);for(let e of tc.values())o.addComponent(e);let a=new ty(n,i,o);return tl.set(r,a),a}function tb(e=to){let t=tl.get(e);if(!t&&e===to&&er())return tv();if(!t)throw tg.create("no-app",{appName:e});return t}function tw(){return Array.from(tl.values())}async function tk(e){let t=e.name;tl.has(t)&&(tl.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function tx(e,t,n){var i;let r=null!==(i=ta[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);let s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){let e=[`Unable to register library "${r}" with version "${t}":`];s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ts.warn(e.join(" "));return}td(new eq(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}function tI(e,t){if(null!==e&&"function"!=typeof e)throw tg.create("invalid-log-argument");!function(e,t){for(let n of eK){let i=null;t&&t.level&&(i=eX[t.level]),null===e?n.userLogHandler=null:n.userLogHandler=(t,n,...r)=>{let s=r.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:I[n].toLowerCase(),message:s,args:r,type:t.name})}}}(e,t)}function tC(e){eK.forEach(t=>{t.setLogLevel(e)})}let tT="firebase-heartbeat-store",tN=null;function tE(){return tN||(tN=(function(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(e,1),a=e4(o);return i&&o.addEventListener("upgradeneeded",e=>{i(e4(o.result),e.oldVersion,e.newVersion,e4(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a})("firebase-heartbeat-database",0,{upgrade:(e,t)=>{0===t&&e.createObjectStore(tT)}}).catch(e=>{throw tg.create("idb-open",{originalErrorMessage:e.message})})),tN}async function tS(e){try{let t=await tE(),n=await t.transaction(tT).objectStore(tT).get(tP(e));return n}catch(e){if(e instanceof ef)ts.warn(e.message);else{let t=tg.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});ts.warn(t.message)}}}async function tR(e,t){try{let n=await tE(),i=n.transaction(tT,"readwrite"),r=i.objectStore(tT);await r.put(t,tP(e)),await i.done}catch(e){if(e instanceof ef)ts.warn(e.message);else{let t=tg.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});ts.warn(t.message)}}}function tP(e){return`${e.name}!${e.options.appId}`}class tA{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new tL(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){let e=this.container.getProvider("platform-logger").getImmediate(),t=e.getPlatformInfoString(),n=tO();return(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(e=>e.date===n))?void 0:(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let t=new Date(e.date).valueOf(),n=Date.now();return n-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";let e=tO(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){let n=[],i=e.slice();for(let r of e){let e=n.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),tD(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),tD(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=Q(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function tO(){let e=new Date;return e.toISOString().substring(0,10)}class tL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ep()&&new Promise((e,t)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}).then(()=>!0).catch(()=>!1)}async read(){let e=await this._canUseIndexedDBPromise;if(!e)return{heartbeats:[]};{let e=await tS(this.app);return e||{heartbeats:[]}}}async overwrite(e){var t;let n=await this._canUseIndexedDBPromise;if(n){let n=await this.read();return tR(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;let n=await this._canUseIndexedDBPromise;if(n){let n=await this.read();return tR(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function tD(e){return Q(JSON.stringify({version:2,heartbeats:e})).length}td(new eq("platform-logger",e=>new tn(e),"PRIVATE")),td(new eq("heartbeat",e=>new tA(e),"PRIVATE")),tx(ti,tr,""),tx(ti,tr,"esm2017"),tx("fire-js","");class tM{constructor(e,t){this._delegate=e,this.firebase=t,tu(e,new eq("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),tk(this._delegate)))}_getService(e,t=to){var n;this._delegate.checkDestroyed();let i=this._delegate.container.getProvider(e);return i.isInitialized()||(null===(n=i.getComponent())||void 0===n?void 0:n.instantiationMode)!=="EXPLICIT"||i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=to){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){tu(this._delegate,e)}_addOrOverwriteComponent(e){th(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}let tF=new em("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),tz=function e(){let t=function(e){let t={},n={__esModule:!0,initializeApp:function(i,r={}){let s=tv(i,r);if(ek(t,s.name))return t[s.name];let o=new e(s,n);return t[s.name]=o,o},app:i,registerVersion:tx,setLogLevel:tC,onLog:tI,apps:null,SDK_VERSION:t_,INTERNAL:{registerComponent:function(t){let r=t.name,s=r.replace("-compat","");if(td(t)&&"PUBLIC"===t.type){let o=(e=i())=>{if("function"!=typeof e[s])throw tF.create("invalid-app-argument",{appName:r});return e[s]()};void 0!==t.serviceProps&&Z(o,t.serviceProps),n[s]=o,e.prototype[s]=function(...e){let n=this._getService.bind(this,r);return n.apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e$}};function i(e){if(!ek(t,e=e||to))throw tF.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(tM);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Z(t,e)},createSubscribe:eA,ErrorFactory:em,deepExtend:Z}),t}(),tW=new eJ("@firebase/app-compat");if("object"==typeof self&&self.self===self&&void 0!==self.firebase){tW.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);let e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&tW.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}tx("@firebase/app-compat","0.2.14",void 0),tz.registerVersion("firebase","10.0.0","app-compat");function tU(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)0>t.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}"function"==typeof SuppressedError&&SuppressedError;let tB={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"};function tq(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}let tj=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},tH=new em("auth","Firebase",tq()),tV=new eJ("@firebase/auth");function t$(e,...t){tV.logLevel<=I.ERROR&&tV.error(`Auth (${t_}): ${e}`,...t)}function tK(e,...t){throw tQ(e,...t)}function tX(e,...t){return tQ(e,...t)}function tG(e,t,n){let i=Object.assign(Object.assign({},tq()),{[t]:n}),r=new em("auth","Firebase",i);return r.create(t,{appName:e.name})}function tY(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&tK(e,"argument-error"),tG(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tQ(e,...t){if("string"!=typeof e){let n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return tH.create(e,...t)}function tJ(e,t,...n){if(!e)throw tQ(t,...n)}function tZ(e){let t="INTERNAL ASSERTION FAILED: "+e;throw t$(t),Error(t)}function t0(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function t1(){return"http:"===t6()||"https:"===t6()}function t6(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class t2{constructor(e,t){this.shortDelay=e,this.longDelay=t,t>e||tZ("Short delay should be less than long delay!"),this.isMobile=ea()||eu()}get(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(t1()||ec()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function t5(e,t){e.emulator||tZ("Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class t3{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void tZ("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void tZ("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void tZ("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}let t4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},t9=new t2(3e4,6e4);function t8(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function t7(e,t,n,i,r={}){return ne(e,r,async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});let o=eE(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),t3.fetch()(nn(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},r))})}async function ne(e,t,n){e._canInitEmulator=!1;let i=Object.assign(Object.assign({},t4),t);try{let t=new ni(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let s=await r.json();if("needConfirmation"in s)throw nr(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{let t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw nr(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw nr(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw nr(e,"user-disabled",s);let a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw tG(e,a,o);tK(e,a)}}catch(t){if(t instanceof ef)throw t;tK(e,"network-request-failed",{message:String(t)})}}async function nt(e,t,n,i,r={}){let s=await t7(e,t,n,i,r);return"mfaPendingCredential"in s&&tK(e,"multi-factor-auth-required",{_serverResponse:s}),s}function nn(e,t,n,i){let r=`${t}${n}?${i}`;return e.config.emulator?t5(e.config,r):`${e.config.apiScheme}://${r}`}class ni{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(tX(this.auth,"network-request-failed")),t9.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nr(e,t,n){let i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let r=tX(e,t,i);return r.customData._tokenResponse=n,r}async function ns(e,t){return t7(e,"POST","/v1/accounts:delete",t)}async function no(e,t){return t7(e,"POST","/v1/accounts:update",t)}async function na(e,t){return t7(e,"POST","/v1/accounts:lookup",t)}function nl(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}async function nc(e,t=!1){let n=eB(e),i=await n.getIdToken(t),r=nh(i);tJ(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");let s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:nl(nu(r.auth_time)),issuedAtTime:nl(nu(r.iat)),expirationTime:nl(nu(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}function nu(e){return 1e3*Number(e)}function nh(e){let[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return t$("JWT malformed, contained fewer than 3 sections"),null;try{let e=J(n);if(!e)return t$("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return t$("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}async function nd(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof ef&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class np{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;let e=null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0,n=e-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(null==e?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class nf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nl(this.lastLoginAt),this.creationTime=nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function nm(e){var t;let n=e.auth,i=await e.getIdToken(),r=await nd(e,na(n,{idToken:i}));tJ(null==r?void 0:r.users.length,n,"internal-error");let s=r.users[0];e._notifyReloadListener(s);let o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map(e=>{var{providerId:t}=e,n=tU(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[],a=function(e,t){let n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null==a?void 0:a.length),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new nf(s.createdAt,s.lastLoginAt),isAnonymous:!!l&&c};Object.assign(e,u)}async function ng(e){let t=eB(e);await nm(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}async function ny(e,t){let n=await ne(e,{},async()=>{let n=eE({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=nn(e,i,"/v1/token",`key=${r}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",t3.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}class n_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tJ(e.idToken,"internal-error"),tJ(void 0!==e.idToken,"internal-error"),tJ(void 0!==e.refreshToken,"internal-error");let t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){let t=nh(e);return tJ(t,"internal-error"),tJ(void 0!==t.exp,"internal-error"),tJ(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return(tJ(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired)?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:i,expiresIn:r}=await ny(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){let{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new n_;return n&&(tJ("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(tJ("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(tJ("number"==typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n_,this.toJSON())}_performRefresh(){return tZ("not implemented")}}function nv(e,t){tJ("string"==typeof e||void 0===e,"internal-error",{appName:t})}class nb{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=tU(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new np(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new nf(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await nd(this,this.stsTokenManager.getToken(this.auth,e));return tJ(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return nc(this,e)}reload(){return ng(this)}_assign(e){this!==e&&(tJ(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new nb(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){tJ(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await nm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){let e=await this.getIdToken();return await nd(this,ns(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,l,c;let u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:_,emailVerified:v,isAnonymous:b,providerData:w,stsTokenManager:k}=t;tJ(_&&k,e,"internal-error");let x=n_.fromJSON(this.name,k);tJ("string"==typeof _,e,"internal-error"),nv(u,e.name),nv(h,e.name),tJ("boolean"==typeof v,e,"internal-error"),tJ("boolean"==typeof b,e,"internal-error"),nv(d,e.name),nv(p,e.name),nv(f,e.name),nv(m,e.name),nv(g,e.name),nv(y,e.name);let I=new nb({uid:_,auth:e,email:h,emailVerified:v,displayName:u,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:x,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(I.providerData=w.map(e=>Object.assign({},e))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(e,t,n=!1){let i=new n_;i.updateFromServerResponse(t);let r=new nb({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await nm(r),r}}let nw=new Map;function nk(e){e instanceof Function||tZ("Expected a class definition");let t=nw.get(e);return t?t instanceof e||tZ("Instance stored in cache mismatched with class"):(t=new e,nw.set(e,t)),t}class nx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}function nI(e,t,n){return`firebase:${e}:${t}:${n}`}nx.type="NONE";class nC{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:i,name:r}=this.auth;this.fullUserKey=nI(this.userKey,i.apiKey,r),this.fullPersistenceKey=nI("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?nb._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new nC(nk(nx),e,n);let i=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),r=i[0]||nk(nx),s=nI(n,e.config.apiKey,e.name),o=null;for(let n of t)try{let t=await n._get(s);if(t){let i=nb._fromJSON(e,t);n!==r&&(o=i),r=n;break}}catch(e){}let a=i.filter(e=>e._shouldAllowMigration);return r._shouldAllowMigration&&a.length&&(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==r)try{await e._remove(s)}catch(e){}}))),new nC(r,e,n)}}function nT(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";{if(nR(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(nN(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(nA(t))return"Blackberry";if(nO(t))return"Webos";if(nE(t))return"Safari";if((t.includes("chrome/")||nS(t))&&!t.includes("edge/"))return"Chrome";if(nP(t))return"Android";let n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if((null==n?void 0:n.length)===2)return n[1]}return"Other"}function nN(e=eo()){return/firefox\//i.test(e)}function nE(e=eo()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function nS(e=eo()){return/crios\//i.test(e)}function nR(e=eo()){return/iemobile/i.test(e)}function nP(e=eo()){return/android/i.test(e)}function nA(e=eo()){return/blackberry/i.test(e)}function nO(e=eo()){return/webos/i.test(e)}function nL(e=eo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function nD(e=eo()){return nL(e)||nP(e)||nO(e)||nA(e)||/windows phone/i.test(e)||nR(e)}function nM(e,t=[]){let n;switch(e){case"Browser":n=nT(eo());break;case"Worker":n=`${nT(eo())}-${e}`;break;default:n=e}let i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${t_}/${i}`}async function nF(e){return(await t7(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function nz(e,t){return t7(e,"GET","/v2/recaptchaConfig",t8(e,t))}function nW(e){return void 0!==e&&void 0!==e.getResponse}function nU(e){return void 0!==e&&void 0!==e.enterprise}class nB{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function nq(e){return new Promise((t,n)=>{var i,r;let s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=e=>{let t=tX("internal-error");t.customData=e,n(t)},s.type="text/javascript",s.charset="UTF-8",(null!==(r=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==r?r:document).appendChild(s)})}function nj(e){return`__${e}${Math.floor(1e6*Math.random())}`}class nH{constructor(e){this.type="recaptcha-enterprise",this.auth=eB(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{nz(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(void 0===i.recaptchaKey)n(Error("recaptcha Enterprise site key undefined"));else{let n=new nB(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function i(t,n,i){let r=window.grecaptcha;nU(r)?r.enterprise.ready(()=>{r.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{n(this.auth).then(n=>{if(!t&&nU(window.grecaptcha))i(n,e,r);else{if("undefined"==typeof window){r(Error("RecaptchaVerifier is only supported in browser"));return}nq("https://www.google.com/recaptcha/enterprise.js?render="+n).then(()=>{i(n,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function nV(e,t,n,i=!1){let r;let s=new nH(e);try{r=await s.verify(n)}catch(e){r=await s.verify(n,!0)}let o=Object.assign({},t);return i?Object.assign(o,{captchaResp:r}):Object.assign(o,{captchaResponse:r}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class n${constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,i)=>{try{let i=e(t);n(i)}catch(e){i(e)}});n.onAbort=t,this.queue.push(n);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){for(let e of(t.reverse(),t))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class nK{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nX(this),this.idTokenSubscription=new nX(this),this.beforeStateQueue=new n$(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tH,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=nk(t)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await nC.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser(),i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);(!n||n===s)&&(null==o?void 0:o.user)&&(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(e){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return(tJ(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId)?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await nm(e)}catch(e){if((null==e?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){let t=e?eB(e):null;return t&&tJ(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&tJ(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(nk(e))})}async initializeRecaptchaConfig(){let e=await nz(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new nB(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){let e=new nH(this);e.verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new em("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&nk(e)||this._popupRedirectResolver;tJ(t,this,"argument-error"),this.redirectPersistenceManager=await nC.create(this,[nk(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return(this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e)?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};let r="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return(tJ(s,this,"internal-error"),s.then(()=>r(this.currentUser)),"function"==typeof t)?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tJ(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let n=await (null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;let t=await (null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){tV.logLevel<=I.WARN&&tV.warn(`Auth (${t_}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}class nX{constructor(e){this.auth=e,this.observer=null,this.addObserver=eA(e=>this.observer=e)}get next(){return tJ(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function nG(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function nY(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}class nQ{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return tZ("not implemented")}_getIdTokenResponse(e){return tZ("not implemented")}_linkToIdToken(e,t){return tZ("not implemented")}_getReauthenticationResolver(e){return tZ("not implemented")}}async function nJ(e,t){return t7(e,"POST","/v1/accounts:resetPassword",t8(e,t))}async function nZ(e,t){return t7(e,"POST","/v1/accounts:update",t)}async function n0(e,t){return t7(e,"POST","/v1/accounts:update",t8(e,t))}async function n1(e,t){return nt(e,"POST","/v1/accounts:signInWithPassword",t8(e,t))}async function n6(e,t){return t7(e,"POST","/v1/accounts:sendOobCode",t8(e,t))}async function n2(e,t){return n6(e,t)}async function n5(e,t){return n6(e,t)}async function n3(e,t){return n6(e,t)}async function n4(e,t){return n6(e,t)}async function n9(e,t){return nt(e,"POST","/v1/accounts:signInWithEmailLink",t8(e,t))}async function n8(e,t){return nt(e,"POST","/v1/accounts:signInWithEmailLink",t8(e,t))}class n7 extends nQ{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n7(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new n7(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t||!t.emailPasswordEnabled)return n1(e,n).catch(async t=>{if("auth/missing-recaptcha-token"!==t.code)return Promise.reject(t);{console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");let t=await nV(e,n,"signInWithPassword");return n1(e,t)}});{let t=await nV(e,n,"signInWithPassword");return n1(e,t)}case"emailLink":return n9(e,{email:this._email,oobCode:this._password});default:tK(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return nZ(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return n8(e,{idToken:t,email:this._email,oobCode:this._password});default:tK(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ie(e,t){return nt(e,"POST","/v1/accounts:signInWithIdp",t8(e,t))}class it extends nQ{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new it(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tK("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=tU(t,["providerId","signInMethod"]);if(!n||!i)return null;let s=new it(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return ie(e,t)}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,ie(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,ie(e,t)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=eE(t)}return e}}async function ii(e,t){return t7(e,"POST","/v1/accounts:sendVerificationCode",t8(e,t))}async function ir(e,t){return nt(e,"POST","/v1/accounts:signInWithPhoneNumber",t8(e,t))}async function is(e,t){let n=await nt(e,"POST","/v1/accounts:signInWithPhoneNumber",t8(e,t));if(n.temporaryProof)throw nr(e,"account-exists-with-different-credential",n);return n}let io={USER_NOT_FOUND:"user-not-found"};async function ia(e,t){let n=Object.assign(Object.assign({},t),{operation:"REAUTH"});return nt(e,"POST","/v1/accounts:signInWithPhoneNumber",t8(e,n),io)}class il extends nQ{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new il({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new il({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return ir(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return is(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return ia(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new il({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class ic{constructor(e){var t,n,i,r,s,o;let a=eS(eR(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);tJ(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){let t=function(e){let t=eS(eR(e)).link,n=t?eS(eR(t)).deep_link_id:null,i=eS(eR(e)).deep_link_id,r=i?eS(eR(i)).link:null;return r||i||n||t||e}(e);try{return new ic(t)}catch(e){return null}}}class iu{constructor(){this.providerId=iu.PROVIDER_ID}static credential(e,t){return n7._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=ic.parseLink(t);return tJ(n,"argument-error"),n7._fromEmailAndCode(e,n.code,n.tenantId)}}iu.PROVIDER_ID="password",iu.EMAIL_PASSWORD_SIGN_IN_METHOD="password",iu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ih{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class id extends ih{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ip extends id{static credentialFromJSON(e){let t="string"==typeof e?JSON.parse(e):e;return tJ("providerId"in t&&"signInMethod"in t,"argument-error"),it._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return tJ(e.idToken||e.accessToken,"argument-error"),it._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ip.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ip.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:r,nonce:s,providerId:o}=e;if(!n&&!i&&!t&&!r||!o)return null;try{return new ip(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:r})}catch(e){return null}}}class im extends id{constructor(){super("facebook.com")}static credential(e){return it._fromParams({providerId:im.PROVIDER_ID,signInMethod:im.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return im.credentialFromTaggedObject(e)}static credentialFromError(e){return im.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return im.credential(e.oauthAccessToken)}catch(e){return null}}}im.FACEBOOK_SIGN_IN_METHOD="facebook.com",im.PROVIDER_ID="facebook.com";class ig extends id{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return it._fromParams({providerId:ig.PROVIDER_ID,signInMethod:ig.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ig.credentialFromTaggedObject(e)}static credentialFromError(e){return ig.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return ig.credential(t,n)}catch(e){return null}}}ig.GOOGLE_SIGN_IN_METHOD="google.com",ig.PROVIDER_ID="google.com";class iy extends id{constructor(){super("github.com")}static credential(e){return it._fromParams({providerId:iy.PROVIDER_ID,signInMethod:iy.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return iy.credentialFromTaggedObject(e)}static credentialFromError(e){return iy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return iy.credential(e.oauthAccessToken)}catch(e){return null}}}iy.GITHUB_SIGN_IN_METHOD="github.com",iy.PROVIDER_ID="github.com";class i_ extends nQ{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){let t=this.buildRequest();return ie(e,t)}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,ie(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,ie(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i,pendingToken:r}=t;return n&&i&&r&&n===i?new i_(n,r):null}static _create(e,t){return new i_(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class iv extends ih{constructor(e){tJ(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return iv.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return iv.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){let t=i_.fromJSON(e);return tJ(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return i_._create(n,t)}catch(e){return null}}}class ib extends id{constructor(){super("twitter.com")}static credential(e,t){return it._fromParams({providerId:ib.PROVIDER_ID,signInMethod:ib.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ib.credentialFromTaggedObject(e)}static credentialFromError(e){return ib.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return ib.credential(t,n)}catch(e){return null}}}async function iw(e,t){return nt(e,"POST","/v1/accounts:signUp",t8(e,t))}ib.TWITTER_SIGN_IN_METHOD="twitter.com",ib.PROVIDER_ID="twitter.com";class ik{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){let r=await nb._fromIdTokenResponse(e,n,i),s=ix(n),o=new ik({user:r,providerId:s,_tokenResponse:n,operationType:t});return o}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);let i=ix(n);return new ik({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function ix(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}async function iI(e){var t;let n=eB(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new ik({user:n.currentUser,providerId:null,operationType:"signIn"});let i=await iw(n,{returnSecureToken:!0}),r=await ik._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}class iC extends ef{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,iC.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new iC(e,t,n,i)}}function iT(e,t,n,i){let r="reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e);return r.catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw iC._fromErrorAndOperation(e,n,t,i);throw n})}function iN(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}async function iE(e,t){let n=eB(e);await iR(!0,n,t);let{providerUserInfo:i}=await no(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),r=iN(i||[]);return n.providerData=n.providerData.filter(e=>r.has(e.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function iS(e,t,n=!1){let i=await nd(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ik._forOperation(e,"link",i)}async function iR(e,t,n){await nm(t);let i=iN(t.providerData),r=!1===e?"provider-already-linked":"no-such-provider";tJ(i.has(n)===e,t.auth,r)}async function iP(e,t,n=!1){let{auth:i}=e,r="reauthenticate";try{let s=await nd(e,iT(i,r,t,e),n);tJ(s.idToken,i,"internal-error");let o=nh(s.idToken);tJ(o,i,"internal-error");let{sub:a}=o;return tJ(e.uid===a,i,"user-mismatch"),ik._forOperation(e,r,s)}catch(e){throw(null==e?void 0:e.code)==="auth/user-not-found"&&tK(i,"user-mismatch"),e}}async function iA(e,t,n=!1){let i="signIn",r=await iT(e,i,t),s=await ik._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function iO(e,t){return iA(eB(e),t)}async function iL(e,t){let n=eB(e);return await iR(!1,n,t.providerId),iS(n,t)}async function iD(e,t){return iP(eB(e),t)}async function iM(e,t){return nt(e,"POST","/v1/accounts:signInWithCustomToken",t8(e,t))}async function iF(e,t){let n=eB(e),i=await iM(n,{token:t,returnSecureToken:!0}),r=await ik._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}class iz{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?iW._fromServerResponse(e,t):"totpInfo"in t?iU._fromServerResponse(e,t):tK(e,"internal-error")}}class iW extends iz{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new iW(t)}}class iU extends iz{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new iU(t)}}function iB(e,t,n){var i;tJ((null===(i=n.url)||void 0===i?void 0:i.length)>0,e,"invalid-continue-uri"),tJ(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(tJ(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(tJ(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function iq(e,t,n){var i;let r=eB(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){let e=await nV(r,s,"getOobCode",!0);n&&iB(r,e,n),await n5(r,e)}else n&&iB(r,s,n),await n5(r,s).catch(async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");let e=await nV(r,s,"getOobCode",!0);n&&iB(r,e,n),await n5(r,e)}})}async function ij(e,t,n){await nJ(eB(e),{oobCode:t,newPassword:n})}async function iH(e,t){await n0(eB(e),{oobCode:t})}async function iV(e,t){let n=eB(e),i=await nJ(n,{oobCode:t}),r=i.requestType;switch(tJ(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":tJ(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":tJ(i.mfaInfo,n,"internal-error");default:tJ(i.email,n,"internal-error")}let s=null;return i.mfaInfo&&(s=iz._fromServerResponse(eB(n),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function i$(e,t){let{data:n}=await iV(eB(e),t);return n.email}async function iK(e,t,n){var i;let r;let s=eB(e),o={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};if(null===(i=s._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){let e=await nV(s,o,"signUpPassword");r=iw(s,e)}else r=iw(s,o).catch(async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");let e=await nV(s,o,"signUpPassword");return iw(s,e)}});let a=await r.catch(e=>Promise.reject(e)),l=await ik._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(l.user),l}async function iX(e,t,n){var i;let r=eB(e),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(e,t){tJ(t.handleCodeInApp,r,"argument-error"),t&&iB(r,e,t)}if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){let e=await nV(r,s,"getOobCode",!0);o(e,n),await n3(r,e)}else o(s,n),await n3(r,s).catch(async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");let e=await nV(r,s,"getOobCode",!0);o(e,n),await n3(r,e)}})}async function iG(e,t,n){let i=eB(e),r=iu.credentialWithLink(t,n||t0());return tJ(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),iO(i,r)}async function iY(e,t){return t7(e,"POST","/v1/accounts:createAuthUri",t8(e,t))}async function iQ(e,t){let n=t1()?t0():"http://localhost",{signinMethods:i}=await iY(eB(e),{identifier:t,continueUri:n});return i||[]}async function iJ(e,t){let n=eB(e),i=await e.getIdToken(),r={requestType:"VERIFY_EMAIL",idToken:i};t&&iB(n.auth,r,t);let{email:s}=await n2(n.auth,r);s!==e.email&&await e.reload()}async function iZ(e,t,n){let i=eB(e),r=await e.getIdToken(),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:r,newEmail:t};n&&iB(i.auth,s,n);let{email:o}=await n4(i.auth,s);o!==e.email&&await e.reload()}async function i0(e,t){return t7(e,"POST","/v1/accounts:update",t)}async function i1(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;let i=eB(e),r=await i.getIdToken(),s=await nd(i,i0(i.auth,{idToken:r,displayName:t,photoUrl:n,returnSecureToken:!0}));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;let o=i.providerData.find(({providerId:e})=>"password"===e);o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}async function i6(e,t,n){let{auth:i}=e,r=await e.getIdToken(),s={idToken:r,returnSecureToken:!0};t&&(s.email=t),n&&(s.password=n);let o=await nd(e,nZ(i,s));await e._updateTokensIfNecessary(o,!0)}class i2{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class i5 extends i2{constructor(e,t,n,i){super(e,t,n),this.username=i}}class i3 extends i2{constructor(e,t){super(e,"facebook.com",t)}}class i4 extends i5{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class i9 extends i2{constructor(e,t){super(e,"google.com",t)}}class i8 extends i5{constructor(e,t,n){super(e,"twitter.com",t,n)}}class i7{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new i7("enroll",e,t)}static _fromMfaPendingCredential(e){return new i7("signin",e)}toJSON(){let e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return i7._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return i7._fromIdtoken(e.multiFactorSession.idToken)}return null}}class re{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){let n=eB(e),i=t.customData._serverResponse,r=(i.mfaInfo||[]).map(e=>iz._fromServerResponse(n,e));tJ(i.mfaPendingCredential,n,"internal-error");let s=i7._fromMfaPendingCredential(i.mfaPendingCredential);return new re(s,r,async e=>{let r=await e._process(n,s);delete i.mfaInfo,delete i.mfaPendingCredential;let o=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":let a=await ik._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(a.user),a;case"reauthenticate":return tJ(t.user,n,"internal-error"),ik._forOperation(t.user,t.operationType,o);default:tK(n,"internal-error")}})}async resolveSignIn(e){return this.signInResolver(e)}}class rt{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>iz._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new rt(e)}async getSession(){return i7._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){let n=await this.getSession(),i=await nd(this.user,e._process(this.user.auth,n,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){let t="string"==typeof e?e:e.uid,n=await this.user.getIdToken();try{var i;let e=await nd(this.user,(i=this.user.auth,t7(i,"POST","/v2/accounts/mfaEnrollment:withdraw",t8(i,{idToken:n,mfaEnrollmentId:t}))));this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==t),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(e){throw e}}}let rn=new WeakMap,ri="__sak";class rr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(ri,"1"),this.storage.removeItem(ri),Promise.resolve(!0)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class rs extends rr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){let e=eo();return nE(e)||nL(e)}()&&function(){try{return!!(window&&window!==window.top)}catch(e){return!1}}(),this.fallbackToPolling=nD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}let i=()=>{let e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);eh()&&10===document.documentMode&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rs.type="LOCAL";class ro extends rr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ro.type="SESSION";class ra{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;let n=new ra(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:t,eventType:n,data:i}=e.data,r=this.handlersMap[n];if(!(null==r?void 0:r.size))return;e.ports[0].postMessage({status:"ack",eventId:t,eventType:n});let s=Array.from(r).map(async t=>t(e.origin,i)),o=await Promise.all(s.map(async e=>{try{let t=await e;return{fulfilled:!0,value:t}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:t,eventType:n,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function rl(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}ra.receivers=[];class rc{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let i,r;let s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw Error("connection_unavailable");return new Promise((o,a)=>{let l=rl("",20);s.port1.start();let c=setTimeout(()=>{a(Error("unsupported_event"))},n);r={messageChannel:s,onMessage(e){if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(e.data.response);break;default:clearTimeout(c),clearTimeout(i),a(Error("invalid_response"))}}},this.handlers.add(r),s.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])}).finally(()=>{r&&this.removeMessageHandler(r)})}}function ru(){return window}function rh(){return void 0!==ru().WorkerGlobalScope&&"function"==typeof ru().importScripts}async function rd(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{let e=await navigator.serviceWorker.ready;return e.active}catch(e){return null}}let rp="firebaseLocalStorageDb",rf="firebaseLocalStorage",rm="fbase_key";class rg{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ry(e,t){return e.transaction([rf],t?"readwrite":"readonly").objectStore(rf)}function r_(){let e=indexedDB.open(rp,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{let t=e.result;try{t.createObjectStore(rf,{keyPath:rm})}catch(e){n(e)}}),e.addEventListener("success",async()=>{let n=e.result;n.objectStoreNames.contains(rf)?t(n):(n.close(),await function(){let e=indexedDB.deleteDatabase(rp);return new rg(e).toPromise()}(),t(await r_()))})})}async function rv(e,t,n){let i=ry(e,!0).put({[rm]:t,value:n});return new rg(i).toPromise()}async function rb(e,t){let n=ry(e,!1).get(t),i=await new rg(n).toPromise();return void 0===i?null:i.value}function rw(e,t){let n=ry(e,!0).delete(t);return new rg(n).toPromise()}class rk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await r_()),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rh()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ra._getInstance(rh()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>{let n=await this._poll();return{keyProcessed:n.includes(t.key)}}),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await rd(),!this.activeServiceWorker)return;this.sender=new rc(this.activeServiceWorker);let n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null==navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await r_();return await rv(e,ri,"1"),await rw(e,ri),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>rv(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>rb(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>rw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>{let t=ry(e,!1).getAll();return new rg(t).toPromise()});if(!e||0!==this.pendingWrites)return[];let t=[],n=new Set;for(let{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}rk.type="LOCAL";class rx{constructor(e){this.auth=e,this.counter=1e12,this._widgets=new Map}render(e,t){let n=this.counter;return this._widgets.set(n,new rI(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;let n=e||1e12;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;let n=e||1e12;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;let n=e||1e12;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class rI{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};let i="string"==typeof e?document.getElementById(e):e;tJ(i,"argument-error",{appName:t}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){let t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<50;e++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(0);let{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw Error("reCAPTCHA mock was already deleted!")}}let rC=nj("rcb"),rT=new t2(3e4,6e4);class rN{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=ru().grecaptcha)||void 0===e?void 0:e.render)}load(e,t=""){return(tJ(t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t),e,"argument-error"),this.shouldResolveImmediately(t)&&nW(ru().grecaptcha))?Promise.resolve(ru().grecaptcha):new Promise((n,i)=>{let r=ru().setTimeout(()=>{i(tX(e,"network-request-failed"))},rT.get());ru()[rC]=()=>{ru().clearTimeout(r),delete ru()[rC];let s=ru().grecaptcha;if(!s||!nW(s)){i(tX(e,"internal-error"));return}let o=s.render;s.render=(e,t)=>{let n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};let s=`https://www.google.com/recaptcha/api.js??${eE({onload:rC,render:"explicit",hl:t})}`;nq(s).catch(()=>{clearTimeout(r),i(tX(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=ru().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class rE{async load(e){return new rx(e)}clearedOneInstance(){}}let rS="recaptcha",rR={theme:"light",type:"image"};class rP{constructor(e,t,n=Object.assign({},rR)){this.parameters=n,this.type=rS,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=eB(e),this.isInvisible="invisible"===this.parameters.size,tJ("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");let i="string"==typeof t?document.getElementById(t):t;tJ(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new rE:new rN,this.validateStartingState()}async verify(){this.assertNotDestroyed();let e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{let i=e=>{e&&(this.tokenChangeListeners.delete(i),n(e))};this.tokenChangeListeners.add(i),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){tJ(!this.parameters.sitekey,this.auth,"argument-error"),tJ(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),tJ("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){let n=ru()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){tJ(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){let t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){let e;tJ(t1()&&!rh(),this.auth,"internal-error"),await (e=null,new Promise(t=>{if("complete"===document.readyState){t();return}e=()=>t(),window.addEventListener("load",e)}).catch(t=>{throw e&&window.removeEventListener("load",e),t})),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);let t=await nF(this.auth);tJ(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return tJ(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rA{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){let t=il._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function rO(e,t,n){let i=eB(e),r=await rM(i,t,eB(n));return new rA(r,e=>iO(i,e))}async function rL(e,t,n){let i=eB(e);await iR(!1,i,"phone");let r=await rM(i.auth,t,eB(n));return new rA(r,e=>iL(i,e))}async function rD(e,t,n){let i=eB(e),r=await rM(i.auth,t,eB(n));return new rA(r,e=>iD(i,e))}async function rM(e,t,n){var i,r,s;let o=await n.verify();try{let a;if(tJ("string"==typeof o,e,"argument-error"),tJ(n.type===rS,e,"argument-error"),a="string"==typeof t?{phoneNumber:t}:t,"session"in a){let t=a.session;if("phoneNumber"in a){tJ("enroll"===t.type,e,"internal-error");let n=await (r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:o}},t7(e,"POST","/v2/accounts/mfaEnrollment:start",t8(e,r)));return n.phoneSessionInfo.sessionInfo}{tJ("signin"===t.type,e,"internal-error");let n=(null===(i=a.multiFactorHint)||void 0===i?void 0:i.uid)||a.multiFactorUid;tJ(n,e,"missing-multi-factor-info");let r=await (s={mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:o}},t7(e,"POST","/v2/accounts/mfaSignIn:start",t8(e,s)));return r.phoneResponseInfo.sessionInfo}}{let{sessionInfo:t}=await ii(e,{phoneNumber:a.phoneNumber,recaptchaToken:o});return t}}finally{n._reset()}}async function rF(e,t){await iS(eB(e),t)}class rz{constructor(e){this.providerId=rz.PROVIDER_ID,this.auth=eB(e)}verifyPhoneNumber(e,t){return rM(this.auth,e,eB(t))}static credential(e,t){return il._fromVerification(e,t)}static credentialFromResult(e){return rz.credentialFromTaggedObject(e)}static credentialFromError(e){return rz.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?il._fromTokenResponse(t,n):null}}function rW(e,t){return t?nk(t):(tJ(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}rz.PROVIDER_ID="phone",rz.PHONE_SIGN_IN_METHOD="phone";class rU extends nQ{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ie(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ie(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ie(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rB(e){return iA(e.auth,new rU(e),e.bypassAuthState)}function rq(e){let{auth:t,user:n}=e;return tJ(n,t,"internal-error"),iP(n,new rU(e),e.bypassAuthState)}async function rj(e){let{auth:t,user:n}=e;return tJ(n,t,"internal-error"),iS(n,new rU(e),e.bypassAuthState)}class rH{constructor(e,t,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s){this.reject(s);return}let a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rB;case"linkViaPopup":case"linkViaRedirect":return rj;case"reauthViaPopup":case"reauthViaRedirect":return rq;default:tK(this.auth,"internal-error")}}resolve(e){this.pendingPromise||tZ("Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){this.pendingPromise||tZ("Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}let rV=new t2(2e3,1e4);async function r$(e,t,n){let i=eB(e);tY(e,t,ih);let r=rW(i,n),s=new rG(i,"signInViaPopup",t,r);return s.executeNotNull()}async function rK(e,t,n){let i=eB(e);tY(i.auth,t,ih);let r=rW(i.auth,n),s=new rG(i.auth,"reauthViaPopup",t,r,i);return s.executeNotNull()}async function rX(e,t,n){let i=eB(e);tY(i.auth,t,ih);let r=rW(i.auth,n),s=new rG(i.auth,"linkViaPopup",t,r,i);return s.executeNotNull()}class rG extends rH{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,rG.currentPopupAction&&rG.currentPopupAction.cancel(),rG.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return tJ(e,this.auth,"internal-error"),e}async onExecution(){1===this.filter.length||tZ("Popup operations only handle one event");let e=rl();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(tX(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(tX(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rG.currentPopupAction=null}pollUserCancellation(){let e=()=>{var t,n;if(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tX(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rV.get())};e()}}rG.currentPopupAction=null;let rY=new Map;class rQ extends rH{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=rY.get(this.auth._key());if(!e){try{let t=await rJ(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}rY.set(this.auth._key(),e)}return this.bypassAuthState||rY.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rJ(e,t){let n=r6(t),i=r1(e);if(!await i._isAvailable())return!1;let r=await i._get(n)==="true";return await i._remove(n),r}async function rZ(e,t){return r1(e)._set(r6(t),"true")}function r0(e,t){rY.set(e._key(),t)}function r1(e){return nk(e._redirectPersistence)}function r6(e){return nI("pendingRedirect",e.config.apiKey,e.name)}async function r2(e,t,n){let i=eB(e);tY(e,t,ih),await i._initializationPromise;let r=rW(i,n);return await rZ(r,i),r._openRedirect(i,t,"signInViaRedirect")}async function r5(e,t,n){let i=eB(e);tY(i.auth,t,ih),await i.auth._initializationPromise;let r=rW(i.auth,n);await rZ(r,i.auth);let s=await r8(i);return r._openRedirect(i.auth,t,"reauthViaRedirect",s)}async function r3(e,t,n){let i=eB(e);tY(i.auth,t,ih),await i.auth._initializationPromise;let r=rW(i.auth,n);await iR(!1,i,t.providerId),await rZ(r,i.auth);let s=await r8(i);return r._openRedirect(i.auth,t,"linkViaRedirect",s)}async function r4(e,t){return await eB(e)._initializationPromise,r9(e,t,!1)}async function r9(e,t,n=!1){let i=eB(e),r=rW(i,t),s=new rQ(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}async function r8(e){let t=rl(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class r7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return st(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!st(e)){let i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(tX(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(se(e))}saveEventToCache(e){this.cachedEventUids.add(se(e)),this.lastProcessedEventTime=Date.now()}}function se(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function st({type:e,error:t}){return"unknown"===e&&(null==t?void 0:t.code)==="auth/no-auth-event"}async function sn(e,t={}){return t7(e,"GET","/v1/projects",t)}let si=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sr=/^https?/;async function ss(e){if(e.config.emulator)return;let{authorizedDomains:t}=await sn(e);for(let e of t)try{if(function(e){let t=t0(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){let r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!sr.test(n))return!1;if(si.test(e))return i===e;let r=e.replace(/\./g,"\\."),s=RegExp("^(.+\\."+r+"|"+r+")$","i");return s.test(i)}(e))return}catch(e){}tK(e,"unauthorized-domain")}let so=new t2(3e4,6e4);function sa(){let e=ru().___jsl;if(null==e?void 0:e.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}let sl=null,sc=new t2(5e3,15e3),su={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function sd(e){let t=await (sl=sl||new Promise((t,n)=>{var i,r,s;function o(){sa(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{sa(),n(tX(e,"network-request-failed"))},timeout:so.get()})}if(null===(r=null===(i=ru().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else if(null===(s=ru().gapi)||void 0===s?void 0:s.load)o();else{let t=nj("iframefcb");return ru()[t]=()=>{gapi.load?o():n(tX(e,"network-request-failed"))},nq(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw sl=null,e})),n=ru().gapi;return tJ(n,e,"internal-error"),t.open({where:document.body,url:function(e){let t=e.config;tJ(t.authDomain,e,"auth-domain-config-required");let n=t.emulator?t5(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:t_},r=sh.get(e.config.apiHost);r&&(i.eid=r);let s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${eE(i).slice(1)}`}(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:su,dontclear:!0},t=>new Promise(async(n,i)=>{await t.restyle({setHideOnLeave:!1});let r=tX(e,"network-request-failed"),s=ru().setTimeout(()=>{i(r)},sc.get());function o(){ru().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{i(r)})}))}let sp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class sf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}let sm=encodeURIComponent("fac");async function sg(e,t,n,i,r,s){tJ(e.config.authDomain,e,"auth-domain-config-required"),tJ(e.config.apiKey,e,"invalid-api-key");let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:t_,eventId:r};if(t instanceof ih)for(let[n,i]of(t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",eI(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters())),Object.entries(s||{})))o[n]=i;if(t instanceof id){let e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}for(let t of(e.tenantId&&(o.tid=e.tenantId),Object.keys(o)))void 0===o[t]&&delete o[t];let a=await e._getAppCheckToken(),l=a?`#${sm}=${encodeURIComponent(a)}`:"";return`${function({config:e}){return e.emulator?t5(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${eE(o).slice(1)}${l}`}let sy="webStorageSupport",s_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ro,this._completeRedirectFn=r9,this._overrideRedirectResult=r0}async _openPopup(e,t,n,i){var r;(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager)||tZ("_initialize() not called before _openPopup()");let s=await sg(e,t,n,t0(),i);return function(e,t,n,i=500,r=600){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",l=Object.assign(Object.assign({},sp),{width:i.toString(),height:r.toString(),top:s,left:o}),c=eo().toLowerCase();n&&(a=nS(c)?"_blank":n),nN(c)&&(t=t||"http://localhost",l.scrollbars="yes");let u=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=eo()){var t;return nL(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==a)return function(e,t){let n=document.createElement("a");n.href=e,n.target=t;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new sf(null);let h=window.open(t||"",a,u);tJ(h,e,"popup-blocked");try{h.focus()}catch(e){}return new sf(h)}(e,s,rl())}async _openRedirect(e,t,n,i){await this._originValidation(e);let r=await sg(e,t,n,t0(),i);return ru().location.href=r,new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(n||tZ("If manager is not set, promise should be"),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await sd(e),n=new r7(e);return t.register("authEvent",t=>{tJ(null==t?void 0:t.authEvent,e,"invalid-auth-event");let i=n.onEvent(t.authEvent);return{status:i?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){let n=this.iframes[e._key()];n.send(sy,{type:sy},n=>{var i;let r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[sy];void 0!==r&&t(!!r),tK(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ss(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nD()||nE()||nL()}};class sv{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return tZ("unexpected MultiFactorSessionType")}}}class sb extends sv{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new sb(e)}_finalizeEnroll(e,t,n){return t7(e,"POST","/v2/accounts/mfaEnrollment:finalize",t8(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}_finalizeSignIn(e,t){return t7(e,"POST","/v2/accounts/mfaSignIn:finalize",t8(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}}class sw{constructor(){}static assertion(e){return sb._fromCredential(e)}}sw.FACTOR_ID="phone";class sk extends sv{constructor(e,t,n){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(e,t){return new sk(t,void 0,e)}static _fromEnrollmentId(e,t){return new sk(t,e)}async _finalizeEnroll(e,t,n){return tJ(void 0!==this.secret,e,"argument-error"),t7(e,"POST","/v2/accounts/mfaEnrollment:finalize",t8(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}))}async _finalizeSignIn(e,t){tJ(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");let n={verificationCode:this.otp};return t7(e,"POST","/v2/accounts/mfaSignIn:finalize",t8(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n}))}}class sx{constructor(e,t,n,i,r,s,o){this.sessionInfo=s,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=r}static _fromStartTotpMfaEnrollmentResponse(e,t){return new sx(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var n;let i=!1;return(sI(e)||sI(t))&&(i=!0),i&&(sI(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),sI(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function sI(e){return void 0===e||(null==e?void 0:e.length)===0}var sC="@firebase/auth",sT="1.0.0";class sN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;let t=await this.auth.currentUser.getIdToken(e);return{accessToken:t}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){tJ(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function sE(){return window}async function sS(e,t,n){var i;let{BuildInfo:r}=sE();t.sessionId||tZ("AuthEvent did not contain a session ID");let s=await sA(t.sessionId),o={};return nL()?o.ibi=r.packageName:nP()?o.apn=r.packageName:tK(e,"operation-not-supported-in-this-environment"),r.displayName&&(o.appDisplayName=r.displayName),o.sessionId=s,sg(e,n,t.type,void 0,null!==(i=t.eventId)&&void 0!==i?i:void 0,o)}async function sR(e){let{BuildInfo:t}=sE(),n={};nL()?n.iosBundleId=t.packageName:nP()?n.androidPackageName=t.packageName:tK(e,"operation-not-supported-in-this-environment"),await sn(e,n)}async function sP(e,t,n){let{cordova:i}=sE(),r=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var e;s();let t=null===(e=i.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(tX(e,"redirect-cancelled-by-user"))},2e3))}function u(){(null==document?void 0:document.visibilityState)==="visible"&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),nP()&&document.addEventListener("visibilitychange",u,!1),r=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{r()}}async function sA(e){let t=function(e){if(/[0-9a-zA-Z]+/.test(e)||tZ("Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return new TextEncoder().encode(e);let t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}(e),n=await crypto.subtle.digest("SHA-256",t),i=Array.from(new Uint8Array(n));return i.map(e=>e.toString(16).padStart(2,"0")).join("")}null===(g=ei())||void 0===g||g._authIdTokenMaxAge,y="Browser",td(new eq("auth",(e,{options:t})=>{let n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;tJ(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});let a={apiKey:s,authDomain:o,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nM(y)},l=new nK(n,i,r,a);return function(e,t){let n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(nk);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{let i=e.getProvider("auth-internal");i.initialize()})),td(new eq("auth-internal",e=>{let t=eB(e.getProvider("auth").getImmediate());return new sN(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),tx(sC,sT,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),tx(sC,sT,"esm2017");class sO extends r7{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}async function sL(e){let t=await nk(rs)._get(sD(e));return t&&await nk(rs)._remove(sD(e)),t}function sD(e){return nI("authEvent",e.config.apiKey,e.name)}function sM(e){if(!(null==e?void 0:e.includes("?")))return{};let[t,...n]=e.split("?");return eS(n.join("?"))}let sF=class{constructor(){this._redirectPersistence=ro,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=r9,this._overrideRedirectResult=r0}async _initialize(e){let t=e._key(),n=this.eventManagers.get(t);return n||(n=new sO(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){tK(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,i){!function(e){var t,n,i,r,s,o,a,l,c,u;let h=sE();tJ("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),tJ(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),tJ("function"==typeof(null===(s=null===(r=null===(i=null==h?void 0:h.cordova)||void 0===i?void 0:i.plugins)||void 0===r?void 0:r.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tJ("function"==typeof(null===(l=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tJ("function"==typeof(null===(u=null===(c=null==h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);let r=await this._initialize(e);await r.initialized(),r.resetRedirect(),rY.clear(),await this._originValidation(e);let s=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:function(){let e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){let n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}(),postBody:null,tenantId:e.tenantId,error:tX(e,"no-auth-event")}}(e,n,i);await nk(rs)._set(sD(e),s);let o=await sS(e,s,t),a=await function(e){let{cordova:t}=sE();return new Promise(n=>{t.plugins.browsertab.isAvailable(i=>{let r=null;i?t.plugins.browsertab.openUrl(e):r=t.InAppBrowser.open(e,!function(e=eo()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_system":"_blank","location=yes"),n(r)})})}(o);return sP(e,r,a)}_isIframeWebStorageSupported(e,t){throw Error("Method not implemented.")}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sR(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){let{universalLinks:n,handleOpenURL:i,BuildInfo:r}=sE(),s=setTimeout(async()=>{await sL(e),t.onEvent(sz())},500),o=async n=>{clearTimeout(s);let i=await sL(e),r=null;i&&(null==n?void 0:n.url)&&(r=function(e,t){var n,i;let r=function(e){let t=sM(e),n=t.link?decodeURIComponent(t.link):void 0,i=sM(n).link,r=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0,s=sM(r).link;return s||r||i||n||e}(t);if(r.includes("/__/auth/callback")){let t=sM(r),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(i=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===i?void 0:i[1],a=o?tX(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:r,postBody:null}}return null}(i,n.url)),t.onEvent(r||sz())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,o);let a=`${r.packageName.toLowerCase()}://`;sE().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(a)&&o({url:e}),"function"==typeof i)try{i(e)}catch(e){console.error(e)}}}};function sz(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:tX("no-auth-event")}}function sW(){var e;return(null===(e=null==self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function sU(e=eo()){return!!(("file:"===sW()||"ionic:"===sW()||"capacitor:"===sW())&&e.toLowerCase().match(/iphone|ipad|ipod|android/))}function sB(){try{let e=self.localStorage,t=rl();if(e){if(e.setItem(t,"1"),e.removeItem(t),function(e=eo()){return eh()&&(null==document?void 0:document.documentMode)===11||function(e=eo()){return/Edge\/\d+/.test(e)}(e)}())return ep();return!0}}catch(e){return sq()&&ep()}return!1}function sq(){return void 0!==T&&"WorkerGlobalScope"in T&&"importScripts"in T}function sj(){return("http:"===sW()||"https:"===sW()||ec()||sU())&&!(eu()||el())&&sB()&&!sq()}function sH(){return sU()&&"undefined"!=typeof document}async function sV(){return!!sH()&&new Promise(e=>{let t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})}let s$={LOCAL:"local",NONE:"none",SESSION:"session"},sK="persistence";async function sX(e){await e._initializationPromise;let t=sG(),n=nI(sK,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function sG(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(e){return null}}class sY{constructor(){this.browserResolver=nk(s_),this.cordovaResolver=nk(sF),this.underlyingResolver=null,this._redirectPersistence=ro,this._completeRedirectFn=r9,this._overrideRedirectResult=r0}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,i)}async _openRedirect(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return sH()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return tJ(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;let e=await sV();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function sQ(e){let t;let{_tokenResponse:n}=e instanceof ef?e.customData:e;if(!n)return null;if(!(e instanceof ef)&&"temporaryProof"in n&&"phoneNumber"in n)return rz.credentialFromResult(e);let i=n.providerId;if(!i||i===tB.PASSWORD)return null;switch(i){case tB.GOOGLE:t=ig;break;case tB.FACEBOOK:t=im;break;case tB.GITHUB:t=iy;break;case tB.TWITTER:t=ib;break;default:let{oauthIdToken:r,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=n;if(!s&&!o&&!r&&!a)return null;if(a){if(i.startsWith("saml."))return i_._create(i,a);return it._fromParams({providerId:i,signInMethod:i,pendingToken:a,idToken:r,accessToken:s})}return new ip(i).credential({idToken:r,accessToken:s,rawNonce:l})}return e instanceof ef?t.credentialFromError(e):t.credentialFromResult(e)}function sJ(e,t){return t.catch(t=>{throw t instanceof ef&&function(e,t){var n;let i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if((null==t?void 0:t.code)==="auth/multi-factor-auth-required")t.resolver=new s0(e,function(e,t){var n;let i=eB(e);return tJ(t.customData.operationType,i,"argument-error"),tJ(null===(n=t.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,i,"argument-error"),re._fromError(i,t)}(e,t));else if(i){let e=sQ(t);e&&(t.credential=e,t.tenantId=i.tenantId||void 0,t.email=i.email||void 0,t.phoneNumber=i.phoneNumber||void 0)}}(e,t),t}).then(e=>{let t=e.operationType,n=e.user;return{operationType:t,credential:sQ(e),additionalUserInfo:function(e){let{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;let{providerId:i}=e,r=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!i&&(null==e?void 0:e.idToken)){let i=null===(n=null===(t=nh(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(i){let e="anonymous"!==i&&"custom"!==i?i:null;return new i2(s,e)}}if(!i)return null;switch(i){case"facebook.com":return new i3(s,r);case"github.com":return new i4(s,r);case"google.com":return new i9(s,r);case"twitter.com":return new i8(s,r,e.screenName||null);case"custom":case"anonymous":return new i2(s,null);default:return new i2(s,i,r)}}(n)}(e),user:s1.getOrCreate(n)}})}async function sZ(e,t){let n=await t;return{verificationId:n.verificationId,confirm:t=>sJ(e,n.confirm(t))}}class s0{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return sJ(this.auth.unwrap(),this.resolver.resolveSignIn(e))}}class s1{constructor(e){this._delegate=e,this.multiFactor=function(e){let t=eB(e);return rn.has(t)||rn.set(t,rt._fromUser(t)),rn.get(t)}(e)}static getOrCreate(e){return s1.USER_MAP.has(e)||s1.USER_MAP.set(e,new s1(e)),s1.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return sJ(this.auth,iL(this._delegate,e))}async linkWithPhoneNumber(e,t){return sZ(this.auth,rL(this._delegate,e,t))}async linkWithPopup(e){return sJ(this.auth,rX(this._delegate,e,sY))}async linkWithRedirect(e){return await sX(eB(this.auth)),r3(this._delegate,e,sY)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return sJ(this.auth,iD(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return sZ(this.auth,rD(this._delegate,e,t))}reauthenticateWithPopup(e){return sJ(this.auth,rK(this._delegate,e,sY))}async reauthenticateWithRedirect(e){return await sX(eB(this.auth)),r5(this._delegate,e,sY)}sendEmailVerification(e){return iJ(this._delegate,e)}async unlink(e){return await iE(this._delegate,e),this}updateEmail(e){return i6(eB(this._delegate),e,null)}updatePassword(e){return i6(eB(this._delegate),null,e)}updatePhoneNumber(e){return rF(this._delegate,e)}updateProfile(e){return i1(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return iZ(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}s1.USER_MAP=new WeakMap;class s6{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}let{apiKey:n}=e.options;tJ(n,"invalid-api-key",{appName:e.name}),tJ(n,"invalid-api-key",{appName:e.name});let i="undefined"!=typeof window?sY:void 0;this._delegate=t.initialize({options:{persistence:function(e,t){let n=function(e,t){let n=sG();if(!n)return[];let i=nI(sK,e,t),r=n.getItem(i);switch(r){case s$.NONE:return[nx];case s$.LOCAL:return[rk,ro];case s$.SESSION:return[ro];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(rk)||n.push(rk),"undefined"!=typeof window)for(let e of[rs,ro])n.includes(e)||n.push(e);return n.includes(nx)||n.push(nx),n}(n,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(tj),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?s1.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){let i=eB(e);tJ(i._canInitEmulator,i,"emulator-config-failed"),tJ(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");let r=!!(null==n?void 0:n.disableWarnings),s=nG(t),{host:o,port:a}=function(e){let t=nG(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};let i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let e=r[1];return{host:e,port:nY(i.substr(e.length+1))}}{let[e,t]=i.split(":");return{host:e,port:nY(t)}}}(t),l=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(this._delegate,e,t)}applyActionCode(e){return iH(this._delegate,e)}checkActionCode(e){return iV(this._delegate,e)}confirmPasswordReset(e,t){return ij(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return sJ(this._delegate,iK(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return iQ(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){let n=ic.parseLink(t);return(null==n?void 0:n.operation)==="EMAIL_SIGNIN"}(this._delegate,e)}async getRedirectResult(){tJ(sj(),this._delegate,"operation-not-supported-in-this-environment");let e=await r4(this._delegate,sY);return e?sJ(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){eB(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){let{next:i,error:r,complete:s}=s2(e,t,n);return this._delegate.onAuthStateChanged(i,r,s)}onIdTokenChanged(e,t,n){let{next:i,error:r,complete:s}=s2(e,t,n);return this._delegate.onIdTokenChanged(i,r,s)}sendSignInLinkToEmail(e,t){return iX(this._delegate,e,t)}sendPasswordResetEmail(e,t){return iq(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(!function(e,t){if(tJ(Object.values(s$).includes(t),e,"invalid-persistence-type"),eu()){tJ(t!==s$.SESSION,e,"unsupported-persistence-type");return}if(el()){tJ(t===s$.NONE,e,"unsupported-persistence-type");return}if(sq()){tJ(t===s$.NONE||t===s$.LOCAL&&ep(),e,"unsupported-persistence-type");return}tJ(t===s$.NONE||sB(),e,"unsupported-persistence-type")}(this._delegate,e),e){case s$.SESSION:t=ro;break;case s$.LOCAL:let n=await nk(rk)._isAvailable();t=n?rk:rs;break;case s$.NONE:t=nx;break;default:return tK("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return sJ(this._delegate,iI(this._delegate))}signInWithCredential(e){return sJ(this._delegate,iO(this._delegate,e))}signInWithCustomToken(e){return sJ(this._delegate,iF(this._delegate,e))}signInWithEmailAndPassword(e,t){return sJ(this._delegate,iO(eB(this._delegate),iu.credential(e,t)))}signInWithEmailLink(e,t){return sJ(this._delegate,iG(this._delegate,e,t))}signInWithPhoneNumber(e,t){return sZ(this._delegate,rO(this._delegate,e,t))}async signInWithPopup(e){return tJ(sj(),this._delegate,"operation-not-supported-in-this-environment"),sJ(this._delegate,r$(this._delegate,e,sY))}async signInWithRedirect(e){return tJ(sj(),this._delegate,"operation-not-supported-in-this-environment"),await sX(this._delegate),r2(this._delegate,e,sY)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return i$(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function s2(e,t,n){let i=e;"function"!=typeof e&&({next:i,error:t,complete:n}=e);let r=i;return{next:e=>r(e&&s1.getOrCreate(e)),error:t,complete:n}}s6.Persistence=s$;class s5{constructor(){this.providerId="phone",this._delegate=new rz(tz.auth().unwrap())}static credential(e,t){return rz.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}s5.PHONE_SIGN_IN_METHOD=rz.PHONE_SIGN_IN_METHOD,s5.PROVIDER_ID=rz.PROVIDER_ID,tz.INTERNAL.registerComponent(new eq("auth-compat",e=>{let t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new s6(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:iu,FacebookAuthProvider:im,GithubAuthProvider:iy,GoogleAuthProvider:ig,OAuthProvider:ip,SAMLAuthProvider:iv,PhoneAuthProvider:s5,PhoneMultiFactorGenerator:sw,RecaptchaVerifier:class{constructor(e,t,n=tz.app()){var i;tJ(null===(i=n.options)||void 0===i?void 0:i.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new rP(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:ib,Auth:s6,AuthCredential:nQ,Error:ef}).setInstantiationMode("LAZY").setMultipleInstances(!1)),tz.registerVersion("@firebase/auth-compat","0.4.3");let s3="@firebase/database",s4="1.0.0",s9="";class s8{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),e_(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ey(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class s7{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return ek(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}let oe=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new s8(t)}}catch(e){}return new s7},ot=oe("localStorage"),on=oe("sessionStorage"),oi=new eJ("@firebase/database"),or=(d=1,function(){return d++}),os=function(e){let t=eW(e),n=new eP;n.update(t);let i=n.digest();return X.encodeByteArray(i)},oo=function(...e){let t="";for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=oo.apply(null,i):"object"==typeof i?t+=e_(i):t+=i,t+=" "}return t},oa=null,ol=!0,oc=function(e,t){H(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(oi.logLevel=I.VERBOSE,oa=oi.log.bind(oi),t&&on.set("logging_enabled",!0)):"function"==typeof e?oa=e:(oa=null,on.remove("logging_enabled"))},ou=function(...e){if(!0===ol&&(ol=!1,null===oa&&!0===on.get("logging_enabled")&&oc(!0)),oa){let t=oo.apply(null,e);oa(t)}},oh=function(e){return function(...t){ou(e,...t)}},od=function(...e){let t="FIREBASE INTERNAL ERROR: "+oo(...e);oi.error(t)},op=function(...e){let t=`FIREBASE FATAL ERROR: ${oo(...e)}`;throw oi.error(t),Error(t)},of=function(...e){let t="FIREBASE WARNING: "+oo(...e);oi.warn(t)},om=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&of("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},og=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},oy=function(e){if(ed()||"complete"===document.readyState)e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},o_="[MIN_NAME]",ov="[MAX_NAME]",ob=function(e,t){if(e===t)return 0;{if(e===o_||t===ov)return -1;if(t===o_||e===ov)return 1;let n=oE(e),i=oE(t);return null!==n?null!==i?n-i==0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},ow=function(e,t){return e===t?0:e<t?-1:1},ok=function(e,t){if(t&&e in t)return t[e];throw Error("Missing required key ("+e+") in object: "+e_(t))},ox=function(e){if("object"!=typeof e||null===e)return e_(e);let t=[];for(let n in e)t.push(n);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=e_(t[i])+":"+ox(e[t[i]]);return n+"}"},oI=function(e,t){let n=e.length;if(n<=t)return[e];let i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function oC(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}let oT=function(e){let t,n,i,r,s;H(!og(e),"Invalid JSON number"),0===e?(n=0,i=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=22250738585072014e-324?(n=(r=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,i=Math.round(e*Math.pow(2,52-r)-4503599627370496)):(n=0,i=Math.round(e/5e-324)));let o=[];for(s=52;s;s-=1)o.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)o.push(n%2?1:0),n=Math.floor(n/2);o.push(t?1:0),o.reverse();let a=o.join(""),l="";for(s=0;s<64;s+=8){let e=parseInt(a.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},oN=RegExp("^-?(0*)\\d{1,10}$"),oE=function(e){if(oN.test(e)){let t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},oS=function(e){try{e()}catch(e){setTimeout(()=>{let t=e.stack||"";throw of("Exception was thrown by user callback.",t),e},Math.floor(0))}},oR=function(){let e="object"==typeof window&&window.navigator&&window.navigator.userAgent||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},oP=function(e,t){let n=setTimeout(e,t);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class oA{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(e=>this.appCheck=e)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){of(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class oO{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(ou("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',of(e)}}class oL{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}oL.OWNER="owner";let oD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,oM="websocket",oF="long_polling";class oz{constructor(e,t,n,i,r=!1,s="",o=!1,a=!1){this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ot.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ot.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function oW(e,t,n){let i;if(H("string"==typeof t,"typeof type must == string"),H("object"==typeof n,"typeof params must == object"),t===oM)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===oF)i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw Error("Unknown connection type: "+t);(e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams)&&(n.ns=e.namespace);let r=[];return oC(n,(e,t)=>{r.push(e+"="+t)}),i+r.join("&")}class oU{constructor(){this.counters_={}}incrementCounter(e,t=1){ek(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Z(void 0,this.counters_)}}let oB={},oq={};function oj(e){let t=e.toString();return oB[t]||(oB[t]=new oU),oB[t]}class oH{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&oS(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}let oV="start";class o${constructor(e,t,n,i,r,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=oh(e),this.stats_=oj(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),oW(t,oF,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new oH(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),oy(()=>{if(this.isClosed_)return;this.scriptTagHolder=new oK((...e)=>{let[t,n,i,r,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder){if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===oV)this.id=n,this.password=i;else if("close"===t)n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_();else throw Error("Unrecognized command received: "+t)}},(...e)=>{let[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)},()=>{this.onClosed_()},this.urlFn);let e={};e[oV]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&oD.test(location.hostname)&&(e.r="f");let t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){o$.forceAllow_=!0}static forceDisallow(){o$.forceDisallow_=!0}static isAvailable(){return!ed()&&(!!o$.forceAllow_||!o$.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){!this.isClosed_&&(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=e_(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let n=Y(t),i=oI(n,1840);for(let e=0;e<i.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(ed())return;this.myDisconnFrame=document.createElement("iframe");let n={};n.dframe="t",n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=e_(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class oK{constructor(e,t,n,i){if(this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,ed())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=or(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=oK.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){let e=document.domain;n='<script>document.domain="'+e+'";</script>'}let i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(e){ou("frame writing exception"),e.stack&&ou(e.stack),ou(e)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{let t=e.contentWindow.document;t||ou("No IE domain setting required")}catch(n){let t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(!this.alive||!this.sendNewPolls||!(this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)))return!1;{this.currentSerial++;let e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0;){let e=this.pendingSegs[0];if(e.d.length+30+n.length<=1870){let e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}else break}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),n()})}addTag(e,t){ed()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){let e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{ou("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(e){}},Math.floor(1))}}let oX=null;"undefined"!=typeof MozWebSocket?oX=MozWebSocket:"undefined"!=typeof WebSocket&&(oX=WebSocket);class oG{constructor(e,t,n,i,r,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=oh(this.connId),this.stats_=oj(t),this.connURL=oG.connectionURL_(t,s,o,i,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i,r){let s={};return s.v="5",!ed()&&"undefined"!=typeof location&&location.hostname&&oD.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),i&&(s.ac=i),r&&(s.p=r),oW(e,oM,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ot.set("previous_websocket_failure",!0);try{let e;if(ed()){let t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/5/${s9}/${P.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);let n={},i=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;i&&(e.proxy={origin:i})}this.mySock=new oX(this.connURL,[],e)}catch(t){this.log_("Error instantiating WebSocket.");let e=t.message||t.data;e&&this.log_(e),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");let t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){oG.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){let t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);t&&t.length>1&&4.4>parseFloat(t[1])&&(e=!0)}return!e&&null!==oX&&!oG.forceDisallow_}static previouslyFailed(){return ot.isInMemoryStorage||!0===ot.get("previous_websocket_failure")}markConnectionHealthy(){ot.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let e=this.frames.join("");this.frames=null;let t=ey(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(H(null===this.frames,"We already have a frame buffer"),e.length<=6){let t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;let t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{let e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();let t=e_(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let n=oI(t,16384);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){!this.isClosed_&&(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}oG.responsesRequiredToBeHealthy=2,oG.healthyTimeout=3e4;class oY{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[o$,oG]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){let t=oG&&oG.isAvailable(),n=t&&!oG.previouslyFailed();if(e.webSocketOnly&&(t||of("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[oG];else{let e=this.transports_=[];for(let t of oY.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);oY.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}oY.globalTransportInitialized_=!1;class oQ{constructor(e,t,n,i,r,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=oh("c:"+this.id+":"),this.transportManager_=new oY(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=oP(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){let t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=ok("t",e),n=ok("d",e);if("c"===t)this.onSecondaryControl_(n);else if("d"===t)this.pendingDataMessages.push(n);else throw Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=ok("t",e),n=ok("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){!this.isHealthy_&&(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=ok("t",e);if("d"in e){let n=e.d;if("h"===t){let e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?od("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):od("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&of("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),oP(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):oP(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ot.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class oJ{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class oZ{constructor(e){this.allowedEvents_=e,this.listeners_={},H(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});let i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let e=0;e<i.length;e++)if(i[e].callback===t&&(!n||n===i[e].context)){i.splice(e,1);return}}validateEventType_(e){H(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class o0 extends oZ{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||ea()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new o0}getInitialEvent(e){return H("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class o1{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function o6(){return new o1("")}function o2(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function o5(e){return e.pieces_.length-e.pieceNum_}function o3(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new o1(e.pieces_,t)}function o4(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function o9(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function o8(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new o1(t,0)}function o7(e,t){let n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof o1)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{let e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new o1(n,0)}function ae(e){return e.pieceNum_>=e.pieces_.length}function at(e,t){let n=o2(e),i=o2(t);if(null===n)return t;if(n===i)return at(o3(e),o3(t));throw Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function an(e,t){let n=o9(e,0),i=o9(t,0);for(let e=0;e<n.length&&e<i.length;e++){let t=ob(n[e],i[e]);if(0!==t)return t}return n.length===i.length?0:n.length<i.length?-1:1}function ai(e,t){if(o5(e)!==o5(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function ar(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(o5(e)>o5(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class as{constructor(e,t){this.errorPrefix_=t,this.parts_=o9(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=eU(this.parts_[e]);ao(this)}}function ao(e){if(e.byteLength_>768)throw Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+aa(e))}function aa(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class al extends oZ{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}static getInstance(){return new al}getInitialEvent(e){return H("visible"===e,"Unknown event type: "+e),[this.visible_]}}class ac extends oJ{constructor(e,t,n,i,r,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=ac.nextPersistentConnectionId_++,this.log_=oh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=1e3,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!ed())throw Error("Auth override specified in options, but not supported on non Node.js platforms");al.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&o0.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){let i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_(e_(r)),H(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();let t=new es,n={p:e._path.toString(),q:e._queryObject};this.outstandingGets_.push({action:"g",request:n,onComplete:e=>{let n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}}),this.outstandingGetCount_++;let i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,i){this.initConnection_();let r=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),H(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),H(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");let o={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(s).set(r,o),this.connected_&&this.sendListen_(o)}sendGet_(e){let t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){let t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);let r={p:n};e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest("q",r,r=>{let s=r.d,o=r.s;ac.warnOnListenWarnings_(s,t);let a=this.listens.get(n)&&this.listens.get(n).get(i);a===e&&(this.log_("listen response",r),"ok"!==o&&this.removeListen_(n,i),e.onComplete&&e.onComplete(o,s))})}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&ek(e,"w")){let n=ex(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){let e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();of(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){let t=e&&40===e.length;(t||ew(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,t=eb(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{let n=t.s,i=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){let n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),H(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");let r=this.removeListen_(n,i);r&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);let r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){let r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,e=>{i&&setTimeout(()=>{i(e.s,e.d)},Math.floor(0))})}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,r){this.initConnection_();let s={p:t,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;let o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){let t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)})}reportStats(e){if(this.connected_){let t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{let t=e.s;if("ok"!==t){let t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+e_(e));let t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else if("error"in e)throw"A server-side error has occurred: "+e.error;else"a"in e&&this.onDataPush_(e.a,e.b)}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):od("Unrecognized action received from server: "+e_(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){H(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){!e||this.visible_||this.reconnectDelay_!==this.maxReconnectDelay_||(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){let e=new Date().getTime()-this.lastConnectionEstablishedTime_;e>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime();let e=new Date().getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ac.nextConnectionId_++,r=this.lastSessionId,s=!1,o=null,a=function(){o?o.close():(s=!0,n())};this.realtime_={close:a,sendRequest:function(e){H(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)}};let l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[a,c]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);s?ou("getToken() completed but was canceled"):(ou("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=c&&c.token,o=new oQ(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,e=>{of(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},r))}catch(e){this.log_("Failed to get token: "+e),s||(this.repoInfo_.nodeAdmin&&of(e),a())}}}interrupt(e){ou("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ou("Resuming connection for reason: "+e),delete this.interruptReasons_[e],eI(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>ox(e)).join("$"):"default";let i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){let n;let i=new o1(e).toString();if(this.listens.has(i)){let e=this.listens.get(i);n=e.get(t),e.delete(t),0===e.size&&this.listens.delete(i)}else n=void 0;return n}onAuthRevoked_(e,t){ou("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){ou("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){for(let e of(this.tryAuth(),this.tryAppCheck(),this.listens.values()))for(let t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},t="js";ed()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+s9.replace(/\./g,"-")]=1,ea()?e["framework.cordova"]=1:eu()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=o0.getInstance().currentlyOnline();return eI(this.interruptReasons_)&&e}}ac.nextPersistentConnectionId_=0,ac.nextConnectionId_=0;class au{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new au(e,t)}}class ah{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let n=new au(o_,e),i=new au(o_,t);return 0!==this.compare(n,i)}minPost(){return au.MIN}}class ad extends ah{static get __EMPTY_NODE(){return n}static set __EMPTY_NODE(e){n=e}compare(e,t){return ob(e.name,t.name)}isDefinedOn(e){throw V("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return au.MIN}maxPost(){return new au(ov,n)}makePost(e,t){return H("string"==typeof e,"KeyIndex indexValue must always be a string."),new au(e,n)}toString(){return".key"}}let ap=new ad;class af{constructor(e,t,n,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else if(0===s){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}getNext(){let e;if(0===this.nodeStack_.length)return null;let t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class am{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:am.RED,this.left=null!=i?i:ag.EMPTY_NODE,this.right=null!=r?r:ag.EMPTY_NODE}copy(e,t,n,i,r){return new am(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this,r=n(e,i.key);return(i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n))).fixUp_()}removeMin_(){if(this.left.isEmpty())return ag.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}remove(e,t){let n,i;if(n=this,0>t(e,n.key))n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ag.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,am.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,am.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){let e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e===this.right.check_())return e+(this.isRed_()?0:1);throw Error("Black depths differ")}}am.RED=!0,am.BLACK=!1;class ag{constructor(e,t=ag.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ag(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,am.BLACK,null,null))}remove(e){return new ag(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,am.BLACK,null,null))}get(e){let t;let n=this.root_;for(;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty()){if(i)return i.key;return null}for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new af(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new af(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new af(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new af(this.root_,null,this.comparator_,!0,e)}}function ay(e,t){return ob(e.name,t.name)}function a_(e,t){return ob(e,t)}ag.EMPTY_NODE=new class{copy(e,t,n,i,r){return this}insert(e,t,n){return new am(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};let av=function(e){return"number"==typeof e?"number:"+oT(e):"string:"+e},ab=function(e){if(e.isLeafNode()){let t=e.val();H("string"==typeof t||"number"==typeof t||"object"==typeof t&&ek(t,".sv"),"Priority must be a string or number.")}else H(e===i||e.isEmpty(),"priority of unexpected type.");H(e===i||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};class aw{constructor(e,t=aw.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,H(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ab(this.priorityNode_)}static set __childrenNodeConstructor(e){r=e}static get __childrenNodeConstructor(){return r}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new aw(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:aw.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ae(e)?this:".priority"===o2(e)?this.priorityNode_:aw.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:aw.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){let n=o2(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(H(".priority"!==n||1===o5(e),".priority must be the last token in a path"),this.updateImmediateChild(n,aw.__childrenNodeConstructor.EMPTY_NODE.updateChild(o3(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+av(this.priorityNode_.val())+":");let t=typeof this.value_;e+=t+":","number"===t?e+=oT(this.value_):e+=this.value_,this.lazyHash_=os(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===aw.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof aw.__childrenNodeConstructor?-1:(H(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let t=typeof e.value_,n=typeof this.value_,i=aw.VALUE_TYPE_ORDER.indexOf(t),r=aw.VALUE_TYPE_ORDER.indexOf(n);return(H(i>=0,"Unknown leaf type: "+t),H(r>=0,"Unknown leaf type: "+n),i!==r)?r-i:"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}}aw.VALUE_TYPE_ORDER=["object","boolean","number","string"];let ak=new class extends ah{compare(e,t){let n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?ob(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return au.MIN}maxPost(){return new au(ov,new aw("[PRIORITY-POST]",o))}makePost(e,t){let n=s(e);return new au(t,new aw("[PRIORITY-POST]",n))}toString(){return".priority"}},ax=Math.log(2);class aI{constructor(e){this.count=parseInt(Math.log(e+1)/ax,10),this.current_=this.count-1;let t=parseInt(Array(this.count+1).join("1"),2);this.bits_=e+1&t}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}}let aC=function(e,t,n,i){e.sort(t);let r=function(t,i){let s,o;let a=i-t;if(0===a)return null;if(1===a)return s=e[t],o=n?n(s):s,new am(o,s.node,am.BLACK,null,null);{let l=parseInt(a/2,10)+t,c=r(t,l),u=r(l+1,i);return s=e[l],o=n?n(s):s,new am(o,s.node,am.BLACK,c,u)}},s=new aI(e.length),o=function(t){let i=null,s=null,o=e.length,a=function(t,i){let s=o-t,a=o;o-=t;let c=r(s+1,a),u=e[s],h=n?n(u):u;l(new am(h,u.node,i,null,c))},l=function(e){i?i.left=e:s=e,i=e};for(let e=0;e<t.count;++e){let n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?a(i,am.BLACK):(a(i,am.BLACK),a(i,am.RED))}return s}(s);return new ag(i||t,o)},aT={};class aN{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return H(aT&&ak,"ChildrenNode.ts has not been loaded"),a=a||new aN({".priority":aT},{".priority":ak})}get(e){let t=ex(this.indexes_,e);if(!t)throw Error("No index defined for "+e);return t instanceof ag?t:null}hasIndex(e){return ek(this.indexSet_,e.toString())}addIndex(e,t){let n;H(e!==ap,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=t.getIterator(au.Wrap),o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();n=r?aC(i,e.getCompare()):aT;let a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;let c=Object.assign({},this.indexes_);return c[a]=n,new aN(c,l)}addToIndexes(e,t){let n=eC(this.indexes_,(n,i)=>{let r=ex(this.indexSet_,i);if(H(r,"Missing index implementation for "+i),n===aT){if(!r.isDefinedOn(e.node))return aT;{let n=[],i=t.getIterator(au.Wrap),s=i.getNext();for(;s;)s.name!==e.name&&n.push(s),s=i.getNext();return n.push(e),aC(n,r.getCompare())}}{let i=t.get(e.name),r=n;return i&&(r=r.remove(new au(e.name,i))),r.insert(e,e.node)}});return new aN(n,this.indexSet_)}removeFromIndexes(e,t){let n=eC(this.indexes_,n=>{if(n===aT)return n;{let i=t.get(e.name);return i?n.remove(new au(e.name,i)):n}});return new aN(n,this.indexSet_)}}class aE{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ab(this.priorityNode_),this.children_.isEmpty()&&H(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return l||(l=new aE(new ag(a_),null,aN.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||l}updatePriority(e){return this.children_.isEmpty()?this:new aE(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{let t=this.children_.get(e);return null===t?l:t}}getChild(e){let t=o2(e);return null===t?this:this.getImmediateChild(t).getChild(o3(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(H(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{let n,i;let r=new au(e,t);t.isEmpty()?(n=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(n=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(r,this.children_));let s=n.isEmpty()?l:this.priorityNode_;return new aE(n,s,i)}}updateChild(e,t){let n=o2(e);if(null===n)return t;{H(".priority"!==o2(e)||1===o5(e),".priority must be the last token in a path");let i=this.getImmediateChild(n).updateChild(o3(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let t={},n=0,i=0,r=!0;if(this.forEachChild(ak,(s,o)=>{t[s]=o.val(e),n++,r&&aE.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):r=!1}),e||!r||!(i<2*n))return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t;{let e=[];for(let n in t)e[n]=t[n];return e}}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+av(this.getPriority().val())+":"),this.forEachChild(ak,(t,n)=>{let i=n.hash();""!==i&&(e+=":"+t+":"+i)}),this.lazyHash_=""===e?"":os(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){let i=this.resolveIndex_(n);if(!i)return this.children_.getPredecessorKey(e);{let n=i.getPredecessorKey(new au(e,t));return n?n.name:null}}getFirstChildName(e){let t=this.resolveIndex_(e);if(!t)return this.children_.minKey();{let e=t.minKey();return e&&e.name}}getFirstChild(e){let t=this.getFirstChildName(e);return t?new au(t,this.children_.get(t)):null}getLastChildName(e){let t=this.resolveIndex_(e);if(!t)return this.children_.maxKey();{let e=t.maxKey();return e&&e.name}}getLastChild(e){let t=this.getLastChildName(e);return t?new au(t,this.children_.get(t)):null}forEachChild(e,t){let n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){let n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{let n=this.children_.getIteratorFrom(e.name,au.Wrap),i=n.peek();for(;null!=i&&0>t.compare(i,e);)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){let n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{let n=this.children_.getReverseIteratorFrom(e.name,au.Wrap),i=n.peek();for(;null!=i&&t.compare(i,e)>0;)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===aS?-1:0}withIndex(e){if(e===ap||this.indexMap_.hasIndex(e))return this;{let t=this.indexMap_.addIndex(e,this.children_);return new aE(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===ap||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode()||!this.getPriority().equals(e.getPriority())||this.children_.count()!==e.children_.count())return!1;{let t=this.getIterator(ak),n=e.getIterator(ak),i=t.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=t.getNext(),r=n.getNext()}return null===i&&null===r}}resolveIndex_(e){return e===ap?null:this.indexMap_.get(e.toString())}}aE.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;let aS=new class extends aE{constructor(){super(new ag(a_),aE.EMPTY_NODE,aN.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return aE.EMPTY_NODE}isEmpty(){return!1}};function aR(e,t=null){if(null===e)return aE.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),H(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e){let n=e;return new aw(n,aR(t))}if(e instanceof Array){let n=aE.EMPTY_NODE;return oC(e,(t,i)=>{if(ek(e,t)&&"."!==t.substring(0,1)){let e=aR(i);(e.isLeafNode()||!e.isEmpty())&&(n=n.updateImmediateChild(t,e))}}),n.updatePriority(aR(t))}{let n=[],i=!1,r=e;if(oC(r,(e,t)=>{if("."!==e.substring(0,1)){let r=aR(t);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new au(e,r)))}}),0===n.length)return aE.EMPTY_NODE;let s=aC(n,ay,e=>e.name,a_);if(!i)return new aE(s,aR(t),aN.Default);{let e=aC(n,ak.getCompare());return new aE(s,aR(t),new aN({".priority":e},{".priority":ak}))}}}Object.defineProperties(au,{MIN:{value:new au(o_,aE.EMPTY_NODE)},MAX:{value:new au(ov,aS)}}),ad.__EMPTY_NODE=aE.EMPTY_NODE,aw.__childrenNodeConstructor=aE,i=aS,o=aS,s=aR;class aP extends ah{constructor(e){super(),this.indexPath_=e,H(!ae(e)&&".priority"!==o2(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?ob(e.name,t.name):r}makePost(e,t){let n=aR(e),i=aE.EMPTY_NODE.updateChild(this.indexPath_,n);return new au(t,i)}maxPost(){let e=aE.EMPTY_NODE.updateChild(this.indexPath_,aS);return new au(ov,e)}toString(){return o9(this.indexPath_,0).join("/")}}let aA=new class extends ah{compare(e,t){let n=e.node.compareTo(t.node);return 0===n?ob(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return au.MIN}maxPost(){return au.MAX}makePost(e,t){let n=aR(e);return new au(t,n)}toString(){return".value"}};function aO(e){return{type:"value",snapshotNode:e}}function aL(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function aD(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function aM(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class aF{constructor(e){this.index_=e}updateChild(e,t,n,i,r,s){H(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let o=e.getImmediateChild(t);return o.getChild(i).equals(n.getChild(i))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(aD(t,o)):H(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(aL(t,n)):s.trackChildChange(aM(t,n,o))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(t,n).withIndex(this.index_)}updateFullNode(e,t,n){return null==n||(e.isLeafNode()||e.forEachChild(ak,(e,i)=>{t.hasChild(e)||n.trackChildChange(aD(e,i))}),t.isLeafNode()||t.forEachChild(ak,(t,i)=>{if(e.hasChild(t)){let r=e.getImmediateChild(t);r.equals(i)||n.trackChildChange(aM(t,i,r))}else n.trackChildChange(aL(t,i))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?aE.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class az{constructor(e){this.indexedFilter_=new aF(e.getIndex()),this.index_=e.getIndex(),this.startPost_=az.getStartPost_(e),this.endPost_=az.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?0>=this.index_.compare(this.getStartPost(),e):0>this.index_.compare(this.getStartPost(),e),n=this.endIsInclusive_?0>=this.index_.compare(e,this.getEndPost()):0>this.index_.compare(e,this.getEndPost());return t&&n}updateChild(e,t,n,i,r,s){return this.matches(new au(t,n))||(n=aE.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,r,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=aE.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(aE.EMPTY_NODE);let r=this;return t.forEachChild(ak,(e,t)=>{r.matches(new au(e,t))||(i=i.updateImmediateChild(e,aE.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(!e.hasStart())return e.getIndex().minPost();{let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}}static getEndPost_(e){if(!e.hasEnd())return e.getIndex().maxPost();{let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}}}class aW{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{let t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{let t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new az(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,i,r,s){return(this.rangedFilter_.matches(new au(t,n))||(n=aE.EMPTY_NODE),e.getImmediateChild(t).equals(n))?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,r,s):this.fullLimitUpdateChild_(e,t,n,r,s)}updateFullNode(e,t,n){let i;if(t.isLeafNode()||t.isEmpty())i=aE.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;i=aE.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){let t=e.getNext();if(this.withinDirectionalStart(t)){if(this.withinDirectionalEnd(t))i=i.updateImmediateChild(t.name,t.node),n++;else break}}}else{let e;i=(i=t.withIndex(this.index_)).updatePriority(aE.EMPTY_NODE),e=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let n=0;for(;e.hasNext();){let t=e.getNext(),r=n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t);r?n++:i=i.updateImmediateChild(t.name,aE.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,i,r){let s;if(this.reverse_){let e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();H(e.numChildren()===this.limit_,"");let o=new au(t,n),a=this.reverse_?e.getFirstChild(this.index_):e.getLastChild(this.index_),l=this.rangedFilter_.matches(o);if(e.hasChild(t)){let c=e.getImmediateChild(t),u=i.getChildAfterChild(this.index_,a,this.reverse_);for(;null!=u&&(u.name===t||e.hasChild(u.name));)u=i.getChildAfterChild(this.index_,u,this.reverse_);let h=null==u?1:s(u,o),d=l&&!n.isEmpty()&&h>=0;if(d)return null!=r&&r.trackChildChange(aM(t,n,c)),e.updateImmediateChild(t,n);{null!=r&&r.trackChildChange(aD(t,c));let n=e.updateImmediateChild(t,aE.EMPTY_NODE),i=null!=u&&this.rangedFilter_.matches(u);return i?(null!=r&&r.trackChildChange(aL(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:l&&s(a,o)>=0?(null!=r&&(r.trackChildChange(aD(a.name,a.node)),r.trackChildChange(aL(t,n))),e.updateImmediateChild(t,n).updateImmediateChild(a.name,aE.EMPTY_NODE)):e}}class aU{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ak}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return H(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(H(this.startSet_,"Only valid if start has been set"),this.startNameSet_)?this.indexStartName_:o_}hasEnd(){return this.endSet_}getIndexEndValue(){return H(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(H(this.endSet_,"Only valid if end has been set"),this.endNameSet_)?this.indexEndName_:ov}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return H(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ak}copy(){let e=new aU;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function aB(e,t,n){let i=e.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=n?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function aq(e,t,n){let i=e.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==n?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function aj(e,t){let n=e.copy();return n.index_=t,n}function aH(e){let t;let n={};if(e.isDefault())return n;if(e.index_===ak?t="$priority":e.index_===aA?t="$value":e.index_===ap?t="$key":(H(e.index_ instanceof aP,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=e_(t),e.startSet_){let t=e.startAfterSet_?"startAfter":"startAt";n[t]=e_(e.indexStartValue_),e.startNameSet_&&(n[t]+=","+e_(e.indexStartName_))}if(e.endSet_){let t=e.endBeforeSet_?"endBefore":"endAt";n[t]=e_(e.indexEndValue_),e.endNameSet_&&(n[t]+=","+e_(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function aV(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ak&&(t.i=e.index_.toString()),t}class a$ extends oJ{constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=oh("p:rest:"),this.listens_={}}reportStats(e){throw Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(H(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,i){let r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);let s=a$.getListenId_(e,n),o={};this.listens_[s]=o;let a=aH(e._queryParams);this.restRequest_(r+".json",a,(e,t)=>{let a=t;404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(r,a,!1,n),ex(this.listens_,s)===o&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)})}unlisten(e,t){let n=a$.getListenId_(e,t);delete this.listens_[n]}get(e){let t=aH(e._queryParams),n=e._path.toString(),i=new es;return this.restRequest_(n+".json",t,(e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(Error(r))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,r])=>{i&&i.accessToken&&(t.auth=i.accessToken),r&&r.token&&(t.ac=r.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+eE(t);this.log_("Sending REST request for "+s);let o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=ey(o.responseText)}catch(e){of("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&of("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()})}}class aK{constructor(){this.rootNode_=aE.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function aX(){return{value:null,children:new Map}}function aG(e,t,n){if(ae(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{let i=o2(t);e.children.has(i)||e.children.set(i,aX());let r=e.children.get(i);aG(r,t=o3(t),n)}}function aY(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,i)=>{let r=new o1(t.toString()+"/"+e);aY(i,r,n)})}class aQ{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&oC(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class aJ{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new aQ(e),oP(this.reportStats_.bind(this),Math.floor(1e4+2e4*Math.random()))}reportStats_(){let e=this.statsListener_.get(),t={},n=!1;oC(e,(e,i)=>{i>0&&ek(this.statsToReport_,e)&&(t[e]=i,n=!0)}),n&&this.server_.reportStats(t),oP(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}function aZ(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function a0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function a1(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}(_=C||(C={}))[_.OVERWRITE=0]="OVERWRITE",_[_.MERGE=1]="MERGE",_[_.ACK_USER_WRITE=2]="ACK_USER_WRITE",_[_.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";class a6{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=C.ACK_USER_WRITE,this.source=aZ()}operationForChild(e){if(!ae(this.path))return H(o2(this.path)===e,"operationForChild called for unrelated child."),new a6(o3(this.path),this.affectedTree,this.revert);if(null!=this.affectedTree.value)return H(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new o1(e));return new a6(o6(),t,this.revert)}}}class a2{constructor(e,t){this.source=e,this.path=t,this.type=C.LISTEN_COMPLETE}operationForChild(e){return ae(this.path)?new a2(this.source,o6()):new a2(this.source,o3(this.path))}}class a5{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=C.OVERWRITE}operationForChild(e){return ae(this.path)?new a5(this.source,o6(),this.snap.getImmediateChild(e)):new a5(this.source,o3(this.path),this.snap)}}class a3{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=C.MERGE}operationForChild(e){if(!ae(this.path))return H(o2(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new a3(this.source,o3(this.path),this.children);{let t=this.children.subtree(new o1(e));return t.isEmpty()?null:t.value?new a5(this.source,o6(),t.value):new a3(this.source,o6(),t)}}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class a4{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ae(e))return this.isFullyInitialized()&&!this.filtered_;let t=o2(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class a9{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function a8(e,t,n,i,r,s){let o=i.filter(e=>e.type===n);o.sort((t,n)=>(function(e,t,n){if(null==t.childName||null==n.childName)throw V("Should only compare child_ events.");let i=new au(t.childName,t.snapshotNode),r=new au(n.childName,n.snapshotNode);return e.index_.compare(i,r)})(e,t,n)),o.forEach(n=>{let i=("value"===n.type||"child_removed"===n.type||(n.prevName=s.getPredecessorChildName(n.childName,n.snapshotNode,e.index_)),n);r.forEach(r=>{r.respondsTo(n.type)&&t.push(r.createEvent(i,e.query_))})})}function a7(e,t){return{eventCache:e,serverCache:t}}function le(e,t,n,i){return a7(new a4(t,n,i),e.serverCache)}function lt(e,t,n,i){return a7(e.eventCache,new a4(t,n,i))}function ln(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function li(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let lr=()=>(c||(c=new ag(ow)),c);class ls{constructor(e,t=lr()){this.value=e,this.children=t}static fromObject(e){let t=new ls(null);return oC(e,(e,n)=>{t=t.set(new o1(e),n)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:o6(),value:this.value};if(ae(e))return null;{let n=o2(e),i=this.children.get(n);if(null===i)return null;{let r=i.findRootMostMatchingPathAndValue(o3(e),t);if(null==r)return null;{let e=o7(new o1(n),r.path);return{path:e,value:r.value}}}}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ae(e))return this;{let t=o2(e),n=this.children.get(t);return null!==n?n.subtree(o3(e)):new ls(null)}}set(e,t){if(ae(e))return new ls(t,this.children);{let n=o2(e),i=this.children.get(n)||new ls(null),r=i.set(o3(e),t),s=this.children.insert(n,r);return new ls(this.value,s)}}remove(e){if(ae(e))return this.children.isEmpty()?new ls(null):new ls(null,this.children);{let t=o2(e),n=this.children.get(t);if(!n)return this;{let i;let r=n.remove(o3(e));return(i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty())?new ls(null):new ls(this.value,i)}}}get(e){if(ae(e))return this.value;{let t=o2(e),n=this.children.get(t);return n?n.get(o3(e)):null}}setTree(e,t){if(ae(e))return t;{let n;let i=o2(e),r=this.children.get(i)||new ls(null),s=r.setTree(o3(e),t);return n=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new ls(this.value,n)}}fold(e){return this.fold_(o6(),e)}fold_(e,t){let n={};return this.children.inorderTraversal((i,r)=>{n[i]=r.fold_(o7(e,i),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,o6(),t)}findOnPath_(e,t,n){let i=!!this.value&&n(t,this.value);if(i)return i;if(ae(e))return null;{let i=o2(e),r=this.children.get(i);return r?r.findOnPath_(o3(e),o7(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,o6(),t)}foreachOnPath_(e,t,n){if(ae(e))return this;{this.value&&n(t,this.value);let i=o2(e),r=this.children.get(i);return r?r.foreachOnPath_(o3(e),o7(t,i),n):new ls(null)}}foreach(e){this.foreach_(o6(),e)}foreach_(e,t){this.children.inorderTraversal((n,i)=>{i.foreach_(o7(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class lo{constructor(e){this.writeTree_=e}static empty(){return new lo(new ls(null))}}function la(e,t,n){if(ae(t))return new lo(new ls(n));{let i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){let r=i.path,s=i.value,o=at(r,t);return s=s.updateChild(o,n),new lo(e.writeTree_.set(r,s))}{let i=new ls(n),r=e.writeTree_.setTree(t,i);return new lo(r)}}}function ll(e,t,n){let i=e;return oC(n,(e,n)=>{i=la(i,o7(t,e),n)}),i}function lc(e,t){if(ae(t))return lo.empty();{let n=e.writeTree_.setTree(t,new ls(null));return new lo(n)}}function lu(e,t){return null!=lh(e,t)}function lh(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(at(n.path,t)):null}function ld(e){let t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ak,(e,n)=>{t.push(new au(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new au(e,n.value))}),t}function lp(e,t){if(ae(t))return e;{let n=lh(e,t);return new lo(null!=n?new ls(n):e.writeTree_.subtree(t))}}function lf(e){return e.writeTree_.isEmpty()}function lm(e,t){return function e(t,n,i){if(null!=n.value)return i.updateChild(t,n.value);{let r=null;return n.children.inorderTraversal((n,s)=>{".priority"===n?(H(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):i=e(o7(t,n),s,i)}),i.getChild(t).isEmpty()||null===r||(i=i.updateChild(o7(t,".priority"),r)),i}}(o6(),e.writeTree_,t)}function lg(e){return e.visible}function ly(e,t,n){let i=lo.empty();for(let r=0;r<e.length;++r){let s=e[r];if(t(s)){let e;let t=s.path;if(s.snap)ar(n,t)?i=la(i,e=at(n,t),s.snap):ar(t,n)&&(e=at(t,n),i=la(i,o6(),s.snap.getChild(e)));else if(s.children){if(ar(n,t))i=ll(i,e=at(n,t),s.children);else if(ar(t,n)){if(ae(e=at(t,n)))i=ll(i,o6(),s.children);else{let t=ex(s.children,o2(e));if(t){let n=t.getChild(o3(e));i=la(i,o6(),n)}}}}else throw V("WriteRecord should have .snap or .children")}}return i}function l_(e,t,n,i,r){if(i||r){let s=lp(e.visibleWrites,t);if(!r&&lf(s))return n;if(!r&&null==n&&!lu(s,o6()))return null;{let s=ly(e.allWrites,function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(ar(e.path,t)||ar(t,e.path))},t),o=n||aE.EMPTY_NODE;return lm(s,o)}}{let i=lh(e.visibleWrites,t);if(null!=i)return i;{let i=lp(e.visibleWrites,t);if(lf(i))return n;{if(null==n&&!lu(i,o6()))return null;let e=n||aE.EMPTY_NODE;return lm(i,e)}}}}function lv(e,t,n,i){return l_(e.writeTree,e.treePath,t,n,i)}function lb(e,t){return function(e,t,n){let i=aE.EMPTY_NODE,r=lh(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(ak,(e,t)=>{i=i.updateImmediateChild(e,t)}),i;if(n){let r=lp(e.visibleWrites,t);return n.forEachChild(ak,(e,t)=>{let n=lm(lp(r,new o1(e)),t);i=i.updateImmediateChild(e,n)}),ld(r).forEach(e=>{i=i.updateImmediateChild(e.name,e.node)}),i}{let n=lp(e.visibleWrites,t);return ld(n).forEach(e=>{i=i.updateImmediateChild(e.name,e.node)}),i}}(e.writeTree,e.treePath,t)}function lw(e,t,n,i){return function(e,t,n,i,r){H(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=o7(t,n);if(lu(e.visibleWrites,s))return null;{let t=lp(e.visibleWrites,s);return lf(t)?r.getChild(n):lm(t,r.getChild(n))}}(e.writeTree,e.treePath,t,n,i)}function lk(e,t){var n,i;return n=e.writeTree,i=o7(e.treePath,t),lh(n.visibleWrites,i)}function lx(e,t,n){return function(e,t,n,i){let r=o7(t,n),s=lh(e.visibleWrites,r);if(null!=s)return s;if(!i.isCompleteForChild(n))return null;{let t=lp(e.visibleWrites,r);return lm(t,i.getNode().getImmediateChild(n))}}(e.writeTree,e.treePath,t,n)}function lI(e,t){return lC(o7(e.treePath,t),e.writeTree)}function lC(e,t){return{treePath:e,writeTree:t}}class lT{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,n=e.childName;H("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),H(".priority"!==n,"Only non-priority child changes can be tracked.");let i=this.changeMap.get(n);if(i){let r=i.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(n,aM(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(n,aD(n,i.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(n,aL(n,e.snapshotNode));else if("child_changed"===t&&"child_changed"===r)this.changeMap.set(n,aM(n,e.snapshotNode,i.oldSnap));else throw V("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}let lN=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class lE{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let t=null!=this.optCompleteServerCache_?new a4(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return lx(this.writes_,e,t)}}getChildAfterChild(e,t,n){var i;let r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:li(this.viewCache_),s=function(e,t,n,i,r,s,o){let a;let l=lp(e.visibleWrites,t),c=lh(l,o6());if(null!=c)a=c;else{if(null==n)return[];a=lm(l,n)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];{let e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),r=n.getNext();for(;r&&e.length<1;)0!==t(r,i)&&e.push(r),r=n.getNext();return e}}((i=this.writes_).writeTree,i.treePath,r,t,0,n,e);return 0===s.length?null:s[0]}}function lS(e,t,n,i,r,s){let o=t.eventCache;if(null!=lk(i,n))return t;{let a,l;if(ae(n)){if(H(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let n=li(t),r=n instanceof aE?n:aE.EMPTY_NODE,o=lb(i,r);a=e.filter.updateFullNode(t.eventCache.getNode(),o,s)}else{let n=lv(i,li(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}}else{let c=o2(n);if(".priority"===c){H(1===o5(n),"Can't have a priority with additional path components");let r=o.getNode();l=t.serverCache.getNode();let s=lw(i,n,r,l);a=null!=s?e.filter.updatePriority(r,s):o.getNode()}else{let u;let h=o3(n);if(o.isCompleteForChild(c)){l=t.serverCache.getNode();let e=lw(i,n,o.getNode(),l);u=null!=e?o.getNode().getImmediateChild(c).updateChild(h,e):o.getNode().getImmediateChild(c)}else u=lx(i,c,t.serverCache);a=null!=u?e.filter.updateChild(o.getNode(),c,u,h,r,s):o.getNode()}}return le(t,a,o.isFullyInitialized()||ae(n),e.filter.filtersNodes())}}function lR(e,t,n,i,r,s,o,a){let l;let c=t.serverCache,u=o?e.filter:e.filter.getIndexedFilter();if(ae(n))l=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){let e=c.getNode().updateChild(n,i);l=u.updateFullNode(c.getNode(),e,null)}else{let e=o2(n);if(!c.isCompleteForPath(n)&&o5(n)>1)return t;let r=o3(n),s=c.getNode().getImmediateChild(e),o=s.updateChild(r,i);l=".priority"===e?u.updatePriority(c.getNode(),o):u.updateChild(c.getNode(),e,o,r,lN,null)}let h=lt(t,l,c.isFullyInitialized()||ae(n),u.filtersNodes()),d=new lE(r,h,s);return lS(e,h,n,r,d,a)}function lP(e,t,n,i,r,s,o){let a,l;let c=t.eventCache,u=new lE(r,t,s);if(ae(n))l=e.filter.updateFullNode(t.eventCache.getNode(),i,o),a=le(t,l,!0,e.filter.filtersNodes());else{let r=o2(n);if(".priority"===r)l=e.filter.updatePriority(t.eventCache.getNode(),i),a=le(t,l,c.isFullyInitialized(),c.isFiltered());else{let s;let l=o3(n),h=c.getNode().getImmediateChild(r);if(ae(l))s=i;else{let e=u.getCompleteChild(r);s=null!=e?".priority"===o4(l)&&e.getChild(o8(l)).isEmpty()?e:e.updateChild(l,i):aE.EMPTY_NODE}if(h.equals(s))a=t;else{let n=e.filter.updateChild(c.getNode(),r,s,l,u,o);a=le(t,n,c.isFullyInitialized(),e.filter.filtersNodes())}}}return a}function lA(e,t){return e.eventCache.isCompleteForChild(t)}function lO(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function lL(e,t,n,i,r,s,o,a){let l;if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t;l=ae(n)?i:new ls(null).setTree(n,i);let u=t.serverCache.getNode();return l.children.inorderTraversal((n,i)=>{if(u.hasChild(n)){let l=t.serverCache.getNode().getImmediateChild(n),u=lO(e,l,i);c=lR(e,c,new o1(n),u,r,s,o,a)}}),l.children.inorderTraversal((n,i)=>{let l=!t.serverCache.isCompleteForChild(n)&&null===i.value;if(!u.hasChild(n)&&!l){let l=t.serverCache.getNode().getImmediateChild(n),u=lO(e,l,i);c=lR(e,c,new o1(n),u,r,s,o,a)}}),c}class lD{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let n=this.query_._queryParams,i=new aF(n.getIndex()),r=n.loadsAllData()?new aF(n.getIndex()):n.hasLimit()?new aW(n):new az(n);this.processor_={filter:r};let s=t.serverCache,o=t.eventCache,a=i.updateFullNode(aE.EMPTY_NODE,s.getNode(),null),l=r.updateFullNode(aE.EMPTY_NODE,o.getNode(),null),c=new a4(a,s.isFullyInitialized(),i.filtersNodes()),u=new a4(l,o.isFullyInitialized(),r.filtersNodes());this.viewCache_=a7(u,c),this.eventGenerator_=new a9(this.query_)}get query(){return this.query_}}function lM(e){return 0===e.eventRegistrations_.length}function lF(e,t,n){let i=[];if(n){H(null==t,"A cancel should cancel all event registrations.");let r=e.query._path;e.eventRegistrations_.forEach(e=>{let t=e.createCancelEvent(n,r);t&&i.push(t)})}if(t){let n=[];for(let i=0;i<e.eventRegistrations_.length;++i){let r=e.eventRegistrations_[i];if(r.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(i+1));break}}else n.push(r)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return i}function lz(e,t,n,i){var r,s;t.type===C.MERGE&&null!==t.source.queryId&&(H(li(e.viewCache_),"We should always have a full cache before handling merges"),H(ln(e.viewCache_),"Missing event cache, even though we have a server cache"));let o=e.viewCache_,a=function(e,t,n,i,r){let s,o;let a=new lT;if(n.type===C.OVERWRITE)n.source.fromUser?s=lP(e,t,n.path,n.snap,i,r,a):(H(n.source.fromServer,"Unknown source."),o=n.source.tagged||t.serverCache.isFiltered()&&!ae(n.path),s=lR(e,t,n.path,n.snap,i,r,o,a));else if(n.type===C.MERGE){var l,c;let u;n.source.fromUser?(l=n.path,c=n.children,u=t,c.foreach((n,s)=>{let o=o7(l,n);lA(t,o2(o))&&(u=lP(e,u,o,s,i,r,a))}),c.foreach((n,s)=>{let o=o7(l,n);lA(t,o2(o))||(u=lP(e,u,o,s,i,r,a))}),s=u):(H(n.source.fromServer,"Unknown source."),o=n.source.tagged||t.serverCache.isFiltered(),s=lL(e,t,n.path,n.children,i,r,o,a))}else if(n.type===C.ACK_USER_WRITE)s=n.revert?function(e,t,n,i,r,s){let o;if(null!=lk(i,n))return t;{let a;let l=new lE(i,t,r),c=t.eventCache.getNode();if(ae(n)||".priority"===o2(n)){let n;if(t.serverCache.isFullyInitialized())n=lv(i,li(t));else{let e=t.serverCache.getNode();H(e instanceof aE,"serverChildren would be complete if leaf node"),n=lb(i,e)}a=e.filter.updateFullNode(c,n,s)}else{let r=o2(n),u=lx(i,r,t.serverCache);null==u&&t.serverCache.isCompleteForChild(r)&&(u=c.getImmediateChild(r)),(a=null!=u?e.filter.updateChild(c,r,u,o3(n),l,s):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(c,r,aE.EMPTY_NODE,o3(n),l,s):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=lv(i,li(t))).isLeafNode()&&(a=e.filter.updateFullNode(a,o,s))}return o=t.serverCache.isFullyInitialized()||null!=lk(i,o6()),le(t,a,o,e.filter.filtersNodes())}}(e,t,n.path,i,r,a):function(e,t,n,i,r,s,o){if(null!=lk(r,n))return t;let a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(ae(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return lR(e,t,n,l.getNode().getChild(n),r,s,a,o);if(!ae(n))return t;{let i=new ls(null);return l.getNode().forEachChild(ap,(e,t)=>{i=i.set(new o1(e),t)}),lL(e,t,n,i,r,s,a,o)}}{let c=new ls(null);return i.foreach((e,t)=>{let i=o7(n,e);l.isCompleteForPath(i)&&(c=c.set(e,l.getNode().getChild(i)))}),lL(e,t,n,c,r,s,a,o)}}(e,t,n.path,n.affectedTree,i,r,a);else if(n.type===C.LISTEN_COMPLETE)s=function(e,t,n,i,r){let s=t.serverCache,o=lt(t,s.getNode(),s.isFullyInitialized()||ae(n),s.isFiltered());return lS(e,o,n,i,lN,r)}(e,t,n.path,i,a);else throw V("Unknown operation type: "+n.type);let u=a.getChanges();return function(e,t,n){let i=t.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=ln(e);!(n.length>0)&&e.eventCache.isFullyInitialized()&&(!r||i.getNode().equals(s))&&i.getNode().getPriority().equals(s.getPriority())||n.push(aO(ln(t)))}}(t,s,u),{viewCache:s,changes:u}}(e.processor_,o,t,n,i);return r=e.processor_,H((s=a.viewCache).eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),H(s.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed"),H(a.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=a.viewCache,lW(e,a.changes,a.viewCache.eventCache.getNode(),null)}function lW(e,t,n,i){let r=i?[i]:e.eventRegistrations_;return function(e,t,n,i){let r=[],s=[];return t.forEach(t=>{if("child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)){var n;s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))}}),a8(e,r,"child_removed",t,i,n),a8(e,r,"child_added",t,i,n),a8(e,r,"child_moved",s,i,n),a8(e,r,"child_changed",t,i,n),a8(e,r,"value",t,i,n),r}(e.eventGenerator_,t,n,r)}class lU{constructor(){this.views=new Map}}function lB(e,t,n,i){let r=t.source.queryId;if(null!==r){let s=e.views.get(r);return H(null!=s,"SyncTree gave us an op for an invalid query."),lz(s,t,n,i)}{let r=[];for(let s of e.views.values())r=r.concat(lz(s,t,n,i));return r}}function lq(e,t,n,i,r){let s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=lv(n,r?i:null),s=!1;e?s=!0:(e=i instanceof aE?lb(n,i):aE.EMPTY_NODE,s=!1);let o=a7(new a4(e,s,!1),new a4(i,r,!1));return new lD(t,o)}return o}function lj(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function lH(e,t){let n=null;for(let i of e.views.values())n=n||function(e,t){let n=li(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ae(t)&&!n.getImmediateChild(o2(t)).isEmpty())?n.getChild(t):null}(i,t);return n}function lV(e,t){let n=t._queryParams;if(n.loadsAllData())return lK(e);{let n=t._queryIdentifier;return e.views.get(n)}}function l$(e){return null!=lK(e)}function lK(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let lX=1;class lG{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ls(null),this.pendingWriteTree_={visibleWrites:lo.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function lY(e,t,n,i,r){var s,o;return(s=e.pendingWriteTree_,o=r,H(i>s.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),s.allWrites.push({path:t,snap:n,writeId:i,visible:o}),o&&(s.visibleWrites=la(s.visibleWrites,t,n)),s.lastWriteId=i,r)?l2(e,new a5(aZ(),t,n)):[]}function lQ(e,t,n=!1){let i=function(e,t){for(let n=0;n<e.allWrites.length;n++){let i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t),r=function(e,t){let n=e.allWrites.findIndex(e=>e.writeId===t);H(n>=0,"removeWrite called with nonexistent writeId.");let i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,s=!1,o=e.allWrites.length-1;for(;r&&o>=0;){let t=e.allWrites[o];t.visible&&(o>=n&&function(e,t){if(e.snap)return ar(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&ar(o7(e.path,n),t))return!0;return!1}(t,i.path)?r=!1:ar(i.path,t.path)&&(s=!0)),o--}if(!r)return!1;if(s)return e.visibleWrites=ly(e.allWrites,lg,o6()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1,!0;if(i.snap)e.visibleWrites=lc(e.visibleWrites,i.path);else{let t=i.children;oC(t,t=>{e.visibleWrites=lc(e.visibleWrites,o7(i.path,t))})}return!0}(e.pendingWriteTree_,t);if(!r)return[];{let t=new ls(null);return null!=i.snap?t=t.set(o6(),!0):oC(i.children,e=>{t=t.set(new o1(e),!0)}),l2(e,new a6(i.path,t,n))}}function lJ(e,t,n){return l2(e,new a5(a0(),t,n))}function lZ(e,t,n,i,r=!1){let s=t._path,o=e.syncPointTree_.get(s),a=[];if(o&&("default"===t._queryIdentifier||null!=lV(o,t))){let l=function(e,t,n,i){let r=t._queryIdentifier,s=[],o=[],a=l$(e);if("default"===r)for(let[t,r]of e.views.entries())o=o.concat(lF(r,n,i)),lM(r)&&(e.views.delete(t),r.query._queryParams.loadsAllData()||s.push(r.query));else{let t=e.views.get(r);t&&(o=o.concat(lF(t,n,i)),lM(t)&&(e.views.delete(r),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!l$(e)&&s.push(new(H(u,"Reference.ts has not been loaded"),u)(t._repo,t._path)),{removed:s,events:o}}(o,t,n,i);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));let c=l.removed;if(a=l.events,!r){let n=-1!==c.findIndex(e=>e._queryParams.loadsAllData()),r=e.syncPointTree_.findOnPath(s,(e,t)=>l$(t));if(n&&!r){let t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){let n=t.fold((e,t,n)=>{if(t&&l$(t)){let e=lK(t);return[e]}{let e=[];return t&&(e=lj(t)),oC(n,(t,n)=>{e=e.concat(n)}),e}});for(let t=0;t<n.length;++t){let i=n[t],r=i.query,s=l5(e,i);e.listenProvider_.startListening(ce(r),l3(e,r),s.hashFn,s.onComplete)}}}r||!(c.length>0)||i||(n?e.listenProvider_.stopListening(ce(t),null):c.forEach(t=>{let n=e.queryToTagMap.get(l4(t));e.listenProvider_.stopListening(ce(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){let i=t[n];if(!i._queryParams.loadsAllData()){let t=l4(i),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function l0(e,t,n,i){let r=l9(e,i);if(null==r)return[];{let i=l8(r),s=i.path,o=i.queryId,a=at(s,t),l=new a5(a1(o),a,n);return l7(e,s,l)}}function l1(e,t,n,i=!1){var r;let s;let o=t._path,a=null,l=!1;e.syncPointTree_.foreachOnPath(o,(e,t)=>{let n=at(e,o);a=a||lH(t,n),l=l||l$(t)});let c=e.syncPointTree_.get(o);if(c?(l=l||l$(c),a=a||lH(c,o6())):(c=new lU,e.syncPointTree_=e.syncPointTree_.set(o,c)),null!=a)s=!0;else{s=!1,a=aE.EMPTY_NODE;let t=e.syncPointTree_.subtree(o);t.foreachChild((e,t)=>{let n=lH(t,o6());n&&(a=a.updateImmediateChild(e,n))})}let u=null!=lV(c,t);if(!u&&!t._queryParams.loadsAllData()){let n=l4(t);H(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");let i=lX++;e.queryToTagMap.set(n,i),e.tagToQueryMap.set(i,n)}let h=(r=e.pendingWriteTree_,lC(o,r)),d=function(e,t,n,i,r,s){let o=lq(e,t,i,r,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),!function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){let n=e.viewCache_.eventCache,i=[];if(!n.getNode().isLeafNode()){let e=n.getNode();e.forEachChild(ak,(e,t)=>{i.push(aL(e,t))})}return n.isFullyInitialized()&&i.push(aO(n.getNode())),lW(e,i,n.getNode(),t)}(o,n)}(c,t,n,h,a,s);if(!u&&!l&&!i){let n=lV(c,t);d=d.concat(function(e,t,n){let i=t._path,r=l3(e,t),s=l5(e,n),o=e.listenProvider_.startListening(ce(t),r,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(i);if(r)H(!l$(a.value),"If we're adding a query, it shouldn't be shadowed");else{let t=a.fold((e,t,n)=>{if(!ae(e)&&t&&l$(t))return[lK(t).query];{let e=[];return t&&(e=e.concat(lj(t).map(e=>e.query))),oC(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){let i=t[n];e.listenProvider_.stopListening(ce(i),l3(e,i))}}return o}(e,t,n))}return d}function l6(e,t,n){let i=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(e,n)=>{let i=at(e,t),r=lH(n,i);if(r)return r});return l_(i,t,r,n,!0)}function l2(e,t){var n;return function e(t,n,i,r){if(ae(t.path))return function e(t,n,i,r){let s=n.get(o6());null==i&&null!=s&&(i=lH(s,o6()));let o=[];return n.children.inorderTraversal((n,s)=>{let a=i?i.getImmediateChild(n):null,l=lI(r,n),c=t.operationForChild(n);c&&(o=o.concat(e(c,s,a,l)))}),s&&(o=o.concat(lB(s,t,r,i))),o}(t,n,i,r);{let s=n.get(o6());null==i&&null!=s&&(i=lH(s,o6()));let o=[],a=o2(t.path),l=t.operationForChild(a),c=n.children.get(a);if(c&&l){let t=i?i.getImmediateChild(a):null,n=lI(r,a);o=o.concat(e(l,c,t,n))}return s&&(o=o.concat(lB(s,t,r,i))),o}}(t,e.syncPointTree_,null,(n=e.pendingWriteTree_,lC(o6(),n)))}function l5(e,t){let n=t.query,i=l3(e,n);return{hashFn:()=>{let e=t.viewCache_.serverCache.getNode()||aE.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t){var r;return i?function(e,t,n){let i=l9(e,n);if(!i)return[];{let n=l8(i),r=n.path,s=n.queryId,o=at(r,t),a=new a2(a1(s),o);return l7(e,r,a)}}(e,n._path,i):(r=n._path,l2(e,new a2(a0(),r)))}{let i=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");let i=Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}(t,n);return lZ(e,n,null,i)}}}}function l3(e,t){let n=l4(t);return e.queryToTagMap.get(n)}function l4(e){return e._path.toString()+"$"+e._queryIdentifier}function l9(e,t){return e.tagToQueryMap.get(t)}function l8(e){let t=e.indexOf("$");return H(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new o1(e.substr(0,t))}}function l7(e,t,n){let i=e.syncPointTree_.get(t);H(i,"Missing sync point for query tag that we're tracking");let r=lC(t,e.pendingWriteTree_);return lB(i,n,r,null)}function ce(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(H(h,"Reference.ts has not been loaded"),h)(e._repo,e._path):e}class ct{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new ct(t)}node(){return this.node_}}class cn{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=o7(this.path_,e);return new cn(this.syncTree_,t)}node(){return l6(this.syncTree_,this.path_)}}let ci=function(e,t,n){return e&&"object"==typeof e?(H(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"])?cr(e[".sv"],t,n):"object"==typeof e[".sv"]?cs(e[".sv"],t):void H(!1,"Unexpected server value: "+JSON.stringify(e,null,2)):e},cr=function(e,t,n){if("timestamp"===e)return n.timestamp;H(!1,"Unexpected server value: "+e)},cs=function(e,t,n){e.hasOwnProperty("increment")||H(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let i=e.increment;"number"!=typeof i&&H(!1,"Unexpected increment value: "+i);let r=t.node();if(H(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let s=r.getValue();return"number"!=typeof s?i:s+i},co=function(e,t,n,i){return cl(t,new cn(n,e),i)},ca=function(e,t,n){return cl(e,new ct(t),n)};function cl(e,t,n){let i;let r=e.getPriority().val(),s=ci(r,t.getImmediateChild(".priority"),n);if(!e.isLeafNode())return i=e,s!==e.getPriority().val()&&(i=i.updatePriority(new aw(s))),e.forEachChild(ak,(e,r)=>{let s=cl(r,t.getImmediateChild(e),n);s!==r&&(i=i.updateImmediateChild(e,s))}),i;{let i=ci(e.getValue(),t,n);return i!==e.getValue()||s!==e.getPriority().val()?new aw(i,aR(s)):e}}class cc{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function cu(e,t){let n=t instanceof o1?t:new o1(t),i=e,r=o2(n);for(;null!==r;){let e=ex(i.node.children,r)||{children:{},childCount:0};i=new cc(r,i,e),r=o2(n=o3(n))}return i}function ch(e){return e.node.value}function cd(e,t){e.node.value=t,function e(t){null!==t.parent&&function(t,n,i){let r=void 0===ch(i)&&!cp(i),s=ek(t.node.children,n);r&&s?(delete t.node.children[n],t.node.childCount--,e(t)):r||s||(t.node.children[n]=i.node,t.node.childCount++,e(t))}(t.parent,t.name,t)}(e)}function cp(e){return e.node.childCount>0}function cf(e,t){oC(e.node.children,(n,i)=>{t(new cc(n,e,i))})}function cm(e){return new o1(null===e.parent?e.name:cm(e.parent)+"/"+e.name)}let cg=/[\[\].#$\/\u0000-\u001F\u007F]/,cy=/[\[\].#$\u0000-\u001F\u007F]/,c_=function(e){return"string"==typeof e&&0!==e.length&&!cg.test(e)},cv=function(e){return"string"==typeof e&&0!==e.length&&!cy.test(e)},cb=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!og(e)||e&&"object"==typeof e&&ek(e,".sv")},cw=function(e,t,n,i){i&&void 0===t||ck(eM(e,"value"),t,n)},ck=function(e,t,n){let i=n instanceof o1?new as(n,e):n;if(void 0===t)throw Error(e+"contains undefined "+aa(i));if("function"==typeof t)throw Error(e+"contains a function "+aa(i)+" with contents = "+t.toString());if(og(t))throw Error(e+"contains "+t.toString()+" "+aa(i));if("string"==typeof t&&t.length>10485760/3&&eU(t)>10485760)throw Error(e+"contains a string greater than 10485760 utf8 bytes "+aa(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,r=!1;if(oC(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!c_(t)))throw Error(e+" contains an invalid key ("+t+") "+aa(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=eU(t),ao(i),ck(e,s,i),function(e){let t=e.parts_.pop();e.byteLength_-=eU(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)}),n&&r)throw Error(e+' contains ".value" child '+aa(i)+" in addition to actual children.")}},cx=function(e,t){let n,i;for(n=0;n<t.length;n++){i=t[n];let r=o9(i);for(let t=0;t<r.length;t++)if(".priority"===r[t]&&t===r.length-1);else if(!c_(r[t]))throw Error(e+"contains an invalid key ("+r[t]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(an);let r=null;for(n=0;n<t.length;n++){if(i=t[n],null!==r&&ar(r,i))throw Error(e+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},cI=function(e,t,n,i){if(i&&void 0===t)return;let r=eM(e,"values");if(!(t&&"object"==typeof t)||Array.isArray(t))throw Error(r+" must be an object containing the children to replace.");let s=[];oC(t,(e,t)=>{let i=new o1(e);if(ck(r,t,o7(n,i)),".priority"===o4(i)&&!cb(t))throw Error(r+"contains an invalid value for '"+i.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(i)}),cx(r,s)},cC=function(e,t,n){if(!n||void 0!==t){if(og(t))throw Error(eM(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!cb(t))throw Error(eM(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},cT=function(e,t,n,i){if((!i||void 0!==n)&&!c_(n))throw Error(eM(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},cN=function(e,t,n,i){if((!i||void 0!==n)&&!cv(n))throw Error(eM(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},cE=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),cN(e,t,n,i)},cS=function(e,t){if(".info"===o2(t))throw Error(e+" failed = Can't modify data under /.info/")},cR=function(e,t){var n;let i=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!c_(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==i.length&&((n=i)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),!cv(n)))throw Error(eM(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class cP{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function cA(e,t){let n=null;for(let i=0;i<t.length;i++){let r=t[i],s=r.getPath();null===n||ai(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function cO(e,t,n){cA(e,n),cD(e,e=>ai(e,t))}function cL(e,t,n){cA(e,n),cD(e,e=>ar(e,t)||ar(t,e))}function cD(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){let r=e.eventLists_[i];if(r){let s=r.path;t(s)?(function(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(null!==n){e.events[t]=null;let i=n.getEventRunner();oa&&ou("event: "+n.toString()),oS(i)}}}(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}let cM="repo_interrupt";class cF{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new cP,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=aX(),this.transactionQueueTree_=new cc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function cz(e){let t=e.infoData_.getNode(new o1(".info/serverTimeOffset")),n=t.val()||0;return new Date().getTime()+n}function cW(e){var t;return(t=t={timestamp:cz(e)}).timestamp=t.timestamp||new Date().getTime(),t}function cU(e,t,n,i,r){e.dataUpdateCount++;let s=new o1(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(r){if(i){let t=eC(n,e=>aR(e));o=function(e,t,n,i){let r=l9(e,i);if(!r)return[];{let i=l8(r),s=i.path,o=i.queryId,a=at(s,t),l=ls.fromObject(n),c=new a3(a1(o),a,l);return l7(e,s,c)}}(e.serverSyncTree_,s,t,r)}else{let t=aR(n);o=l0(e.serverSyncTree_,s,t,r)}}else if(i){let t=eC(n,e=>aR(e));o=function(e,t,n){let i=ls.fromObject(n);return l2(e,new a3(a0(),t,i))}(e.serverSyncTree_,s,t)}else{let t=aR(n);o=lJ(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=cJ(e,s)),cL(e.eventQueue_,a,o)}function cB(e,t){cq(e,"connected",t),!1===t&&function(e){cX(e,"onDisconnectEvents");let t=cW(e),n=aX();aY(e.onDisconnect_,o6(),(i,r)=>{let s=co(i,r,e.serverSyncTree_,t);aG(n,i,s)});let i=[];aY(n,o6(),(t,n)=>{i=i.concat(lJ(e.serverSyncTree_,t,n));let r=c6(e,t);cJ(e,r)}),e.onDisconnect_=aX(),cL(e.eventQueue_,o6(),i)}(e)}function cq(e,t,n){let i=new o1("/.info/"+t),r=aR(n);e.infoData_.updateSnapshot(i,r);let s=lJ(e.infoSyncTree_,i,r);cL(e.eventQueue_,i,s)}function cj(e){return e.nextWriteId_++}function cH(e,t,n,i,r){cX(e,"set",{path:t.toString(),value:n,priority:i});let s=cW(e),o=aR(n,i),a=l6(e.serverSyncTree_,t),l=ca(o,a,s),c=cj(e),u=lY(e.serverSyncTree_,t,l,c,!0);cA(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(n,i)=>{let s="ok"===n;s||of("set at "+t+" failed: "+n);let o=lQ(e.serverSyncTree_,c,!s);cL(e.eventQueue_,t,o),cG(e,r,n,i)});let h=c6(e,t);cJ(e,h),cL(e.eventQueue_,h,[])}function cV(e,t,n,i){let r=aR(n);e.server_.onDisconnectPut(t.toString(),r.val(!0),(n,s)=>{"ok"===n&&aG(e.onDisconnect_,t,r),cG(e,i,n,s)})}function c$(e,t,n){let i;i=".info"===o2(t._path)?lZ(e.infoSyncTree_,t,n):lZ(e.serverSyncTree_,t,n),cO(e.eventQueue_,t._path,i)}function cK(e){e.persistentConnection_&&e.persistentConnection_.interrupt(cM)}function cX(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),ou(n,...t)}function cG(e,t,n,i){t&&oS(()=>{if("ok"===n)t(null);else{let e=(n||"error").toUpperCase(),r=e;i&&(r+=": "+i);let s=Error(r);s.code=e,t(s)}})}function cY(e,t,n){return l6(e.serverSyncTree_,t,n)||aE.EMPTY_NODE}function cQ(e,t=e.transactionQueueTree_){if(t||c1(e,t),ch(t)){let n=c0(e,t);H(n.length>0,"Sending zero length transaction queue");let i=n.every(e=>0===e.status);i&&function(e,t,n){let i=n.map(e=>e.currentWriteId),r=cY(e,t,i),s=r,o=r.hash();for(let e=0;e<n.length;e++){let i=n[e];H(0===i.status,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=1,i.retryCount++;let r=at(t,i.path);s=s.updateChild(r,i.currentOutputSnapshotRaw)}let a=s.val(!0);e.server_.put(t.toString(),a,i=>{cX(e,"transaction put response",{path:t.toString(),status:i});let r=[];if("ok"===i){let i=[];for(let t=0;t<n.length;t++)n[t].status=2,r=r.concat(lQ(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();c1(e,cu(e.transactionQueueTree_,t)),cQ(e,e.transactionQueueTree_),cL(e.eventQueue_,t,r);for(let e=0;e<i.length;e++)oS(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{of("transaction at "+t.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}cJ(e,t)}},o)}(e,cm(t),n)}else cp(t)&&cf(t,t=>{cQ(e,t)})}function cJ(e,t){let n=cZ(e,t),i=cm(n),r=c0(e,n);return function(e,t,n){if(0===t.length)return;let i=[],r=[],s=t.filter(e=>0===e.status),o=s.map(e=>e.currentWriteId);for(let s=0;s<t.length;s++){let a=t[s],l=at(n,a.path),c=!1,u;if(H(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===a.status)c=!0,u=a.abortReason,r=r.concat(lQ(e.serverSyncTree_,a.currentWriteId,!0));else if(0===a.status){if(a.retryCount>=25)c=!0,u="maxretry",r=r.concat(lQ(e.serverSyncTree_,a.currentWriteId,!0));else{let n=cY(e,a.path,o);a.currentInputSnapshot=n;let i=t[s].update(n.val());if(void 0!==i){ck("transaction failed: Data returned ",i,a.path);let t=aR(i),s="object"==typeof i&&null!=i&&ek(i,".priority");s||(t=t.updatePriority(n.getPriority()));let l=a.currentWriteId,c=cW(e),u=ca(t,n,c);a.currentOutputSnapshotRaw=t,a.currentOutputSnapshotResolved=u,a.currentWriteId=cj(e),o.splice(o.indexOf(l),1),r=(r=r.concat(lY(e.serverSyncTree_,a.path,u,a.currentWriteId,a.applyLocally))).concat(lQ(e.serverSyncTree_,l,!0))}else c=!0,u="nodata",r=r.concat(lQ(e.serverSyncTree_,a.currentWriteId,!0))}}cL(e.eventQueue_,n,r),r=[],c&&(t[s].status=2,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete&&("nodata"===u?i.push(()=>t[s].onComplete(null,!1,t[s].currentInputSnapshot)):i.push(()=>t[s].onComplete(Error(u),!1,null))))}c1(e,e.transactionQueueTree_);for(let e=0;e<i.length;e++)oS(i[e]);cQ(e,e.transactionQueueTree_)}(e,r,i),i}function cZ(e,t){let n;let i=e.transactionQueueTree_;for(n=o2(t);null!==n&&void 0===ch(i);)i=cu(i,n),n=o2(t=o3(t));return i}function c0(e,t){let n=[];return function e(t,n,i){let r=ch(n);if(r)for(let e=0;e<r.length;e++)i.push(r[e]);cf(n,n=>{e(t,n,i)})}(e,t,n),n.sort((e,t)=>e.order-t.order),n}function c1(e,t){let n=ch(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,cd(t,n.length>0?n:void 0)}cf(t,t=>{c1(e,t)})}function c6(e,t){let n=cm(cZ(e,t)),i=cu(e.transactionQueueTree_,t);return!function(e,t,n){let i=e.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,t=>{c2(e,t)}),c2(e,i),!function e(t,n,i,r){i&&!r&&n(t),cf(t,t=>{e(t,n,!0,r)}),i&&r&&n(t)}(i,t=>{c2(e,t)}),n}function c2(e,t){let n=ch(t);if(n){let i=[],r=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(H(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(H(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),r=r.concat(lQ(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,Error("set"),!1,null))));-1===s?cd(t,void 0):n.length=s+1,cL(e.eventQueue_,cm(t),r);for(let e=0;e<i.length;e++)oS(i[e])}}let c5=function(e,t){let n=c3(e),i=n.namespace;"firebase.com"===n.domain&&op(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||op("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||om();let r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new oz(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new o1(n.pathString)}},c3=function(e){let t="",n="",i="",r="",s="",o=!0,a="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(r=function(e){let t="",n=e.split("/");for(let e=0;e<n.length;e++)if(n[e].length>0){let i=n[e];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(u,h)));let d=function(e){let t={};for(let n of("?"===e.charAt(0)&&(e=e.substring(1)),e.split("&"))){if(0===n.length)continue;let i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):of(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;let p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{let e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=i}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}},c4="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",c9=function(){let e=0,t=[];return function(n){let i;let r=n===e;e=n;let s=Array(8);for(i=7;i>=0;i--)s[i]=c4.charAt(n%64),n=Math.floor(n/64);H(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=c4.charAt(t[i]);return H(20===o.length,"nextPushId: Length should be 20."),o}}();class c8{constructor(e,t,n,i){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=i}getPath(){let e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+e_(this.snapshot.exportVal())}}class c7{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ue{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return H(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class ut{constructor(e,t){this._repo=e,this._path=t}cancel(){let e=new es;return!function(e,t,n){e.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&function e(t,n){if(ae(n))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;{let i=t.value;return t.value=null,i.forEachChild(ak,(e,n)=>{aG(t,new o1(e),n)}),e(t,n)}}if(!(t.children.size>0))return!0;{let i=o2(n);if(n=o3(n),t.children.has(i)){let r=e(t.children.get(i),n);r&&t.children.delete(i)}return 0===t.children.size}}(e.onDisconnect_,t),cG(e,n,i,r)})}(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){cS("OnDisconnect.remove",this._path);let e=new es;return cV(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){cS("OnDisconnect.set",this._path),cw("OnDisconnect.set",e,this._path,!1);let t=new es;return cV(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){cS("OnDisconnect.setWithPriority",this._path),cw("OnDisconnect.setWithPriority",e,this._path,!1),cC("OnDisconnect.setWithPriority",t,!1);let n=new es;return!function(e,t,n,i,r){let s=aR(n,i);e.server_.onDisconnectPut(t.toString(),s.val(!0),(n,i)=>{"ok"===n&&aG(e.onDisconnect_,t,s),cG(e,r,n,i)})}(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){cS("OnDisconnect.update",this._path),cI("OnDisconnect.update",e,this._path,!1);let t=new es;return!function(e,t,n,i){if(eI(n)){ou("onDisconnect().update() called with empty data.  Don't do anything."),cG(e,i,"ok",void 0);return}e.server_.onDisconnectMerge(t.toString(),n,(r,s)=>{"ok"===r&&oC(n,(n,i)=>{let r=aR(i);aG(e.onDisconnect_,o7(t,n),r)}),cG(e,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class un{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return ae(this._path)?null:o4(this._path)}get ref(){return new uo(this._repo,this._path)}get _queryIdentifier(){let e=aV(this._queryParams),t=ox(e);return"{}"===t?"default":t}get _queryObject(){return aV(this._queryParams)}isEqual(e){if(!((e=eB(e))instanceof un))return!1;let t=this._repo===e._repo,n=ai(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function ui(e,t){if(!0===e._orderByCalled)throw Error(t+": You can't combine multiple orderBy calls.")}function ur(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===ap){let i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){let n=e.getIndexStartName();if(n!==o_)throw Error(i);if("string"!=typeof t)throw Error(r)}if(e.hasEnd()){let t=e.getIndexEndName();if(t!==ov)throw Error(i);if("string"!=typeof n)throw Error(r)}}else if(e.getIndex()===ak){if(null!=t&&!cb(t)||null!=n&&!cb(n))throw Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(H(e.getIndex() instanceof aP||e.getIndex()===aA,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function us(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class uo extends un{constructor(e,t){super(e,t,new aU,!1)}get parent(){let e=o8(this._path);return null===e?null:new uo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ua{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new o1(e),n=uu(this.ref,e);return new ua(this._node.getChild(t),n,ak)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;let t=this._node;return!!t.forEachChild(this._index,(t,n)=>e(new ua(n,uu(this.ref,t),ak)))}hasChild(e){let t=new o1(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ul(e,t){return(e=eB(e))._checkNotDeleted("ref"),void 0!==t?uu(e._root,t):e._root}function uc(e,t){(e=eB(e))._checkNotDeleted("refFromURL");let n=c5(t,e._repo.repoInfo_.nodeAdmin);cR("refFromURL",n);let i=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||i.host===e._repo.repoInfo_.host||op("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+e._repo.repoInfo_.host+")"),ul(e,n.path.toString())}function uu(e,t){return null===o2((e=eB(e))._path)?cE("child","path",t,!1):cN("child","path",t,!1),new uo(e._repo,o7(e._path,t))}function uh(e,t){cS("set",(e=eB(e))._path),cw("set",t,e._path,!1);let n=new es;return cH(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}class ud{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){let n=t._queryParams.getIndex();return new c8("value",this,new ua(e.snapshotNode,new uo(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new c7(this,e,t):null}matches(e){return e instanceof ud&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class up{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new c7(this,e,t):null}createEvent(e,t){H(null!=e.childName,"Child events should have a childName.");let n=uu(new uo(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new c8(e.type,this,new ua(e.snapshotNode,n,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof up&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function uf(e,t,n,i,r){var s;let o,a;if("object"==typeof i&&(o=void 0,r=i),"function"==typeof i&&(o=i),r&&r.onlyOnce){let t=n,i=(n,i)=>{c$(e._repo,e,c),t(n,i)};i.userCallback=n.userCallback,i.context=n.context,n=i}let l=new ue(n,o||void 0),c="value"===t?new ud(l):new up(t,l);return s=e._repo,a=".info"===o2(e._path)?l1(s.infoSyncTree_,e,c):l1(s.serverSyncTree_,e,c),cO(s.eventQueue_,e._path,a),()=>c$(e._repo,e,c)}function um(e,t,n,i){return uf(e,"value",t,n,i)}function ug(e,t,n,i){return uf(e,"child_added",t,n,i)}function uy(e,t,n,i){return uf(e,"child_changed",t,n,i)}function u_(e,t,n,i){return uf(e,"child_moved",t,n,i)}function uv(e,t,n,i){return uf(e,"child_removed",t,n,i)}function ub(e,t,n){let i=null,r=n?new ue(n):null;"value"===t?i=new ud(r):t&&(i=new up(t,r)),c$(e._repo,e,i)}class uw{}class uk extends uw{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){cw("endAt",this._value,e._path,!0);let t=aq(e._queryParams,this._value,this._key);if(us(t),ur(t),e._queryParams.hasEnd())throw Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new un(e._repo,e._path,t,e._orderByCalled)}}class ux extends uw{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){var t,n,i;let r;cw("endBefore",this._value,e._path,!1);let s=(t=e._queryParams,n=this._value,i=this._key,(r=t.index_===ap||i?aq(t,n,i):aq(t,n,o_)).endBeforeSet_=!0,r);if(us(s),ur(s),e._queryParams.hasEnd())throw Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new un(e._repo,e._path,s,e._orderByCalled)}}class uI extends uw{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){cw("startAt",this._value,e._path,!0);let t=aB(e._queryParams,this._value,this._key);if(us(t),ur(t),e._queryParams.hasStart())throw Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new un(e._repo,e._path,t,e._orderByCalled)}}class uC extends uw{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){var t,n,i;let r;cw("startAfter",this._value,e._path,!1);let s=(t=e._queryParams,n=this._value,i=this._key,(r=t.index_===ap||i?aB(t,n,i):aB(t,n,ov)).startAfterSet_=!0,r);if(us(s),ur(s),e._queryParams.hasStart())throw Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new un(e._repo,e._path,s,e._orderByCalled)}}class uT extends uw{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new un(e._repo,e._path,function(e,t){let n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class uN extends uw{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new un(e._repo,e._path,function(e,t){let n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class uE extends uw{constructor(e){super(),this._path=e}_apply(e){ui(e,"orderByChild");let t=new o1(this._path);if(ae(t))throw Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let n=new aP(t),i=aj(e._queryParams,n);return ur(i),new un(e._repo,e._path,i,!0)}}class uS extends uw{_apply(e){ui(e,"orderByKey");let t=aj(e._queryParams,ap);return ur(t),new un(e._repo,e._path,t,!0)}}class uR extends uw{_apply(e){ui(e,"orderByPriority");let t=aj(e._queryParams,ak);return ur(t),new un(e._repo,e._path,t,!0)}}class uP extends uw{_apply(e){ui(e,"orderByValue");let t=aj(e._queryParams,aA);return ur(t),new un(e._repo,e._path,t,!0)}}class uA extends uw{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(cw("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new uk(this._value,this._key)._apply(new uI(this._value,this._key)._apply(e))}}function uO(e,...t){let n=eB(e);for(let e of t)n=e._apply(n);return n}H(!u,"__referenceConstructor has already been defined"),u=uo,H(!h,"__referenceConstructor has already been defined"),h=uo;let uL={};function uD(e,t,n,i,r){var s,o;let a,l,c,u,h=i||e.options.databaseURL;void 0===h&&(e.options.projectId||op("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ou("Using default host for project ",e.options.projectId),h=`${e.options.projectId}-default-rtdb.firebaseio.com`);let d=c5(h,r),p=d.repoInfo;void 0!==P&&P.env&&(c=P.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(u=!0,p=(d=c5(h=`http://${c}?ns=${p.namespace}`,r)).repoInfo):u=!d.repoInfo.secure;let f=r&&u?new oL(oL.OWNER):new oO(e.name,e.options,t);cR("Invalid Firebase Database URL",d),ae(d.path)||op("Database URL must point to the root of a Firebase Database (not including a child path).");let m=(s=p,o=new oA(e.name,n),(a=uL[e.name])||(a={},uL[e.name]=a),(l=a[s.toURLString()])&&op("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new cF(s,!1,f,o),a[s.toURLString()]=l,l);return new uM(m,e)}class uM{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(e,t,n){if(e.stats_=oj(e.repoInfo_),e.forceRestClient_||oR())e.server_=new a$(e.repoInfo_,(t,n,i,r)=>{cU(e,t,n,i,r)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>cB(e,!0),0);else{if(null!=n){if("object"!=typeof n)throw Error("Only objects are supported for option databaseAuthVariableOverride");try{e_(n)}catch(e){throw Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new ac(e.repoInfo_,t,(t,n,i,r)=>{cU(e,t,n,i,r)},t=>{cB(e,t)},t=>{oC(t,(t,n)=>{cq(e,t,n)})},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){let n=e.toString();return oq[n]||(oq[n]=t()),oq[n]}(e.repoInfo_,()=>new aJ(e.stats_,e.server_)),e.infoData_=new aK,e.infoSyncTree_=new lG({startListening:(t,n,i,r)=>{let s=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=lJ(e.infoSyncTree_,t._path,o),setTimeout(()=>{r("ok")},0)),s},stopListening:()=>{}}),cq(e,"connected",!1),e.serverSyncTree_=new lG({startListening:(t,n,i,r)=>(e.server_.listen(t,i,n,(n,i)=>{let s=r(n,i);cL(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new uo(this._repo,o6())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){let n=uL[t];n&&n[e.key]===e||op(`Database ${t}(${e.repoInfo_}) has already been deleted.`),cK(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&op("Cannot call "+e+" on a deleted database.")}}function uF(){oY.IS_TRANSPORT_INITIALIZED&&of("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function uz(){uF(),o$.forceDisallow()}function uW(){uF(),oG.forceDisallow(),o$.forceAllow()}class uU{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ac.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},ac.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},s9=t_,td(new eq("database",(e,{instanceIdentifier:t})=>{let n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return uD(n,i,r,t)},"PUBLIC").setMultipleInstances(!0)),tx(s3,s4,void 0),tx(s3,s4,"esm2017");let uB=new eJ("@firebase/database-compat"),uq=function(e){uB.warn("FIREBASE WARNING: "+e)},uj=function(e,t,n,i){if((!i||void 0!==n)&&"boolean"!=typeof n)throw Error(eM(e,t)+"must be a boolean.")},uH=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error(eM(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};class uV{constructor(e){this._delegate=e}cancel(e){eD("OnDisconnect.cancel",0,1,arguments.length),eF("OnDisconnect.cancel","onComplete",e,!0);let t=this._delegate.cancel();return e&&t.then(()=>e(null),t=>e(t)),t}remove(e){eD("OnDisconnect.remove",0,1,arguments.length),eF("OnDisconnect.remove","onComplete",e,!0);let t=this._delegate.remove();return e&&t.then(()=>e(null),t=>e(t)),t}set(e,t){eD("OnDisconnect.set",1,2,arguments.length),eF("OnDisconnect.set","onComplete",t,!0);let n=this._delegate.set(e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){eD("OnDisconnect.setWithPriority",2,3,arguments.length),eF("OnDisconnect.setWithPriority","onComplete",n,!0);let i=this._delegate.setWithPriority(e,t);return n&&i.then(()=>n(null),e=>n(e)),i}update(e,t){if(eD("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,uq("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}eF("OnDisconnect.update","onComplete",t,!0);let n=this._delegate.update(e);return t&&n.then(()=>t(null),e=>t(e)),n}}class u${constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return eD("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class uK{constructor(e,t){this._database=e,this._delegate=t}val(){return eD("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return eD("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return eD("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return eD("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return eD("DataSnapshot.child",0,1,arguments.length),cN("DataSnapshot.child","path",e=String(e),!1),new uK(this._database,this._delegate.child(e))}hasChild(e){return eD("DataSnapshot.hasChild",1,1,arguments.length),cN("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return eD("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return eD("DataSnapshot.forEach",1,1,arguments.length),eF("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new uK(this._database,t)))}hasChildren(){return eD("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return eD("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return eD("DataSnapshot.ref",0,0,arguments.length),new uG(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class uX{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,i){var r;eD("Query.on",2,4,arguments.length),eF("Query.on","callback",t,!1);let s=uX.getCancelAndContextArgs_("Query.on",n,i),o=(e,n)=>{t.call(s.context,new uK(this.database,e),n)};o.userCallback=t,o.context=s.context;let a=null===(r=s.cancel)||void 0===r?void 0:r.bind(s.context);switch(e){case"value":return um(this._delegate,o,a),t;case"child_added":return ug(this._delegate,o,a),t;case"child_removed":return uv(this._delegate,o,a),t;case"child_changed":return uy(this._delegate,o,a),t;case"child_moved":return u_(this._delegate,o,a),t;default:throw Error(eM("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if(eD("Query.off",0,3,arguments.length),uH("Query.off",e,!0),eF("Query.off","callback",t,!0),ez("Query.off","context",n,!0),t){let i=()=>{};i.userCallback=t,i.context=n,ub(this._delegate,e,i)}else ub(this._delegate,e)}get(){return(function(e){e=eB(e);let t=new ue(()=>{}),n=new ud(t);return(function(e,t,n){let i=function(e,t){var n;let i=t._path,r=null;e.syncPointTree_.foreachOnPath(i,(e,t)=>{let n=at(e,i);r=r||lH(t,n)});let s=e.syncPointTree_.get(i);s?r=r||lH(s,o6()):(s=new lU,e.syncPointTree_=e.syncPointTree_.set(i,s));let o=null!=r,a=o?new a4(r,!0,!1):null,l=(n=e.pendingWriteTree_,lC(t._path,n)),c=lq(s,t,l,o?a.getNode():aE.EMPTY_NODE,o);return ln(c.viewCache_)}(e.serverSyncTree_,t);return null!=i?Promise.resolve(i):e.server_.get(t).then(i=>{let r;let s=aR(i).withIndex(t._queryParams.getIndex());if(l1(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())r=lJ(e.serverSyncTree_,t._path,s);else{let n=l3(e.serverSyncTree_,t);r=l0(e.serverSyncTree_,t._path,s,n)}return cL(e.eventQueue_,t._path,r),lZ(e.serverSyncTree_,t,n,null,!0),s},n=>(cX(e,"get for query "+e_(t)+" failed: "+n),Promise.reject(Error(n))))})(e._repo,e,n).then(t=>new ua(t,new uo(e._repo,e._path),e._queryParams.getIndex()))})(this._delegate).then(e=>new uK(this.database,e))}once(e,t,n,i){eD("Query.once",1,4,arguments.length),eF("Query.once","callback",t,!0);let r=uX.getCancelAndContextArgs_("Query.once",n,i),s=new es,o=(e,n)=>{let i=new uK(this.database,e);t&&t.call(r.context,i,n),s.resolve(i)};o.userCallback=t,o.context=r.context;let a=e=>{r.cancel&&r.cancel.call(r.context,e),s.reject(e)};switch(e){case"value":um(this._delegate,o,a,{onlyOnce:!0});break;case"child_added":ug(this._delegate,o,a,{onlyOnce:!0});break;case"child_removed":uv(this._delegate,o,a,{onlyOnce:!0});break;case"child_changed":uy(this._delegate,o,a,{onlyOnce:!0});break;case"child_moved":u_(this._delegate,o,a,{onlyOnce:!0});break;default:throw Error(eM("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return eD("Query.limitToFirst",1,1,arguments.length),new uX(this.database,uO(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw Error("limitToFirst: First argument must be a positive integer.");return new uT(e)}(e)))}limitToLast(e){return eD("Query.limitToLast",1,1,arguments.length),new uX(this.database,uO(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw Error("limitToLast: First argument must be a positive integer.");return new uN(e)}(e)))}orderByChild(e){return eD("Query.orderByChild",1,1,arguments.length),new uX(this.database,uO(this._delegate,function(e){if("$key"===e)throw Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return cN("orderByChild","path",e,!1),new uE(e)}(e)))}orderByKey(){return eD("Query.orderByKey",0,0,arguments.length),new uX(this.database,uO(this._delegate,new uS))}orderByPriority(){return eD("Query.orderByPriority",0,0,arguments.length),new uX(this.database,uO(this._delegate,new uR))}orderByValue(){return eD("Query.orderByValue",0,0,arguments.length),new uX(this.database,uO(this._delegate,new uP))}startAt(e=null,t){return eD("Query.startAt",0,2,arguments.length),new uX(this.database,uO(this._delegate,function(e=null,t){return cT("startAt","key",t,!0),new uI(e,t)}(e,t)))}startAfter(e=null,t){return eD("Query.startAfter",0,2,arguments.length),new uX(this.database,uO(this._delegate,(cT("startAfter","key",t,!0),new uC(e,t))))}endAt(e=null,t){return eD("Query.endAt",0,2,arguments.length),new uX(this.database,uO(this._delegate,(cT("endAt","key",t,!0),new uk(e,t))))}endBefore(e=null,t){return eD("Query.endBefore",0,2,arguments.length),new uX(this.database,uO(this._delegate,(cT("endBefore","key",t,!0),new ux(e,t))))}equalTo(e,t){return eD("Query.equalTo",1,2,arguments.length),new uX(this.database,uO(this._delegate,(cT("equalTo","key",t,!0),new uA(e,t))))}toString(){return eD("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return eD("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(eD("Query.isEqual",1,1,arguments.length),!(e instanceof uX))throw Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){let i={cancel:void 0,context:void 0};if(t&&n)i.cancel=t,eF(e,"cancel",i.cancel,!0),i.context=n,ez(e,"context",i.context,!0);else if(t){if("object"==typeof t&&null!==t)i.context=t;else if("function"==typeof t)i.cancel=t;else throw Error(eM(e,"cancelOrContext")+" must either be a cancel callback or a context object.")}return i}get ref(){return new uG(this.database,new uo(this._delegate._repo,this._delegate._path))}}class uG extends uX{constructor(e,t){super(e,new un(t._repo,t._path,new aU,!1)),this.database=e,this._delegate=t}getKey(){return eD("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return eD("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new uG(this.database,uu(this._delegate,e))}getParent(){eD("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new uG(this.database,e):null}getRoot(){return eD("Reference.root",0,0,arguments.length),new uG(this.database,this._delegate.root)}set(e,t){eD("Reference.set",1,2,arguments.length),eF("Reference.set","onComplete",t,!0);let n=uh(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}update(e,t){if(eD("Reference.update",1,2,arguments.length),Array.isArray(e)){let t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,uq("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}cS("Reference.update",this._delegate._path),eF("Reference.update","onComplete",t,!0);let n=function(e,t){cI("update",t,e._path,!1);let n=new es;return!function(e,t,n,i){cX(e,"update",{path:t.toString(),value:n});let r=!0,s=cW(e),o={};if(oC(n,(n,i)=>{r=!1,o[n]=co(o7(t,n),aR(i),e.serverSyncTree_,s)}),r)ou("update() called with empty data.  Don't do anything."),cG(e,i,"ok",void 0);else{let r=cj(e),s=function(e,t,n,i){var r;H(i>(r=e.pendingWriteTree_).lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:t,children:n,writeId:i,visible:!0}),r.visibleWrites=ll(r.visibleWrites,t,n),r.lastWriteId=i;let s=ls.fromObject(n);return l2(e,new a3(aZ(),t,s))}(e.serverSyncTree_,t,o,r);cA(e.eventQueue_,s),e.server_.merge(t.toString(),n,(n,s)=>{let o="ok"===n;o||of("update at "+t+" failed: "+n);let a=lQ(e.serverSyncTree_,r,!o),l=a.length>0?cJ(e,t):t;cL(e.eventQueue_,l,a),cG(e,i,n,s)}),oC(n,n=>{let i=c6(e,o7(t,n));cJ(e,i)}),cL(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){eD("Reference.setWithPriority",2,3,arguments.length),eF("Reference.setWithPriority","onComplete",n,!0);let i=function(e,t,n){if(cS("setWithPriority",e._path),cw("setWithPriority",t,e._path,!1),cC("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";let i=new es;return cH(e._repo,e._path,t,n,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return n&&i.then(()=>n(null),e=>n(e)),i}remove(e){var t;eD("Reference.remove",0,1,arguments.length),eF("Reference.remove","onComplete",e,!0);let n=(cS("remove",(t=this._delegate)._path),uh(t,null));return e&&n.then(()=>e(null),t=>e(t)),n}transaction(e,t,n){eD("Reference.transaction",1,3,arguments.length),eF("Reference.transaction","transactionUpdate",e,!1),eF("Reference.transaction","onComplete",t,!0),uj("Reference.transaction","applyLocally",n,!0);let i=(function(e,t,n){var i;if(cS("Reference.transaction",(e=eB(e))._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";let r=null===(i=null==n?void 0:n.applyLocally)||void 0===i||i,s=new es,o=um(e,()=>{});return!function(e,t,n,i,r,s){cX(e,"transaction on "+t);let o={path:t,update:n,onComplete:i,status:null,order:or(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=cY(e,t,void 0);o.currentInputSnapshot=a;let l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{let n;ck("transaction failed: Data returned ",l,o.path),o.status=0;let i=cu(e.transactionQueueTree_,t),r=ch(i)||[];if(r.push(o),cd(i,r),"object"==typeof l&&null!==l&&ek(l,".priority"))H(cb(n=ex(l,".priority")),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{let i=l6(e.serverSyncTree_,t)||aE.EMPTY_NODE;n=i.getPriority().val()}let s=cW(e),c=aR(l,n),u=ca(c,a,s);o.currentOutputSnapshotRaw=c,o.currentOutputSnapshotResolved=u,o.currentWriteId=cj(e);let h=lY(e.serverSyncTree_,t,u,o.currentWriteId,o.applyLocally);cL(e.eventQueue_,t,h),cQ(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(t,n,i)=>{let r=null;t?s.reject(t):(r=new ua(i,new uo(e._repo,e._path),ak),s.resolve(new uU(n,r)))},o,r),s.promise})(this._delegate,e,{applyLocally:n}).then(e=>new u$(e.committed,new uK(this.database,e.snapshot)));return t&&i.then(e=>t(null,e.committed,e.snapshot),e=>t(e,!1,null)),i}setPriority(e,t){eD("Reference.setPriority",1,2,arguments.length),eF("Reference.setPriority","onComplete",t,!0);let n=function(e,t){cS("setPriority",(e=eB(e))._path),cC("setPriority",t,!1);let n=new es;return cH(e._repo,o7(e._path,".priority"),t,null,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}push(e,t){eD("Reference.push",0,2,arguments.length),eF("Reference.push","onComplete",t,!0);let n=function(e,t){let n;cS("push",(e=eB(e))._path),cw("push",t,e._path,!0);let i=cz(e._repo),r=c9(i),s=uu(e,r),o=uu(e,r);return n=null!=t?uh(o,t).then(()=>o):Promise.resolve(o),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}(this._delegate,e),i=n.then(e=>new uG(this.database,e));t&&i.then(()=>t(null),e=>t(e));let r=new uG(this.database,n);return r.then=i.then.bind(i),r.catch=i.catch.bind(i,void 0),r}onDisconnect(){return cS("Reference.onDisconnect",this._delegate._path),new uV(new ut(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class uY{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:uz,forceLongPolling:uW}}useEmulator(e,t,n={}){!function(e,t,n,i={}){var r;let s;(e=eB(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&op("Cannot call useEmulator() after instance has already been initialized.");let o=e._repoInternal;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&op('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new oL(oL.OWNER);else if(i.mockUserToken){let t="string"==typeof i.mockUserToken?i.mockUserToken:function(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Q(JSON.stringify({alg:"none",type:"JWT"})),Q(JSON.stringify(s)),""].join(".")}(i.mockUserToken,e.app.options.projectId);s=new oL(t)}r=s,o.repoInfo_=new oz(`${t}:${n}`,!1,o.repoInfo_.namespace,o.repoInfo_.webSocketOnly,o.repoInfo_.nodeAdmin,o.repoInfo_.persistenceKey,o.repoInfo_.includeNamespaceInQueryParams,!0),r&&(o.authTokenProvider_=r)}(this._delegate,e,t,n)}ref(e){if(eD("database.ref",0,1,arguments.length),e instanceof uG){let t=uc(this._delegate,e.toString());return new uG(this,t)}{let t=ul(this._delegate,e);return new uG(this,t)}}refFromURL(e){eD("database.refFromURL",1,1,arguments.length);let t=uc(this._delegate,e);return new uG(this,t)}goOffline(){var e;return eD("database.goOffline",0,0,arguments.length),void((e=eB(e=this._delegate))._checkNotDeleted("goOffline"),cK(e._repo))}goOnline(){var e,t;return eD("database.goOnline",0,0,arguments.length),void((e=eB(e=this._delegate))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(cM))}}uY.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:e=>({".sv":{increment:e}})};var uQ=Object.freeze({__proto__:null,initStandalone:function({app:e,url:t,version:n,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){s9=n;let o=new eH("auth-internal",new eV("database-standalone"));return o.setComponent(new eq("auth-internal",()=>i,"PRIVATE")),{instance:new uY(uD(e,o,void 0,t,s),e),namespace:r}}});let uJ=uY.ServerValue;tz.INTERNAL.registerComponent(new eq("database-compat",(e,{instanceIdentifier:t})=>{let n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new uY(i,n)},"PUBLIC").setServiceProps({Reference:uG,Query:uX,Database:uY,DataSnapshot:uK,enableLogging:function(e,t){oc(e,t)},INTERNAL:uQ,ServerValue:uJ}).setMultipleInstances(!0)),tz.registerVersion("@firebase/database-compat","1.0.0");var uZ={};v=void 0===T?"undefined"==typeof window?uZ:window:T,b=function(e){"use strict";if(void 0===e&&void 0===e.document)return!1;var t,n,i,r,s,o="\n\nVisit documentation page to learn more: https://notiflix.github.io/documentation",a='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif',l={Success:"Success",Failure:"Failure",Warning:"Warning",Info:"Info"},c={wrapID:"NotiflixNotifyWrap",overlayID:"NotiflixNotifyOverlay",width:"280px",position:"right-top",distance:"10px",opacity:1,borderRadius:"5px",rtl:!1,timeout:3e3,messageMaxLength:110,backOverlay:!1,backOverlayColor:"rgba(0,0,0,0.5)",plainText:!0,showOnlyTheLastOne:!1,clickToClose:!1,pauseOnHover:!0,ID:"NotiflixNotify",className:"notiflix-notify",zindex:4001,fontFamily:"Quicksand",fontSize:"13px",cssAnimation:!0,cssAnimationDuration:400,cssAnimationStyle:"fade",closeButton:!1,useIcon:!0,useFontAwesome:!1,fontAwesomeIconStyle:"basic",fontAwesomeIconSize:"34px",success:{background:"#32c682",textColor:"#fff",childClassName:"notiflix-notify-success",notiflixIconColor:"rgba(0,0,0,0.2)",fontAwesomeClassName:"fas fa-check-circle",fontAwesomeIconColor:"rgba(0,0,0,0.2)",backOverlayColor:"rgba(50,198,130,0.2)"},failure:{background:"#ff5549",textColor:"#fff",childClassName:"notiflix-notify-failure",notiflixIconColor:"rgba(0,0,0,0.2)",fontAwesomeClassName:"fas fa-times-circle",fontAwesomeIconColor:"rgba(0,0,0,0.2)",backOverlayColor:"rgba(255,85,73,0.2)"},warning:{background:"#eebf31",textColor:"#fff",childClassName:"notiflix-notify-warning",notiflixIconColor:"rgba(0,0,0,0.2)",fontAwesomeClassName:"fas fa-exclamation-circle",fontAwesomeIconColor:"rgba(0,0,0,0.2)",backOverlayColor:"rgba(238,191,49,0.2)"},info:{background:"#26c0d3",textColor:"#fff",childClassName:"notiflix-notify-info",notiflixIconColor:"rgba(0,0,0,0.2)",fontAwesomeClassName:"fas fa-info-circle",fontAwesomeIconColor:"rgba(0,0,0,0.2)",backOverlayColor:"rgba(38,192,211,0.2)"}},u={Success:"Success",Failure:"Failure",Warning:"Warning",Info:"Info"},h={ID:"NotiflixReportWrap",className:"notiflix-report",width:"320px",backgroundColor:"#f8f8f8",borderRadius:"25px",rtl:!1,zindex:4002,backOverlay:!0,backOverlayColor:"rgba(0,0,0,0.5)",backOverlayClickToClose:!1,fontFamily:"Quicksand",svgSize:"110px",plainText:!0,titleFontSize:"16px",titleMaxLength:34,messageFontSize:"13px",messageMaxLength:400,buttonFontSize:"14px",buttonMaxLength:34,cssAnimation:!0,cssAnimationDuration:360,cssAnimationStyle:"fade",success:{svgColor:"#32c682",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#32c682",buttonColor:"#fff",backOverlayColor:"rgba(50,198,130,0.2)"},failure:{svgColor:"#ff5549",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#ff5549",buttonColor:"#fff",backOverlayColor:"rgba(255,85,73,0.2)"},warning:{svgColor:"#eebf31",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#eebf31",buttonColor:"#fff",backOverlayColor:"rgba(238,191,49,0.2)"},info:{svgColor:"#26c0d3",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#26c0d3",buttonColor:"#fff",backOverlayColor:"rgba(38,192,211,0.2)"}},d={Show:"Show",Ask:"Ask",Prompt:"Prompt"},p={ID:"NotiflixConfirmWrap",className:"notiflix-confirm",width:"300px",zindex:4003,position:"center",distance:"10px",backgroundColor:"#f8f8f8",borderRadius:"25px",backOverlay:!0,backOverlayColor:"rgba(0,0,0,0.5)",rtl:!1,fontFamily:"Quicksand",cssAnimation:!0,cssAnimationDuration:300,cssAnimationStyle:"fade",plainText:!0,titleColor:"#32c682",titleFontSize:"16px",titleMaxLength:34,messageColor:"#1e1e1e",messageFontSize:"14px",messageMaxLength:110,buttonsFontSize:"15px",buttonsMaxLength:34,okButtonColor:"#f8f8f8",okButtonBackground:"#32c682",cancelButtonColor:"#f8f8f8",cancelButtonBackground:"#a9a9a9"},f={Standard:"Standard",Hourglass:"Hourglass",Circle:"Circle",Arrows:"Arrows",Dots:"Dots",Pulse:"Pulse",Custom:"Custom",Notiflix:"Notiflix"},m={ID:"NotiflixLoadingWrap",className:"notiflix-loading",zindex:4e3,backgroundColor:"rgba(0,0,0,0.8)",rtl:!1,fontFamily:"Quicksand",cssAnimation:!0,cssAnimationDuration:400,clickToClose:!1,customSvgUrl:null,customSvgCode:null,svgSize:"80px",svgColor:"#32c682",messageID:"NotiflixLoadingMessage",messageFontSize:"15px",messageMaxLength:34,messageColor:"#dcdcdc"},g={Standard:"Standard",Hourglass:"Hourglass",Circle:"Circle",Arrows:"Arrows",Dots:"Dots",Pulse:"Pulse"},y={ID:"NotiflixBlockWrap",querySelectorLimit:200,className:"notiflix-block",position:"absolute",zindex:1e3,backgroundColor:"rgba(255,255,255,0.9)",rtl:!1,fontFamily:"Quicksand",cssAnimation:!0,cssAnimationDuration:300,svgSize:"45px",svgColor:"#383838",messageFontSize:"14px",messageMaxLength:34,messageColor:"#383838"},_=function(e){return console.error("%c Notiflix Error ","padding:2px;border-radius:20px;color:#fff;background:#ff5549","\n"+e+o)},v=function(e){return console.log("%c Notiflix Info ","padding:2px;border-radius:20px;color:#fff;background:#26c0d3","\n"+e+o)},b=function(t){return t||(t="head"),null!==e.document[t]||(_('\nNotiflix needs to be appended to the "<'+t+'>" element, but you called it before the "<'+t+'>" element has been created.'),!1)},w=function(t,n){if(!b("head"))return!1;if(null!==t()&&!e.document.getElementById(n)){var i=e.document.createElement("style");i.id=n,i.innerHTML=t(),e.document.head.appendChild(i)}},k=function(){var e={},t=!1,n=0;for("[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],n++);n<arguments.length;n++)!function(n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=t&&"[object Object]"===Object.prototype.toString.call(n[i])?k(e[i],n[i]):n[i])}(arguments[n]);return e},x=function(t){var n=e.document.createElement("div");return n.innerHTML=t,n.textContent||n.innerText||""},I=function(e,t){return e||(e="60px"),t||(t="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" stroke="'+t+'" width="'+e+'" height="'+e+'" transform="scale(.8)" viewBox="0 0 38 38"><g fill="none" fill-rule="evenodd" stroke-width="2" transform="translate(1 1)"><circle cx="18" cy="18" r="18" stroke-opacity=".25"/><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" dur="1s" from="0 18 18" repeatCount="indefinite" to="360 18 18" type="rotate"/></path></g></svg>'},C=function(e,t){return e||(e="60px"),t||(t="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" id="NXLoadingHourglass" fill="'+t+'" width="'+e+'" height="'+e+'" viewBox="0 0 200 200"><style>@-webkit-keyframes NXhourglass5-animation{0%{-webkit-transform:scale(1,1);transform:scale(1,1)}16.67%{-webkit-transform:scale(1,.8);transform:scale(1,.8)}33.33%{-webkit-transform:scale(.88,.6);transform:scale(.88,.6)}37.5%{-webkit-transform:scale(.85,.55);transform:scale(.85,.55)}41.67%{-webkit-transform:scale(.8,.5);transform:scale(.8,.5)}45.83%{-webkit-transform:scale(.75,.45);transform:scale(.75,.45)}50%{-webkit-transform:scale(.7,.4);transform:scale(.7,.4)}54.17%{-webkit-transform:scale(.6,.35);transform:scale(.6,.35)}58.33%{-webkit-transform:scale(.5,.3);transform:scale(.5,.3)}83.33%,to{-webkit-transform:scale(.2,0);transform:scale(.2,0)}}@keyframes NXhourglass5-animation{0%{-webkit-transform:scale(1,1);transform:scale(1,1)}16.67%{-webkit-transform:scale(1,.8);transform:scale(1,.8)}33.33%{-webkit-transform:scale(.88,.6);transform:scale(.88,.6)}37.5%{-webkit-transform:scale(.85,.55);transform:scale(.85,.55)}41.67%{-webkit-transform:scale(.8,.5);transform:scale(.8,.5)}45.83%{-webkit-transform:scale(.75,.45);transform:scale(.75,.45)}50%{-webkit-transform:scale(.7,.4);transform:scale(.7,.4)}54.17%{-webkit-transform:scale(.6,.35);transform:scale(.6,.35)}58.33%{-webkit-transform:scale(.5,.3);transform:scale(.5,.3)}83.33%,to{-webkit-transform:scale(.2,0);transform:scale(.2,0)}}@-webkit-keyframes NXhourglass3-animation{0%{-webkit-transform:scale(1,.02);transform:scale(1,.02)}79.17%,to{-webkit-transform:scale(1,1);transform:scale(1,1)}}@keyframes NXhourglass3-animation{0%{-webkit-transform:scale(1,.02);transform:scale(1,.02)}79.17%,to{-webkit-transform:scale(1,1);transform:scale(1,1)}}@-webkit-keyframes NXhourglass1-animation{0%,83.33%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}@keyframes NXhourglass1-animation{0%,83.33%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}#NXLoadingHourglass *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g data-animator-group="true" data-animator-type="1" style="-webkit-animation-name:NXhourglass1-animation;animation-name:NXhourglass1-animation;-webkit-transform-origin:50% 50%;transform-origin:50% 50%;transform-box:fill-box"><g id="NXhourglass2" fill="inherit"><g data-animator-group="true" data-animator-type="2" style="-webkit-animation-name:NXhourglass3-animation;animation-name:NXhourglass3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform-origin:50% 100%;transform-origin:50% 100%;transform-box:fill-box" opacity=".4"><path id="NXhourglass4" d="M100 100l-34.38 32.08v31.14h68.76v-31.14z"/></g><g data-animator-group="true" data-animator-type="2" style="-webkit-animation-name:NXhourglass5-animation;animation-name:NXhourglass5-animation;-webkit-transform-origin:50% 100%;transform-origin:50% 100%;transform-box:fill-box" opacity=".4"><path id="NXhourglass6" d="M100 100L65.62 67.92V36.78h68.76v31.14z"/></g><path d="M51.14 38.89h8.33v14.93c0 15.1 8.29 28.99 23.34 39.1 1.88 1.25 3.04 3.97 3.04 7.08s-1.16 5.83-3.04 7.09c-15.05 10.1-23.34 23.99-23.34 39.09v14.93h-8.33a4.859 4.859 0 1 0 0 9.72h97.72a4.859 4.859 0 1 0 0-9.72h-8.33v-14.93c0-15.1-8.29-28.99-23.34-39.09-1.88-1.26-3.04-3.98-3.04-7.09s1.16-5.83 3.04-7.08c15.05-10.11 23.34-24 23.34-39.1V38.89h8.33a4.859 4.859 0 1 0 0-9.72H51.14a4.859 4.859 0 1 0 0 9.72zm79.67 14.93c0 15.87-11.93 26.25-19.04 31.03-4.6 3.08-7.34 8.75-7.34 15.15 0 6.41 2.74 12.07 7.34 15.15 7.11 4.78 19.04 15.16 19.04 31.03v14.93H69.19v-14.93c0-15.87 11.93-26.25 19.04-31.02 4.6-3.09 7.34-8.75 7.34-15.16 0-6.4-2.74-12.07-7.34-15.15-7.11-4.78-19.04-15.16-19.04-31.03V38.89h61.62v14.93z"/></g></g></svg>'},T=function(e,t){return e||(e="60px"),t||(t="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+e+'" viewBox="25 25 50 50" style="-webkit-animation:rotate 2s linear infinite;animation:rotate 2s linear infinite;height:'+e+";-webkit-transform-origin:center center;-ms-transform-origin:center center;transform-origin:center center;width:"+e+';position:absolute;top:0;left:0;margin:auto"><style>@-webkit-keyframes rotate{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}@keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}</style><circle cx="50" cy="50" r="20" fill="none" stroke="'+t+'" stroke-width="2" style="-webkit-animation:dash 1.5s ease-in-out infinite,color 1.5s ease-in-out infinite;animation:dash 1.5s ease-in-out infinite,color 1.5s ease-in-out infinite" stroke-dasharray="150 200" stroke-dashoffset="-10" stroke-linecap="round"/></svg>'},N=function(e,t){return e||(e="60px"),t||(t="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" fill="'+t+'" width="'+e+'" height="'+e+'" viewBox="0 0 128 128"><g><path fill="inherit" d="M109.25 55.5h-36l12-12a29.54 29.54 0 0 0-49.53 12H18.75A46.04 46.04 0 0 1 96.9 31.84l12.35-12.34v36zm-90.5 17h36l-12 12a29.54 29.54 0 0 0 49.53-12h16.97A46.04 46.04 0 0 1 31.1 96.16L18.74 108.5v-36z"/><animateTransform attributeName="transform" dur="1.5s" from="0 64 64" repeatCount="indefinite" to="360 64 64" type="rotate"/></g></svg>'},E=function(e,t){return e||(e="60px"),t||(t="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" fill="'+t+'" width="'+e+'" height="'+e+'" viewBox="0 0 100 100"><g transform="translate(25 50)"><circle r="9" fill="inherit" transform="scale(.239)"><animateTransform attributeName="transform" begin="-0.266s" calcMode="spline" dur="0.8s" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" keyTimes="0;0.5;1" repeatCount="indefinite" type="scale" values="0;1;0"/></circle></g><g transform="translate(50 50)"><circle r="9" fill="inherit" transform="scale(.00152)"><animateTransform attributeName="transform" begin="-0.133s" calcMode="spline" dur="0.8s" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" keyTimes="0;0.5;1" repeatCount="indefinite" type="scale" values="0;1;0"/></circle></g><g transform="translate(75 50)"><circle r="9" fill="inherit" transform="scale(.299)"><animateTransform attributeName="transform" begin="0s" calcMode="spline" dur="0.8s" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" keyTimes="0;0.5;1" repeatCount="indefinite" type="scale" values="0;1;0"/></circle></g></svg>'},S=function(e,t){return e||(e="60px"),t||(t="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" stroke="'+t+'" width="'+e+'" height="'+e+'" viewBox="0 0 44 44"><g fill="none" fill-rule="evenodd" stroke-width="2"><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="0s" calcMode="spline" dur="1.8s" keySplines="0.165, 0.84, 0.44, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 20"/><animate attributeName="stroke-opacity" begin="0s" calcMode="spline" dur="1.8s" keySplines="0.3, 0.61, 0.355, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 0"/></circle><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="-0.9s" calcMode="spline" dur="1.8s" keySplines="0.165, 0.84, 0.44, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 20"/><animate attributeName="stroke-opacity" begin="-0.9s" calcMode="spline" dur="1.8s" keySplines="0.3, 0.61, 0.355, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 0"/></circle></g></svg>'},R=function(){return'[id^=NotiflixNotifyWrap]{pointer-events:none;position:fixed;z-index:4001;opacity:1;right:10px;top:10px;width:280px;max-width:96%;-webkit-box-sizing:border-box;box-sizing:border-box;background:transparent}[id^=NotiflixNotifyWrap].nx-flex-center-center{max-height:calc(100vh - 20px);overflow-x:hidden;overflow-y:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:auto}[id^=NotiflixNotifyWrap]::-webkit-scrollbar{width:0;height:0}[id^=NotiflixNotifyWrap]::-webkit-scrollbar-thumb{background:transparent}[id^=NotiflixNotifyWrap]::-webkit-scrollbar-track{background:transparent}[id^=NotiflixNotifyWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixNotifyOverlay]{-webkit-transition:background .3s ease-in-out;-o-transition:background .3s ease-in-out;transition:background .3s ease-in-out}[id^=NotiflixNotifyWrap]>div{pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;width:100%;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;position:relative;margin:0 0 10px;border-radius:5px;background:#1e1e1e;color:#fff;padding:10px 12px;font-size:14px;line-height:1.4}[id^=NotiflixNotifyWrap]>div:last-child{margin:0}[id^=NotiflixNotifyWrap]>div.nx-with-callback{cursor:pointer}[id^=NotiflixNotifyWrap]>div.nx-with-icon{padding:8px;min-height:56px}[id^=NotiflixNotifyWrap]>div.nx-paused{cursor:auto}[id^=NotiflixNotifyWrap]>div.nx-notify-click-to-close{cursor:pointer}[id^=NotiflixNotifyWrap]>div.nx-with-close-button{padding:10px 36px 10px 12px}[id^=NotiflixNotifyWrap]>div.nx-with-icon.nx-with-close-button{padding:6px 36px 6px 6px}[id^=NotiflixNotifyWrap]>div>span.nx-message{cursor:inherit;font-weight:normal;font-family:inherit!important;word-break:break-all;word-break:break-word}[id^=NotiflixNotifyWrap]>div>span.nx-close-button{cursor:pointer;-webkit-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out;position:absolute;right:8px;top:0;bottom:0;margin:auto;color:inherit;width:20px;height:20px}[id^=NotiflixNotifyWrap]>div>span.nx-close-button:hover{-webkit-transform:rotate(90deg);transform:rotate(90deg)}[id^=NotiflixNotifyWrap]>div>span.nx-close-button>svg{position:absolute;width:16px;height:16px;right:2px;top:2px}[id^=NotiflixNotifyWrap]>div>.nx-message-icon{position:absolute;width:40px;height:40px;font-size:30px;line-height:40px;text-align:center;left:8px;top:0;bottom:0;margin:auto;border-radius:inherit}[id^=NotiflixNotifyWrap]>div>.nx-message-icon-fa.nx-message-icon-fa-shadow{color:inherit;background:rgba(0,0,0,.15);-webkit-box-shadow:inset 0 0 34px rgba(0,0,0,.2);box-shadow:inset 0 0 34px rgba(0,0,0,.2);text-shadow:0 0 10px rgba(0,0,0,.3)}[id^=NotiflixNotifyWrap]>div>span.nx-with-icon{position:relative;float:left;width:calc(100% - 40px);margin:0 0 0 40px;padding:0 0 0 10px;-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixNotifyWrap]>div.nx-rtl-on>.nx-message-icon{left:auto;right:8px}[id^=NotiflixNotifyWrap]>div.nx-rtl-on>span.nx-with-icon{padding:0 10px 0 0;margin:0 40px 0 0}[id^=NotiflixNotifyWrap]>div.nx-rtl-on>span.nx-close-button{right:auto;left:8px}[id^=NotiflixNotifyWrap]>div.nx-with-icon.nx-with-close-button.nx-rtl-on{padding:6px 6px 6px 36px}[id^=NotiflixNotifyWrap]>div.nx-with-close-button.nx-rtl-on{padding:10px 12px 10px 36px}[id^=NotiflixNotifyOverlay].nx-with-animation,[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-fade{-webkit-animation:notify-animation-fade .3s ease-in-out 0s normal;animation:notify-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes notify-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-zoom{-webkit-animation:notify-animation-zoom .3s ease-in-out 0s normal;animation:notify-animation-zoom .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-zoom{0%{-webkit-transform:scale(0);transform:scale(0)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes notify-animation-zoom{0%{-webkit-transform:scale(0);transform:scale(0)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(1);transform:scale(1)}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-right{-webkit-animation:notify-animation-from-right .3s ease-in-out 0s normal;animation:notify-animation-from-right .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-from-right{0%{right:-300px;opacity:0}50%{right:8px;opacity:1}100%{right:0;opacity:1}}@keyframes notify-animation-from-right{0%{right:-300px;opacity:0}50%{right:8px;opacity:1}100%{right:0;opacity:1}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-left{-webkit-animation:notify-animation-from-left .3s ease-in-out 0s normal;animation:notify-animation-from-left .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-from-left{0%{left:-300px;opacity:0}50%{left:8px;opacity:1}100%{left:0;opacity:1}}@keyframes notify-animation-from-left{0%{left:-300px;opacity:0}50%{left:8px;opacity:1}100%{left:0;opacity:1}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-top{-webkit-animation:notify-animation-from-top .3s ease-in-out 0s normal;animation:notify-animation-from-top .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-from-top{0%{top:-50px;opacity:0}50%{top:8px;opacity:1}100%{top:0;opacity:1}}@keyframes notify-animation-from-top{0%{top:-50px;opacity:0}50%{top:8px;opacity:1}100%{top:0;opacity:1}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-bottom{-webkit-animation:notify-animation-from-bottom .3s ease-in-out 0s normal;animation:notify-animation-from-bottom .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-from-bottom{0%{bottom:-50px;opacity:0}50%{bottom:8px;opacity:1}100%{bottom:0;opacity:1}}@keyframes notify-animation-from-bottom{0%{bottom:-50px;opacity:0}50%{bottom:8px;opacity:1}100%{bottom:0;opacity:1}}[id^=NotiflixNotifyOverlay].nx-with-animation.nx-remove,[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-fade.nx-remove{opacity:0;-webkit-animation:notify-remove-fade .3s ease-in-out 0s normal;animation:notify-remove-fade .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-fade{0%{opacity:1}100%{opacity:0}}@keyframes notify-remove-fade{0%{opacity:1}100%{opacity:0}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-zoom.nx-remove{-webkit-transform:scale(0);transform:scale(0);-webkit-animation:notify-remove-zoom .3s ease-in-out 0s normal;animation:notify-remove-zoom .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-zoom{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(0);transform:scale(0)}}@keyframes notify-remove-zoom{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(0);transform:scale(0)}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-top.nx-remove{opacity:0;-webkit-animation:notify-remove-to-top .3s ease-in-out 0s normal;animation:notify-remove-to-top .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-to-top{0%{top:0;opacity:1}50%{top:8px;opacity:1}100%{top:-50px;opacity:0}}@keyframes notify-remove-to-top{0%{top:0;opacity:1}50%{top:8px;opacity:1}100%{top:-50px;opacity:0}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-right.nx-remove{opacity:0;-webkit-animation:notify-remove-to-right .3s ease-in-out 0s normal;animation:notify-remove-to-right .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-to-right{0%{right:0;opacity:1}50%{right:8px;opacity:1}100%{right:-300px;opacity:0}}@keyframes notify-remove-to-right{0%{right:0;opacity:1}50%{right:8px;opacity:1}100%{right:-300px;opacity:0}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-bottom.nx-remove{opacity:0;-webkit-animation:notify-remove-to-bottom .3s ease-in-out 0s normal;animation:notify-remove-to-bottom .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-to-bottom{0%{bottom:0;opacity:1}50%{bottom:8px;opacity:1}100%{bottom:-50px;opacity:0}}@keyframes notify-remove-to-bottom{0%{bottom:0;opacity:1}50%{bottom:8px;opacity:1}100%{bottom:-50px;opacity:0}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-left.nx-remove{opacity:0;-webkit-animation:notify-remove-to-left .3s ease-in-out 0s normal;animation:notify-remove-to-left .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-to-left{0%{left:0;opacity:1}50%{left:8px;opacity:1}100%{left:-300px;opacity:0}}@keyframes notify-remove-to-left{0%{left:0;opacity:1}50%{left:8px;opacity:1}100%{left:-300px;opacity:0}}'},P=0,A=function(n,i,r,s){if(!b("body"))return!1;t||j.Notify.init({});var o=k(!0,t,{});if("object"==typeof r&&!Array.isArray(r)||"object"==typeof s&&!Array.isArray(s)){var u={};"object"==typeof r?u=r:"object"==typeof s&&(u=s),t=k(!0,t,u)}var h=t[n.toLocaleLowerCase("en")];P++,"string"!=typeof i&&(i="Notiflix "+n),t.plainText&&(i=x(i)),!t.plainText&&i.length>t.messageMaxLength&&(t=k(!0,t,{closeButton:!0,messageMaxLength:150}),i='Possible HTML Tags Error: The "plainText" option is "false" and the notification content length is more than the "messageMaxLength" option.'),i.length>t.messageMaxLength&&(i=i.substring(0,t.messageMaxLength)+"..."),"shadow"===t.fontAwesomeIconStyle&&(h.fontAwesomeIconColor=h.background),t.cssAnimation||(t.cssAnimationDuration=0);var d=e.document.getElementById(c.wrapID)||e.document.createElement("div");if(d.id=c.wrapID,d.style.width=t.width,d.style.zIndex=t.zindex,d.style.opacity=t.opacity,"center-center"===t.position?(d.style.left=t.distance,d.style.top=t.distance,d.style.right=t.distance,d.style.bottom=t.distance,d.style.margin="auto",d.classList.add("nx-flex-center-center"),d.style.maxHeight="calc((100vh - "+t.distance+") - "+t.distance+")",d.style.display="flex",d.style.flexWrap="wrap",d.style.flexDirection="column",d.style.justifyContent="center",d.style.alignItems="center",d.style.pointerEvents="none"):"center-top"===t.position?(d.style.left=t.distance,d.style.right=t.distance,d.style.top=t.distance,d.style.bottom="auto",d.style.margin="auto"):"center-bottom"===t.position?(d.style.left=t.distance,d.style.right=t.distance,d.style.bottom=t.distance,d.style.top="auto",d.style.margin="auto"):"right-bottom"===t.position?(d.style.right=t.distance,d.style.bottom=t.distance,d.style.top="auto",d.style.left="auto"):"left-top"===t.position?(d.style.left=t.distance,d.style.top=t.distance,d.style.right="auto",d.style.bottom="auto"):"left-bottom"===t.position?(d.style.left=t.distance,d.style.bottom=t.distance,d.style.top="auto",d.style.right="auto"):(d.style.right=t.distance,d.style.top=t.distance,d.style.left="auto",d.style.bottom="auto"),t.backOverlay){var p=e.document.getElementById(c.overlayID)||e.document.createElement("div");p.id=c.overlayID,p.style.width="100%",p.style.height="100%",p.style.position="fixed",p.style.zIndex=t.zindex-1,p.style.left=0,p.style.top=0,p.style.right=0,p.style.bottom=0,p.style.background=h.backOverlayColor||t.backOverlayColor,p.className=t.cssAnimation?"nx-with-animation":"",p.style.animationDuration=t.cssAnimation?t.cssAnimationDuration+"ms":"",e.document.getElementById(c.overlayID)||e.document.body.appendChild(p)}e.document.getElementById(c.wrapID)||e.document.body.appendChild(d);var f=e.document.createElement("div");f.id=t.ID+"-"+P,f.className=t.className+" "+h.childClassName+" "+(t.cssAnimation?"nx-with-animation":"")+" "+(t.useIcon?"nx-with-icon":"")+" nx-"+t.cssAnimationStyle+" "+(t.closeButton&&"function"!=typeof r?"nx-with-close-button":"")+" "+("function"==typeof r?"nx-with-callback":"")+" "+(t.clickToClose?"nx-notify-click-to-close":""),f.style.fontSize=t.fontSize,f.style.color=h.textColor,f.style.background=h.background,f.style.borderRadius=t.borderRadius,f.style.pointerEvents="all",t.rtl&&(f.setAttribute("dir","rtl"),f.classList.add("nx-rtl-on")),f.style.fontFamily='"'+t.fontFamily+'", '+a,t.cssAnimation&&(f.style.animationDuration=t.cssAnimationDuration+"ms");var m="";if(t.closeButton&&"function"!=typeof r&&(m='<span class="nx-close-button"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g><path fill="'+h.notiflixIconColor+'" d="M0.38 2.19l7.8 7.81 -7.8 7.81c-0.51,0.5 -0.51,1.31 -0.01,1.81 0.25,0.25 0.57,0.38 0.91,0.38 0.34,0 0.67,-0.14 0.91,-0.38l7.81 -7.81 7.81 7.81c0.24,0.24 0.57,0.38 0.91,0.38 0.34,0 0.66,-0.14 0.9,-0.38 0.51,-0.5 0.51,-1.31 0,-1.81l-7.81 -7.81 7.81 -7.81c0.51,-0.5 0.51,-1.31 0,-1.82 -0.5,-0.5 -1.31,-0.5 -1.81,0l-7.81 7.81 -7.81 -7.81c-0.5,-0.5 -1.31,-0.5 -1.81,0 -0.51,0.51 -0.51,1.32 0,1.82z"/></g></svg></span>'),t.useIcon){if(t.useFontAwesome)f.innerHTML='<i style="color:'+h.fontAwesomeIconColor+"; font-size:"+t.fontAwesomeIconSize+';" class="nx-message-icon nx-message-icon-fa '+h.fontAwesomeClassName+" "+("shadow"===t.fontAwesomeIconStyle?"nx-message-icon-fa-shadow":"nx-message-icon-fa-basic")+'"></i><span class="nx-message nx-with-icon">'+i+"</span>"+(t.closeButton?m:"");else{var g="";n===l.Success?g='<svg class="nx-message-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><g><path fill="'+h.notiflixIconColor+'" d="M20 0c11.03,0 20,8.97 20,20 0,11.03 -8.97,20 -20,20 -11.03,0 -20,-8.97 -20,-20 0,-11.03 8.97,-20 20,-20zm0 37.98c9.92,0 17.98,-8.06 17.98,-17.98 0,-9.92 -8.06,-17.98 -17.98,-17.98 -9.92,0 -17.98,8.06 -17.98,17.98 0,9.92 8.06,17.98 17.98,17.98zm-2.4 -13.29l11.52 -12.96c0.37,-0.41 1.01,-0.45 1.42,-0.08 0.42,0.37 0.46,1 0.09,1.42l-12.16 13.67c-0.19,0.22 -0.46,0.34 -0.75,0.34 -0.23,0 -0.45,-0.07 -0.63,-0.22l-7.6 -6.07c-0.43,-0.35 -0.5,-0.99 -0.16,-1.42 0.35,-0.43 0.99,-0.5 1.42,-0.16l6.85 5.48z"/></g></svg>':n===l.Failure?g='<svg class="nx-message-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><g><path fill="'+h.notiflixIconColor+'" d="M20 0c11.03,0 20,8.97 20,20 0,11.03 -8.97,20 -20,20 -11.03,0 -20,-8.97 -20,-20 0,-11.03 8.97,-20 20,-20zm0 37.98c9.92,0 17.98,-8.06 17.98,-17.98 0,-9.92 -8.06,-17.98 -17.98,-17.98 -9.92,0 -17.98,8.06 -17.98,17.98 0,9.92 8.06,17.98 17.98,17.98zm1.42 -17.98l6.13 6.12c0.39,0.4 0.39,1.04 0,1.43 -0.19,0.19 -0.45,0.29 -0.71,0.29 -0.27,0 -0.53,-0.1 -0.72,-0.29l-6.12 -6.13 -6.13 6.13c-0.19,0.19 -0.44,0.29 -0.71,0.29 -0.27,0 -0.52,-0.1 -0.71,-0.29 -0.39,-0.39 -0.39,-1.03 0,-1.43l6.13 -6.12 -6.13 -6.13c-0.39,-0.39 -0.39,-1.03 0,-1.42 0.39,-0.39 1.03,-0.39 1.42,0l6.13 6.12 6.12 -6.12c0.4,-0.39 1.04,-0.39 1.43,0 0.39,0.39 0.39,1.03 0,1.42l-6.13 6.13z"/></g></svg>':n===l.Warning?g='<svg class="nx-message-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><g><path fill="'+h.notiflixIconColor+'" d="M21.91 3.48l17.8 30.89c0.84,1.46 -0.23,3.25 -1.91,3.25l-35.6 0c-1.68,0 -2.75,-1.79 -1.91,-3.25l17.8 -30.89c0.85,-1.47 2.97,-1.47 3.82,0zm16.15 31.84l-17.8 -30.89c-0.11,-0.2 -0.41,-0.2 -0.52,0l-17.8 30.89c-0.12,0.2 0.05,0.4 0.26,0.4l35.6 0c0.21,0 0.38,-0.2 0.26,-0.4zm-19.01 -4.12l0 -1.05c0,-0.53 0.42,-0.95 0.95,-0.95 0.53,0 0.95,0.42 0.95,0.95l0 1.05c0,0.53 -0.42,0.95 -0.95,0.95 -0.53,0 -0.95,-0.42 -0.95,-0.95zm0 -4.66l0 -13.39c0,-0.52 0.42,-0.95 0.95,-0.95 0.53,0 0.95,0.43 0.95,0.95l0 13.39c0,0.53 -0.42,0.96 -0.95,0.96 -0.53,0 -0.95,-0.43 -0.95,-0.96z"/></g></svg>':n===l.Info&&(g='<svg class="nx-message-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><g><path fill="'+h.notiflixIconColor+'" d="M20 0c11.03,0 20,8.97 20,20 0,11.03 -8.97,20 -20,20 -11.03,0 -20,-8.97 -20,-20 0,-11.03 8.97,-20 20,-20zm0 37.98c9.92,0 17.98,-8.06 17.98,-17.98 0,-9.92 -8.06,-17.98 -17.98,-17.98 -9.92,0 -17.98,8.06 -17.98,17.98 0,9.92 8.06,17.98 17.98,17.98zm-0.99 -23.3c0,-0.54 0.44,-0.98 0.99,-0.98 0.55,0 0.99,0.44 0.99,0.98l0 15.86c0,0.55 -0.44,0.99 -0.99,0.99 -0.55,0 -0.99,-0.44 -0.99,-0.99l0 -15.86zm0 -5.22c0,-0.55 0.44,-0.99 0.99,-0.99 0.55,0 0.99,0.44 0.99,0.99l0 1.09c0,0.54 -0.44,0.99 -0.99,0.99 -0.55,0 -0.99,-0.45 -0.99,-0.99l0 -1.09z"/></g></svg>'),f.innerHTML=g+'<span class="nx-message nx-with-icon">'+i+"</span>"+(t.closeButton?m:"")}}else f.innerHTML='<span class="nx-message">'+i+"</span>"+(t.closeButton?m:"");if("left-bottom"===t.position||"right-bottom"===t.position){var y=e.document.getElementById(c.wrapID);y.insertBefore(f,y.firstChild)}else e.document.getElementById(c.wrapID).appendChild(f);var _=e.document.getElementById(f.id);if(_){var v,w,I=function(){_.classList.add("nx-remove");var t=e.document.getElementById(c.overlayID);t&&0>=d.childElementCount&&t.classList.add("nx-remove"),clearTimeout(v)},C=function(){if(_&&null!==_.parentNode&&_.parentNode.removeChild(_),0>=d.childElementCount&&null!==d.parentNode){d.parentNode.removeChild(d);var t=e.document.getElementById(c.overlayID);t&&null!==t.parentNode&&t.parentNode.removeChild(t)}clearTimeout(w)};if(t.closeButton&&"function"!=typeof r&&e.document.getElementById(f.id).querySelector("span.nx-close-button").addEventListener("click",function(){I();var e=setTimeout(function(){C(),clearTimeout(e)},t.cssAnimationDuration)}),("function"==typeof r||t.clickToClose)&&_.addEventListener("click",function(){"function"==typeof r&&r(),I();var e=setTimeout(function(){C(),clearTimeout(e)},t.cssAnimationDuration)}),!t.closeButton&&"function"!=typeof r){var T=function(){v=setTimeout(function(){I()},t.timeout),w=setTimeout(function(){C()},t.timeout+t.cssAnimationDuration)};T(),t.pauseOnHover&&(_.addEventListener("mouseenter",function(){_.classList.add("nx-paused"),clearTimeout(v),clearTimeout(w)}),_.addEventListener("mouseleave",function(){_.classList.remove("nx-paused"),T()}))}}if(t.showOnlyTheLastOne&&0<P)for(var N,E=e.document.querySelectorAll("[id^="+t.ID+"-]:not([id="+t.ID+"-"+P+"])"),S=0;S<E.length;S++)null!==(N=E[S]).parentNode&&N.parentNode.removeChild(N);t=k(!0,t,o)},O=function(){return'[id^=NotiflixReportWrap]{position:fixed;z-index:4002;width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;left:0;top:0;padding:10px;color:#1e1e1e;border-radius:25px;background:transparent;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}[id^=NotiflixReportWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixReportWrap]>div[class*="-overlay"]{width:100%;height:100%;left:0;top:0;background:rgba(255,255,255,.5);position:fixed;z-index:0}[id^=NotiflixReportWrap]>div.nx-report-click-to-close{cursor:pointer}[id^=NotiflixReportWrap]>div[class*="-content"]{width:320px;max-width:100%;max-height:96vh;overflow-x:hidden;overflow-y:auto;border-radius:inherit;padding:10px;-webkit-filter:drop-shadow(0 0 5px rgba(0,0,0,0.05));filter:drop-shadow(0 0 5px rgba(0, 0, 0, .05));border:1px solid rgba(0,0,0,.03);background:#f8f8f8;position:relative;z-index:1}[id^=NotiflixReportWrap]>div[class*="-content"]::-webkit-scrollbar{width:0;height:0}[id^=NotiflixReportWrap]>div[class*="-content"]::-webkit-scrollbar-thumb{background:transparent}[id^=NotiflixReportWrap]>div[class*="-content"]::-webkit-scrollbar-track{background:transparent}[id^=NotiflixReportWrap]>div[class*="-content"]>div[class$="-icon"]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:110px;height:110px;display:block;margin:6px auto 12px}[id^=NotiflixReportWrap]>div[class*="-content"]>div[class$="-icon"] svg{min-width:100%;max-width:100%;height:auto}[id^=NotiflixReportWrap]>*>h5{word-break:break-all;word-break:break-word;font-family:inherit!important;font-size:16px;font-weight:500;line-height:1.4;margin:0 0 10px;padding:0 0 10px;border-bottom:1px solid rgba(0,0,0,.1);float:left;width:100%;text-align:center}[id^=NotiflixReportWrap]>*>p{word-break:break-all;word-break:break-word;font-family:inherit!important;font-size:13px;line-height:1.4;font-weight:normal;float:left;width:100%;padding:0 10px;margin:0 0 10px}[id^=NotiflixReportWrap] a#NXReportButton{word-break:break-all;word-break:break-word;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit!important;-webkit-transition:all .25s ease-in-out;-o-transition:all .25s ease-in-out;transition:all .25s ease-in-out;cursor:pointer;float:right;padding:7px 17px;background:#32c682;font-size:14px;line-height:1.4;font-weight:500;border-radius:inherit!important;color:#fff}[id^=NotiflixReportWrap] a#NXReportButton:hover{-webkit-box-shadow:inset 0 -60px 5px -5px rgba(0,0,0,.25);box-shadow:inset 0 -60px 5px -5px rgba(0,0,0,.25)}[id^=NotiflixReportWrap].nx-rtl-on a#NXReportButton{float:left}[id^=NotiflixReportWrap]>div[class*="-overlay"].nx-with-animation{-webkit-animation:report-overlay-animation .3s ease-in-out 0s normal;animation:report-overlay-animation .3s ease-in-out 0s normal}@-webkit-keyframes report-overlay-animation{0%{opacity:0}100%{opacity:1}}@keyframes report-overlay-animation{0%{opacity:0}100%{opacity:1}}[id^=NotiflixReportWrap]>div[class*="-content"].nx-with-animation.nx-fade{-webkit-animation:report-animation-fade .3s ease-in-out 0s normal;animation:report-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes report-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes report-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixReportWrap]>div[class*="-content"].nx-with-animation.nx-zoom{-webkit-animation:report-animation-zoom .3s ease-in-out 0s normal;animation:report-animation-zoom .3s ease-in-out 0s normal}@-webkit-keyframes report-animation-zoom{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}50%{opacity:1;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes report-animation-zoom{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}50%{opacity:1;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}[id^=NotiflixReportWrap].nx-remove>div[class*="-overlay"].nx-with-animation{opacity:0;-webkit-animation:report-overlay-animation-remove .3s ease-in-out 0s normal;animation:report-overlay-animation-remove .3s ease-in-out 0s normal}@-webkit-keyframes report-overlay-animation-remove{0%{opacity:1}100%{opacity:0}}@keyframes report-overlay-animation-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixReportWrap].nx-remove>div[class*="-content"].nx-with-animation.nx-fade{opacity:0;-webkit-animation:report-animation-fade-remove .3s ease-in-out 0s normal;animation:report-animation-fade-remove .3s ease-in-out 0s normal}@-webkit-keyframes report-animation-fade-remove{0%{opacity:1}100%{opacity:0}}@keyframes report-animation-fade-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixReportWrap].nx-remove>div[class*="-content"].nx-with-animation.nx-zoom{opacity:0;-webkit-animation:report-animation-zoom-remove .3s ease-in-out 0s normal;animation:report-animation-zoom-remove .3s ease-in-out 0s normal}@-webkit-keyframes report-animation-zoom-remove{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.5;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}@keyframes report-animation-zoom-remove{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.5;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}'},L=function(t,i,r,s,o,l){if(!b("body"))return!1;n||j.Report.init({});var c,d,p,f,m,g,y,_,v={};if("object"==typeof o&&!Array.isArray(o)||"object"==typeof l&&!Array.isArray(l)){var w={};"object"==typeof o?w=o:"object"==typeof l&&(w=l),v=k(!0,n,{}),n=k(!0,n,w)}var I=n[t.toLocaleLowerCase("en")];"string"!=typeof i&&(i="Notiflix "+t),"string"!=typeof r&&(t===u.Success?r='"Do not try to become a person of success but try to become a person of value." <br><br>- Albert Einstein':t===u.Failure?r='"Failure is simply the opportunity to begin again, this time more intelligently." <br><br>- Henry Ford':t===u.Warning?r='"The peoples who want to live comfortably without producing and fatigue; they are doomed to lose their dignity, then liberty, and then independence and destiny." <br><br>- Mustafa Kemal Ataturk':t===u.Info&&(r='"Knowledge rests not upon truth alone, but upon error also." <br><br>- Carl Gustav Jung')),"string"!=typeof s&&(s="Okay"),n.plainText&&(i=x(i),r=x(r),s=x(s)),n.plainText||(i.length>n.titleMaxLength&&(i="Possible HTML Tags Error",r='The "plainText" option is "false" and the title content length is more than the "titleMaxLength" option.',s="Okay"),r.length>n.messageMaxLength&&(i="Possible HTML Tags Error",r='The "plainText" option is "false" and the message content length is more than the "messageMaxLength" option.',s="Okay"),s.length>n.buttonMaxLength&&(i="Possible HTML Tags Error",r='The "plainText" option is "false" and the button content length is more than the "buttonMaxLength" option.',s="Okay")),i.length>n.titleMaxLength&&(i=i.substring(0,n.titleMaxLength)+"..."),r.length>n.messageMaxLength&&(r=r.substring(0,n.messageMaxLength)+"..."),s.length>n.buttonMaxLength&&(s=s.substring(0,n.buttonMaxLength)+"..."),n.cssAnimation||(n.cssAnimationDuration=0);var C=e.document.createElement("div");C.id=h.ID,C.className=n.className,C.style.zIndex=n.zindex,C.style.borderRadius=n.borderRadius,C.style.fontFamily='"'+n.fontFamily+'", '+a,n.rtl&&(C.setAttribute("dir","rtl"),C.classList.add("nx-rtl-on")),C.style.display="flex",C.style.flexWrap="wrap",C.style.flexDirection="column",C.style.alignItems="center",C.style.justifyContent="center";var T="",N=!0===n.backOverlayClickToClose;n.backOverlay&&(T='<div class="'+n.className+"-overlay"+(n.cssAnimation?" nx-with-animation":"")+(N?" nx-report-click-to-close":"")+'" style="background:'+(I.backOverlayColor||n.backOverlayColor)+";animation-duration:"+n.cssAnimationDuration+'ms;"></div>');var E="";if(t===u.Success?(c=n.svgSize,d=I.svgColor,c||(c="110px"),d||(d="#32c682"),E='<svg xmlns="http://www.w3.org/2000/svg" id="NXReportSuccess" width="'+c+'" height="'+c+'" fill="'+d+'" viewBox="0 0 120 120"><style>@-webkit-keyframes NXReportSuccess1-animation{0%{-webkit-transform:translate(60px,57.7px) scale(.5,.5) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(.5,.5) translate(-60px,-57.7px)}50%,to{-webkit-transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px)}60%{-webkit-transform:translate(60px,57.7px) scale(.95,.95) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(.95,.95) translate(-60px,-57.7px)}}@keyframes NXReportSuccess1-animation{0%{-webkit-transform:translate(60px,57.7px) scale(.5,.5) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(.5,.5) translate(-60px,-57.7px)}50%,to{-webkit-transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px)}60%{-webkit-transform:translate(60px,57.7px) scale(.95,.95) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(.95,.95) translate(-60px,-57.7px)}}@-webkit-keyframes NXReportSuccess4-animation{0%{opacity:0}50%,to{opacity:1}}@keyframes NXReportSuccess4-animation{0%{opacity:0}50%,to{opacity:1}}@-webkit-keyframes NXReportSuccess3-animation{0%{opacity:0}40%,to{opacity:1}}@keyframes NXReportSuccess3-animation{0%{opacity:0}40%,to{opacity:1}}@-webkit-keyframes NXReportSuccess2-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportSuccess2-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}#NXReportSuccess *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g style="-webkit-animation-name:NXReportSuccess2-animation;animation-name:NXReportSuccess2-animation;-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)"><path d="M60 115.38C29.46 115.38 4.62 90.54 4.62 60 4.62 29.46 29.46 4.62 60 4.62c30.54 0 55.38 24.84 55.38 55.38 0 30.54-24.84 55.38-55.38 55.38zM60 0C26.92 0 0 26.92 0 60s26.92 60 60 60 60-26.92 60-60S93.08 0 60 0z" style="-webkit-animation-name:NXReportSuccess3-animation;animation-name:NXReportSuccess3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g><g style="-webkit-animation-name:NXReportSuccess1-animation;animation-name:NXReportSuccess1-animation;-webkit-transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px);-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)"><path d="M88.27 35.39L52.8 75.29 31.43 58.2c-.98-.81-2.44-.63-3.24.36-.79.99-.63 2.44.36 3.24l23.08 18.46c.43.34.93.51 1.44.51.64 0 1.27-.26 1.74-.78l36.91-41.53a2.3 2.3 0 0 0-.19-3.26c-.95-.86-2.41-.77-3.26.19z" style="-webkit-animation-name:NXReportSuccess4-animation;animation-name:NXReportSuccess4-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g></svg>'):t===u.Failure?(p=n.svgSize,f=I.svgColor,p||(p="110px"),f||(f="#ff5549"),E='<svg xmlns="http://www.w3.org/2000/svg" id="NXReportFailure" width="'+p+'" height="'+p+'" fill="'+f+'" viewBox="0 0 120 120"><style>@-webkit-keyframes NXReportFailure2-animation{0%{opacity:0}40%,to{opacity:1}}@keyframes NXReportFailure2-animation{0%{opacity:0}40%,to{opacity:1}}@-webkit-keyframes NXReportFailure1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportFailure1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@-webkit-keyframes NXReportFailure3-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}50%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportFailure3-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}50%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@-webkit-keyframes NXReportFailure4-animation{0%{opacity:0}50%,to{opacity:1}}@keyframes NXReportFailure4-animation{0%{opacity:0}50%,to{opacity:1}}#NXReportFailure *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g style="-webkit-animation-name:NXReportFailure1-animation;animation-name:NXReportFailure1-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M4.35 34.95c0-16.82 13.78-30.6 30.6-30.6h50.1c16.82 0 30.6 13.78 30.6 30.6v50.1c0 16.82-13.78 30.6-30.6 30.6h-50.1c-16.82 0-30.6-13.78-30.6-30.6v-50.1zM34.95 120h50.1c19.22 0 34.95-15.73 34.95-34.95v-50.1C120 15.73 104.27 0 85.05 0h-50.1C15.73 0 0 15.73 0 34.95v50.1C0 104.27 15.73 120 34.95 120z" style="-webkit-animation-name:NXReportFailure2-animation;animation-name:NXReportFailure2-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g><g style="-webkit-animation-name:NXReportFailure3-animation;animation-name:NXReportFailure3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M82.4 37.6c-.9-.9-2.37-.9-3.27 0L60 56.73 40.86 37.6a2.306 2.306 0 0 0-3.26 3.26L56.73 60 37.6 79.13c-.9.9-.9 2.37 0 3.27.45.45 1.04.68 1.63.68.59 0 1.18-.23 1.63-.68L60 63.26 79.13 82.4c.45.45 1.05.68 1.64.68.58 0 1.18-.23 1.63-.68.9-.9.9-2.37 0-3.27L63.26 60 82.4 40.86c.9-.91.9-2.36 0-3.26z" style="-webkit-animation-name:NXReportFailure4-animation;animation-name:NXReportFailure4-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g></svg>'):t===u.Warning?(m=n.svgSize,g=I.svgColor,m||(m="110px"),g||(g="#eebf31"),E='<svg xmlns="http://www.w3.org/2000/svg" id="NXReportWarning" width="'+m+'" height="'+m+'" fill="'+g+'" viewBox="0 0 120 120"><style>@-webkit-keyframes NXReportWarning2-animation{0%{opacity:0}40%,to{opacity:1}}@keyframes NXReportWarning2-animation{0%{opacity:0}40%,to{opacity:1}}@-webkit-keyframes NXReportWarning1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportWarning1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@-webkit-keyframes NXReportWarning3-animation{0%{-webkit-transform:translate(60px,66.6px) scale(.5,.5) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(.5,.5) translate(-60px,-66.6px)}50%,to{-webkit-transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px)}60%{-webkit-transform:translate(60px,66.6px) scale(.95,.95) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(.95,.95) translate(-60px,-66.6px)}}@keyframes NXReportWarning3-animation{0%{-webkit-transform:translate(60px,66.6px) scale(.5,.5) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(.5,.5) translate(-60px,-66.6px)}50%,to{-webkit-transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px)}60%{-webkit-transform:translate(60px,66.6px) scale(.95,.95) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(.95,.95) translate(-60px,-66.6px)}}@-webkit-keyframes NXReportWarning4-animation{0%{opacity:0}50%,to{opacity:1}}@keyframes NXReportWarning4-animation{0%{opacity:0}50%,to{opacity:1}}#NXReportWarning *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g style="-webkit-animation-name:NXReportWarning1-animation;animation-name:NXReportWarning1-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M115.46 106.15l-54.04-93.8c-.61-1.06-2.23-1.06-2.84 0l-54.04 93.8c-.62 1.07.21 2.29 1.42 2.29h108.08c1.21 0 2.04-1.22 1.42-2.29zM65.17 10.2l54.04 93.8c2.28 3.96-.65 8.78-5.17 8.78H5.96c-4.52 0-7.45-4.82-5.17-8.78l54.04-93.8c2.28-3.95 8.03-4 10.34 0z" style="-webkit-animation-name:NXReportWarning2-animation;animation-name:NXReportWarning2-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g><g style="-webkit-animation-name:NXReportWarning3-animation;animation-name:NXReportWarning3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px)"><path d="M57.83 94.01c0 1.2.97 2.17 2.17 2.17s2.17-.97 2.17-2.17v-3.2c0-1.2-.97-2.17-2.17-2.17s-2.17.97-2.17 2.17v3.2zm0-14.15c0 1.2.97 2.17 2.17 2.17s2.17-.97 2.17-2.17V39.21c0-1.2-.97-2.17-2.17-2.17s-2.17.97-2.17 2.17v40.65z" style="-webkit-animation-name:NXReportWarning4-animation;animation-name:NXReportWarning4-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g></svg>'):t===u.Info&&(y=n.svgSize,_=I.svgColor,y||(y="110px"),_||(_="#26c0d3"),E='<svg xmlns="http://www.w3.org/2000/svg" id="NXReportInfo" width="'+y+'" height="'+y+'" fill="'+_+'" viewBox="0 0 120 120"><style>@-webkit-keyframes NXReportInfo4-animation{0%{opacity:0}50%,to{opacity:1}}@keyframes NXReportInfo4-animation{0%{opacity:0}50%,to{opacity:1}}@-webkit-keyframes NXReportInfo3-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}50%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportInfo3-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}50%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@-webkit-keyframes NXReportInfo2-animation{0%{opacity:0}40%,to{opacity:1}}@keyframes NXReportInfo2-animation{0%{opacity:0}40%,to{opacity:1}}@-webkit-keyframes NXReportInfo1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportInfo1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}#NXReportInfo *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g style="-webkit-animation-name:NXReportInfo1-animation;animation-name:NXReportInfo1-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M60 115.38C29.46 115.38 4.62 90.54 4.62 60 4.62 29.46 29.46 4.62 60 4.62c30.54 0 55.38 24.84 55.38 55.38 0 30.54-24.84 55.38-55.38 55.38zM60 0C26.92 0 0 26.92 0 60s26.92 60 60 60 60-26.92 60-60S93.08 0 60 0z" style="-webkit-animation-name:NXReportInfo2-animation;animation-name:NXReportInfo2-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g><g style="-webkit-animation-name:NXReportInfo3-animation;animation-name:NXReportInfo3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M57.75 43.85c0-1.24 1.01-2.25 2.25-2.25s2.25 1.01 2.25 2.25v48.18c0 1.24-1.01 2.25-2.25 2.25s-2.25-1.01-2.25-2.25V43.85zm0-15.88c0-1.24 1.01-2.25 2.25-2.25s2.25 1.01 2.25 2.25v3.32c0 1.25-1.01 2.25-2.25 2.25s-2.25-1-2.25-2.25v-3.32z" style="-webkit-animation-name:NXReportInfo4-animation;animation-name:NXReportInfo4-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g></svg>'),C.innerHTML=T+'<div class="'+n.className+"-content"+(n.cssAnimation?" nx-with-animation ":"")+" nx-"+n.cssAnimationStyle+'" style="width:'+n.width+"; background:"+n.backgroundColor+"; animation-duration:"+n.cssAnimationDuration+'ms;"><div style="width:'+n.svgSize+"; height:"+n.svgSize+';" class="'+n.className+'-icon">'+E+'</div><h5 class="'+n.className+'-title" style="font-weight:500; font-size:'+n.titleFontSize+"; color:"+I.titleColor+';">'+i+'</h5><p class="'+n.className+'-message" style="font-size:'+n.messageFontSize+"; color:"+I.messageColor+';">'+r+'</p><a id="NXReportButton" class="'+n.className+'-button" style="font-weight:500; font-size:'+n.buttonFontSize+"; background:"+I.buttonBackground+"; color:"+I.buttonColor+';">'+s+"</a></div>",!e.document.getElementById(C.id)){e.document.body.appendChild(C);var S=function(){var t=e.document.getElementById(C.id);t.classList.add("nx-remove");var i=setTimeout(function(){null!==t.parentNode&&t.parentNode.removeChild(t),clearTimeout(i)},n.cssAnimationDuration)};e.document.getElementById("NXReportButton").addEventListener("click",function(){"function"==typeof o&&o(),S()}),T&&N&&e.document.querySelector(".nx-report-click-to-close").addEventListener("click",function(){S()})}n=k(!0,n,v)},D=function(){return'[id^=NotiflixConfirmWrap]{position:fixed;z-index:4003;width:100%;height:100%;left:0;top:0;padding:10px;-webkit-box-sizing:border-box;box-sizing:border-box;background:transparent;font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}[id^=NotiflixConfirmWrap].nx-position-center-top{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start}[id^=NotiflixConfirmWrap].nx-position-center-bottom{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}[id^=NotiflixConfirmWrap].nx-position-left-top{-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start}[id^=NotiflixConfirmWrap].nx-position-left-center{-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start}[id^=NotiflixConfirmWrap].nx-position-left-bottom{-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}[id^=NotiflixConfirmWrap].nx-position-right-top{-webkit-box-align:end;-webkit-align-items:flex-end;-ms-flex-align:end;align-items:flex-end;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start}[id^=NotiflixConfirmWrap].nx-position-right-center{-webkit-box-align:end;-webkit-align-items:flex-end;-ms-flex-align:end;align-items:flex-end}[id^=NotiflixConfirmWrap].nx-position-right-bottom{-webkit-box-align:end;-webkit-align-items:flex-end;-ms-flex-align:end;align-items:flex-end;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}[id^=NotiflixConfirmWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixConfirmWrap]>div[class*="-overlay"]{width:100%;height:100%;left:0;top:0;background:rgba(255,255,255,.5);position:fixed;z-index:0}[id^=NotiflixConfirmWrap]>div[class*="-overlay"].nx-with-animation{-webkit-animation:confirm-overlay-animation .3s ease-in-out 0s normal;animation:confirm-overlay-animation .3s ease-in-out 0s normal}@-webkit-keyframes confirm-overlay-animation{0%{opacity:0}100%{opacity:1}}@keyframes confirm-overlay-animation{0%{opacity:0}100%{opacity:1}}[id^=NotiflixConfirmWrap].nx-remove>div[class*="-overlay"].nx-with-animation{opacity:0;-webkit-animation:confirm-overlay-animation-remove .3s ease-in-out 0s normal;animation:confirm-overlay-animation-remove .3s ease-in-out 0s normal}@-webkit-keyframes confirm-overlay-animation-remove{0%{opacity:1}100%{opacity:0}}@keyframes confirm-overlay-animation-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixConfirmWrap]>div[class*="-content"]{width:300px;max-width:100%;max-height:96vh;overflow-x:hidden;overflow-y:auto;border-radius:25px;padding:10px;margin:0;-webkit-filter:drop-shadow(0 0 5px rgba(0,0,0,0.05));filter:drop-shadow(0 0 5px rgba(0, 0, 0, .05));background:#f8f8f8;color:#1e1e1e;position:relative;z-index:1;text-align:center}[id^=NotiflixConfirmWrap]>div[class*="-content"]::-webkit-scrollbar{width:0;height:0}[id^=NotiflixConfirmWrap]>div[class*="-content"]::-webkit-scrollbar-thumb{background:transparent}[id^=NotiflixConfirmWrap]>div[class*="-content"]::-webkit-scrollbar-track{background:transparent}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]{float:left;width:100%;text-align:inherit}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>h5{float:left;width:100%;margin:0;padding:0 0 10px;border-bottom:1px solid rgba(0,0,0,.1);color:#32c682;font-family:inherit!important;font-size:16px;line-height:1.4;font-weight:500;text-align:inherit}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div{font-family:inherit!important;margin:15px 0 20px;padding:0 10px;float:left;width:100%;font-size:14px;line-height:1.4;font-weight:normal;color:inherit;text-align:inherit}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div{font-family:inherit!important;float:left;width:100%;margin:15px 0 0;padding:0}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div>input{font-family:inherit!important;float:left;width:100%;height:40px;margin:0;padding:0 15px;border:1px solid rgba(0,0,0,.1);border-radius:25px;font-size:14px;font-weight:normal;line-height:1;-webkit-transition:all .25s ease-in-out;-o-transition:all .25s ease-in-out;transition:all .25s ease-in-out;text-align:left}[id^=NotiflixConfirmWrap].nx-rtl-on>div[class*="-content"]>div[class*="-head"]>div>div>input{text-align:right}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div>input:hover{border-color:rgba(0,0,0,.1)}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div>input:focus{border-color:rgba(0,0,0,.3)}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div>input.nx-validation-failure{border-color:#ff5549}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div>input.nx-validation-success{border-color:#32c682}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:inherit;float:left;width:100%;text-align:inherit}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]>a{cursor:pointer;font-family:inherit!important;-webkit-transition:all .25s ease-in-out;-o-transition:all .25s ease-in-out;transition:all .25s ease-in-out;float:left;width:48%;padding:9px 5px;border-radius:inherit!important;font-weight:500;font-size:15px;line-height:1.4;color:#f8f8f8;text-align:inherit}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]>a.nx-confirm-button-ok{margin:0 2% 0 0;background:#32c682}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]>a.nx-confirm-button-cancel{margin:0 0 0 2%;background:#a9a9a9}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]>a.nx-full{margin:0;width:100%}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]>a:hover{-webkit-box-shadow:inset 0 -60px 5px -5px rgba(0,0,0,.25);box-shadow:inset 0 -60px 5px -5px rgba(0,0,0,.25)}[id^=NotiflixConfirmWrap].nx-rtl-on>div[class*="-content"]>div[class*="-buttons"],[id^=NotiflixConfirmWrap].nx-rtl-on>div[class*="-content"]>div[class*="-buttons"]>a{-webkit-transform:rotateY(180deg);transform:rotateY(180deg)}[id^=NotiflixConfirmWrap].nx-with-animation.nx-fade>div[class*="-content"]{-webkit-animation:confirm-animation-fade .3s ease-in-out 0s normal;animation:confirm-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes confirm-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes confirm-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixConfirmWrap].nx-with-animation.nx-zoom>div[class*="-content"]{-webkit-animation:confirm-animation-zoom .3s ease-in-out 0s normal;animation:confirm-animation-zoom .3s ease-in-out 0s normal}@-webkit-keyframes confirm-animation-zoom{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}50%{opacity:1;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes confirm-animation-zoom{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}50%{opacity:1;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}[id^=NotiflixConfirmWrap].nx-with-animation.nx-fade.nx-remove>div[class*="-content"]{opacity:0;-webkit-animation:confirm-animation-fade-remove .3s ease-in-out 0s normal;animation:confirm-animation-fade-remove .3s ease-in-out 0s normal}@-webkit-keyframes confirm-animation-fade-remove{0%{opacity:1}100%{opacity:0}}@keyframes confirm-animation-fade-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixConfirmWrap].nx-with-animation.nx-zoom.nx-remove>div[class*="-content"]{opacity:0;-webkit-animation:confirm-animation-zoom-remove .3s ease-in-out 0s normal;animation:confirm-animation-zoom-remove .3s ease-in-out 0s normal}@-webkit-keyframes confirm-animation-zoom-remove{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.5;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}@keyframes confirm-animation-zoom-remove{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.5;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}'},M=function(t,n,r,s,o,l,c,u,h){if(!b("body"))return!1;i||j.Confirm.init({});var f=k(!0,i,{});"object"!=typeof h||Array.isArray(h)||(i=k(!0,i,h)),"string"!=typeof n&&(n="Notiflix Confirm"),"string"!=typeof r&&(r="Do you agree with me?"),"string"!=typeof o&&(o="Yes"),"string"!=typeof l&&(l="No"),"function"!=typeof c&&(c=void 0),"function"!=typeof u&&(u=void 0),i.plainText&&(n=x(n),r=x(r),o=x(o),l=x(l)),i.plainText||(n.length>i.titleMaxLength&&(n="Possible HTML Tags Error",r='The "plainText" option is "false" and the title content length is more than "titleMaxLength" option.',o="Okay",l="..."),r.length>i.messageMaxLength&&(n="Possible HTML Tags Error",r='The "plainText" option is "false" and the message content length is more than "messageMaxLength" option.',o="Okay",l="..."),(o.length||l.length)>i.buttonsMaxLength&&(n="Possible HTML Tags Error",r='The "plainText" option is "false" and the buttons content length is more than "buttonsMaxLength" option.',o="Okay",l="...")),n.length>i.titleMaxLength&&(n=n.substring(0,i.titleMaxLength)+"..."),r.length>i.messageMaxLength&&(r=r.substring(0,i.messageMaxLength)+"..."),o.length>i.buttonsMaxLength&&(o=o.substring(0,i.buttonsMaxLength)+"..."),l.length>i.buttonsMaxLength&&(l=l.substring(0,i.buttonsMaxLength)+"..."),i.cssAnimation||(i.cssAnimationDuration=0);var m=e.document.createElement("div");m.id=p.ID,m.className=i.className+(i.cssAnimation?" nx-with-animation nx-"+i.cssAnimationStyle:""),m.style.zIndex=i.zindex,m.style.padding=i.distance,i.rtl&&(m.setAttribute("dir","rtl"),m.classList.add("nx-rtl-on"));var g="string"==typeof i.position?i.position.trim():"center";m.classList.add("nx-position-"+g),m.style.fontFamily='"'+i.fontFamily+'", '+a;var y="";i.backOverlay&&(y='<div class="'+i.className+"-overlay"+(i.cssAnimation?" nx-with-animation":"")+'" style="background:'+i.backOverlayColor+";animation-duration:"+i.cssAnimationDuration+'ms;"></div>');var _="";"function"==typeof c&&(_='<a id="NXConfirmButtonCancel" class="nx-confirm-button-cancel" style="color:'+i.cancelButtonColor+";background:"+i.cancelButtonBackground+";font-size:"+i.buttonsFontSize+';">'+l+"</a>");var v="",w=null,I=void 0;if(t===d.Ask||t===d.Prompt){w=s||"";var C=t===d.Ask?Math.ceil(1.5*w.length):200<w.length?Math.ceil(1.5*w.length):250;v='<div><input id="NXConfirmValidationInput" type="text" '+(t===d.Prompt?'value="'+w+'"':"")+' maxlength="'+C+'" style="font-size:'+i.messageFontSize+";border-radius: "+i.borderRadius+';" autocomplete="off" spellcheck="false" autocapitalize="none" /></div>'}if(m.innerHTML=y+'<div class="'+i.className+'-content" style="width:'+i.width+"; background:"+i.backgroundColor+"; animation-duration:"+i.cssAnimationDuration+"ms; border-radius: "+i.borderRadius+';"><div class="'+i.className+'-head"><h5 style="color:'+i.titleColor+";font-size:"+i.titleFontSize+';">'+n+'</h5><div style="color:'+i.messageColor+";font-size:"+i.messageFontSize+';">'+r+v+'</div></div><div class="'+i.className+'-buttons"><a id="NXConfirmButtonOk" class="nx-confirm-button-ok'+("function"==typeof c?"":" nx-full")+'" style="color:'+i.okButtonColor+";background:"+i.okButtonBackground+";font-size:"+i.buttonsFontSize+';">'+o+"</a>"+_+"</div></div>",!e.document.getElementById(m.id)){e.document.body.appendChild(m);var T=e.document.getElementById(m.id),N=e.document.getElementById("NXConfirmButtonOk"),E=e.document.getElementById("NXConfirmValidationInput");E&&(E.focus(),E.setSelectionRange(0,(E.value||"").length),E.addEventListener("keyup",function(e){var n=e.target.value;t===d.Ask&&n!==w?(e.preventDefault(),E.classList.add("nx-validation-failure"),E.classList.remove("nx-validation-success")):(t===d.Ask&&(E.classList.remove("nx-validation-failure"),E.classList.add("nx-validation-success")),("enter"===(e.key||"").toLocaleLowerCase("en")||13===e.keyCode)&&N.dispatchEvent(new Event("click")))})),N.addEventListener("click",function(e){if(t===d.Ask&&w&&E){if((E.value||"").toString()!==w)return E.focus(),E.classList.add("nx-validation-failure"),e.stopPropagation(),e.preventDefault(),e.returnValue=!1,e.cancelBubble=!0,!1;E.classList.remove("nx-validation-failure")}"function"==typeof c&&(t===d.Prompt&&E&&(I=E.value||""),c(I)),T.classList.add("nx-remove");var n=setTimeout(function(){null!==T.parentNode&&(T.parentNode.removeChild(T),clearTimeout(n))},i.cssAnimationDuration)}),"function"==typeof c&&e.document.getElementById("NXConfirmButtonCancel").addEventListener("click",function(){"function"==typeof u&&(t===d.Prompt&&E&&(I=E.value||""),u(I)),T.classList.add("nx-remove");var e=setTimeout(function(){null!==T.parentNode&&(T.parentNode.removeChild(T),clearTimeout(e))},i.cssAnimationDuration)})}i=k(!0,i,f)},F=function(){return'[id^=NotiflixLoadingWrap]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:fixed;z-index:4000;width:100%;height:100%;left:0;top:0;right:0;bottom:0;margin:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;background:rgba(0,0,0,.8);font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}[id^=NotiflixLoadingWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixLoadingWrap].nx-loading-click-to-close{cursor:pointer}[id^=NotiflixLoadingWrap]>div[class*="-icon"]{width:60px;height:60px;position:relative;-webkit-transition:top .2s ease-in-out;-o-transition:top .2s ease-in-out;transition:top .2s ease-in-out;margin:0 auto}[id^=NotiflixLoadingWrap]>div[class*="-icon"] img,[id^=NotiflixLoadingWrap]>div[class*="-icon"] svg{max-width:unset;max-height:unset;width:100%;height:auto;position:absolute;left:0;top:0}[id^=NotiflixLoadingWrap]>p{position:relative;margin:10px auto 0;font-family:inherit!important;font-weight:normal;font-size:15px;line-height:1.4;padding:0 10px;width:100%;text-align:center}[id^=NotiflixLoadingWrap].nx-with-animation{-webkit-animation:loading-animation-fade .3s ease-in-out 0s normal;animation:loading-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes loading-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes loading-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixLoadingWrap].nx-with-animation.nx-remove{opacity:0;-webkit-animation:loading-animation-fade-remove .3s ease-in-out 0s normal;animation:loading-animation-fade-remove .3s ease-in-out 0s normal}@-webkit-keyframes loading-animation-fade-remove{0%{opacity:1}100%{opacity:0}}@keyframes loading-animation-fade-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixLoadingWrap]>p.nx-loading-message-new{-webkit-animation:loading-new-message-fade .3s ease-in-out 0s normal;animation:loading-new-message-fade .3s ease-in-out 0s normal}@-webkit-keyframes loading-new-message-fade{0%{opacity:0}100%{opacity:1}}@keyframes loading-new-message-fade{0%{opacity:0}100%{opacity:1}}'},z=function(t,n,i,s,o){if(!b("body"))return!1;r||j.Loading.init({});var l=k(!0,r,{});if("object"==typeof n&&!Array.isArray(n)||"object"==typeof i&&!Array.isArray(i)){var c={};"object"==typeof n?c=n:"object"==typeof i&&(c=i),r=k(!0,r,c)}var u="";if("string"==typeof n&&0<n.length&&(u=n),s){u=u.length>r.messageMaxLength?x(u).toString().substring(0,r.messageMaxLength)+"...":x(u).toString();var h,d,p="";0<u.length&&(p='<p id="'+r.messageID+'" class="nx-loading-message" style="color:'+r.messageColor+";font-size:"+r.messageFontSize+';">'+u+"</p>"),r.cssAnimation||(r.cssAnimationDuration=0);var g="";if(t===f.Standard)g=I(r.svgSize,r.svgColor);else if(t===f.Hourglass)g=C(r.svgSize,r.svgColor);else if(t===f.Circle)g=T(r.svgSize,r.svgColor);else if(t===f.Arrows)g=N(r.svgSize,r.svgColor);else if(t===f.Dots)g=E(r.svgSize,r.svgColor);else if(t===f.Pulse)g=S(r.svgSize,r.svgColor);else if(t===f.Custom&&null!==r.customSvgCode&&null===r.customSvgUrl)g=r.customSvgCode||"";else if(t===f.Custom&&null!==r.customSvgUrl&&null===r.customSvgCode)g='<img class="nx-custom-loading-icon" width="'+r.svgSize+'" height="'+r.svgSize+'" src="'+r.customSvgUrl+'" alt="Notiflix">';else{if(t===f.Custom&&(null===r.customSvgUrl||null===r.customSvgCode))return _('You have to set a static SVG url to "customSvgUrl" option to use Loading Custom.'),!1;(h=r.svgSize)||(h="60px"),g='<svg xmlns="http://www.w3.org/2000/svg" id="NXLoadingNotiflixLib" width="'+h+'" height="'+h+'" viewBox="0 0 200 200"><defs><style>@keyframes notiflix-n{0%{stroke-dashoffset:1000}to{stroke-dashoffset:0}}@keyframes notiflix-x{0%{stroke-dashoffset:1000}to{stroke-dashoffset:0}}@keyframes notiflix-dot{0%,to{stroke-width:0}50%{stroke-width:12}}.nx-icon-line{stroke:#f8f8f8;stroke-width:12;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:22;fill:none}</style></defs><path d="M47.97 135.05a6.5 6.5 0 1 1 0 13 6.5 6.5 0 0 1 0-13z" style="animation-name:notiflix-dot;animation-timing-function:ease-in-out;animation-duration:1.25s;animation-iteration-count:infinite;animation-direction:normal" fill="'+(d="#32c682")+'" stroke="'+d+'" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="22" stroke-width="12"/><path class="nx-icon-line" d="M10.14 144.76V87.55c0-5.68-4.54-41.36 37.83-41.36 42.36 0 37.82 35.68 37.82 41.36v57.21" style="animation-name:notiflix-n;animation-timing-function:linear;animation-duration:2.5s;animation-delay:0s;animation-iteration-count:infinite;animation-direction:normal" stroke-dasharray="500"/><path class="nx-icon-line" d="M115.06 144.49c24.98-32.68 49.96-65.35 74.94-98.03M114.89 46.6c25.09 32.58 50.19 65.17 75.29 97.75" style="animation-name:notiflix-x;animation-timing-function:linear;animation-duration:2.5s;animation-delay:.2s;animation-iteration-count:infinite;animation-direction:normal" stroke-dasharray="500"/></svg>'}var y=parseInt((r.svgSize||"").replace(/[^0-9]/g,"")),v=e.innerWidth,w=y>=v?v-40+"px":y+"px",R='<div style="width:'+w+"; height:"+w+';" class="'+r.className+"-icon"+(0<u.length?" nx-with-message":"")+'">'+g+"</div>",P=e.document.createElement("div");P.id=m.ID,P.className=r.className+(r.cssAnimation?" nx-with-animation":"")+(r.clickToClose?" nx-loading-click-to-close":""),P.style.zIndex=r.zindex,P.style.background=r.backgroundColor,P.style.animationDuration=r.cssAnimationDuration+"ms",P.style.fontFamily='"'+r.fontFamily+'", '+a,P.style.display="flex",P.style.flexWrap="wrap",P.style.flexDirection="column",P.style.alignItems="center",P.style.justifyContent="center",r.rtl&&(P.setAttribute("dir","rtl"),P.classList.add("nx-rtl-on")),P.innerHTML=R+p,!e.document.getElementById(P.id)&&(e.document.body.appendChild(P),r.clickToClose)&&e.document.getElementById(P.id).addEventListener("click",function(){P.classList.add("nx-remove");var e=setTimeout(function(){null!==P.parentNode&&(P.parentNode.removeChild(P),clearTimeout(e))},r.cssAnimationDuration)})}else if(e.document.getElementById(m.ID))var A=e.document.getElementById(m.ID),O=setTimeout(function(){A.classList.add("nx-remove");var e=setTimeout(function(){null!==A.parentNode&&(A.parentNode.removeChild(A),clearTimeout(e))},r.cssAnimationDuration);clearTimeout(O)},o);r=k(!0,r,l)},W=function(t){"string"!=typeof t&&(t="");var n=e.document.getElementById(m.ID);if(n){if(0<t.length){t=t.length>r.messageMaxLength?x(t).substring(0,r.messageMaxLength)+"...":x(t);var i=n.getElementsByTagName("p")[0];if(i)i.innerHTML=t;else{var s=e.document.createElement("p");s.id=r.messageID,s.className="nx-loading-message nx-loading-message-new",s.style.color=r.messageColor,s.style.fontSize=r.messageFontSize,s.innerHTML=t,n.appendChild(s)}}else _("Where is the new message?")}},U=function(){return'[id^=NotiflixBlockWrap]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1000;font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;background:rgba(255,255,255,.9);text-align:center;animation-duration:.4s;width:100%;height:100%;left:0;top:0;border-radius:inherit;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}[id^=NotiflixBlockWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixBlockWrap]>span[class*="-icon"]{display:block;width:45px;height:45px;position:relative;margin:0 auto}[id^=NotiflixBlockWrap]>span[class*="-icon"] svg{width:inherit;height:inherit}[id^=NotiflixBlockWrap]>span[class*="-message"]{position:relative;display:block;width:100%;margin:10px auto 0;padding:0 10px;font-family:inherit!important;font-weight:normal;font-size:14px;line-height:1.4}[id^=NotiflixBlockWrap].nx-with-animation{-webkit-animation:block-animation-fade .3s ease-in-out 0s normal;animation:block-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes block-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes block-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixBlockWrap].nx-with-animation.nx-remove{opacity:0;-webkit-animation:block-animation-fade-remove .3s ease-in-out 0s normal;animation:block-animation-fade-remove .3s ease-in-out 0s normal}@-webkit-keyframes block-animation-fade-remove{0%{opacity:1}100%{opacity:0}}@keyframes block-animation-fade-remove{0%{opacity:1}100%{opacity:0}}'},B=0,q=function(t,n,i,r,o,l){if(Array.isArray(i)){if(1>i.length)return _("Array of HTMLElements should contains at least one HTMLElement."),!1;R=i}else if(Object.prototype.isPrototypeOf.call(NodeList.prototype,i)){if(1>i.length)return _("NodeListOf<HTMLElement> should contains at least one HTMLElement."),!1;R=Array.prototype.slice.call(i)}else{if("string"!=typeof i||1>(i||"").length||1===(i||"").length&&("#"===(i||"")[0]||"."===(i||"")[0]))return _("The selector parameter must be a string and matches a specified CSS selector(s)."),!1;var c=e.document.querySelectorAll(i);if(1>c.length)return _('You called the "Notiflix.Block..." function with "'+i+'" selector, but there is no such element(s) in the document.'),!1;R=c}s||j.Block.init({});var u=k(!0,s,{});if("object"==typeof r&&!Array.isArray(r)||"object"==typeof o&&!Array.isArray(o)){var h={};"object"==typeof r?h=r:"object"==typeof o&&(h=o),s=k(!0,s,h)}var d="";"string"==typeof r&&0<r.length&&(d=r),s.cssAnimation||(s.cssAnimationDuration=0);var p=y.className;"string"==typeof s.className&&(p=s.className.trim());var f="number"==typeof s.querySelectorLimit?s.querySelectorLimit:200,m=(R||[]).length>=f?f:R.length,w="nx-block-temporary-position";if(t){for(var R,P,A=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr","html","head","title","script","style","iframe"],O=0;O<m;O++)if(P=R[O]){if(-1<A.indexOf(P.tagName.toLocaleLowerCase("en")))break;var L=P.querySelectorAll("[id^="+y.ID+"]");if(1>L.length){var D="";n&&(D=n===g.Hourglass?C(s.svgSize,s.svgColor):n===g.Circle?T(s.svgSize,s.svgColor):n===g.Arrows?N(s.svgSize,s.svgColor):n===g.Dots?E(s.svgSize,s.svgColor):n===g.Pulse?S(s.svgSize,s.svgColor):I(s.svgSize,s.svgColor));var M='<span class="'+p+'-icon" style="width:'+s.svgSize+";height:"+s.svgSize+';">'+D+"</span>",F="";0<d.length&&(d=d.length>s.messageMaxLength?x(d).substring(0,s.messageMaxLength)+"...":x(d),F='<span style="font-size:'+s.messageFontSize+";color:"+s.messageColor+';" class="'+p+'-message">'+d+"</span>"),B++;var z=e.document.createElement("div");z.id=y.ID+"-"+B,z.className=p+(s.cssAnimation?" nx-with-animation":""),z.style.position=s.position,z.style.zIndex=s.zindex,z.style.background=s.backgroundColor,z.style.animationDuration=s.cssAnimationDuration+"ms",z.style.fontFamily='"'+s.fontFamily+'", '+a,z.style.display="flex",z.style.flexWrap="wrap",z.style.flexDirection="column",z.style.alignItems="center",z.style.justifyContent="center",s.rtl&&(z.setAttribute("dir","rtl"),z.classList.add("nx-rtl-on")),z.innerHTML=M+F;var W=e.getComputedStyle(P).getPropertyValue("position"),U="string"==typeof W?W.toLocaleLowerCase("en"):"relative",q=Math.round(1.25*parseInt(s.svgSize))+40,H=P.offsetHeight||0,V="";q>H&&(V="min-height:"+q+"px;");var $="";$=P.getAttribute("id")?"#"+P.getAttribute("id"):P.classList[0]?"."+P.classList[0]:(P.tagName||"").toLocaleLowerCase("en");var K="",X=-1>=["absolute","relative","fixed","sticky"].indexOf(U);if(X||0<V.length){if(!b("head"))return!1;X&&(K="position:relative!important;");var G='<style id="Style-'+y.ID+"-"+B+'">'+$+"."+w+"{"+K+V+"}</style>",Y=e.document.createRange();Y.selectNode(e.document.head);var Q=Y.createContextualFragment(G);e.document.head.appendChild(Q),P.classList.add(w)}P.appendChild(z)}}}else var J=function(t){var n=setTimeout(function(){null!==t.parentNode&&t.parentNode.removeChild(t);var i=t.getAttribute("id"),r=e.document.getElementById("Style-"+i);r&&null!==r.parentNode&&r.parentNode.removeChild(r),clearTimeout(n)},s.cssAnimationDuration)},Z=function(e){if(e&&0<e.length)for(var t,n=0;n<e.length;n++)(t=e[n])&&(t.classList.add("nx-remove"),J(t));else"string"==typeof i?v('"Notiflix.Block.remove();" function called with "'+i+'" selector, but this selector does not have a "Block" element to remove.'):v('"Notiflix.Block.remove();" function called with "'+i+'", but this "Array<HTMLElement>" or "NodeListOf<HTMLElement>" does not have a "Block" element to remove.')},ee=function(e){var t=setTimeout(function(){e.classList.remove(w),clearTimeout(t)},s.cssAnimationDuration+300)},et=setTimeout(function(){for(var e,t=0;t<m;t++)(e=R[t])&&(ee(e),Z(L=e.querySelectorAll("[id^="+y.ID+"]")));clearTimeout(et)},l);s=k(!0,s,u)},j={Notify:{init:function(e){t=k(!0,c,e),w(R,"NotiflixNotifyInternalCSS")},merge:function(e){return t?void(t=k(!0,t,e)):(_("You have to initialize the Notify module before call Merge function."),!1)},success:function(e,t,n){A(l.Success,e,t,n)},failure:function(e,t,n){A(l.Failure,e,t,n)},warning:function(e,t,n){A(l.Warning,e,t,n)},info:function(e,t,n){A(l.Info,e,t,n)}},Report:{init:function(e){n=k(!0,h,e),w(O,"NotiflixReportInternalCSS")},merge:function(e){return n?void(n=k(!0,n,e)):(_("You have to initialize the Report module before call Merge function."),!1)},success:function(e,t,n,i,r){L(u.Success,e,t,n,i,r)},failure:function(e,t,n,i,r){L(u.Failure,e,t,n,i,r)},warning:function(e,t,n,i,r){L(u.Warning,e,t,n,i,r)},info:function(e,t,n,i,r){L(u.Info,e,t,n,i,r)}},Confirm:{init:function(e){i=k(!0,p,e),w(D,"NotiflixConfirmInternalCSS")},merge:function(e){return i?void(i=k(!0,i,e)):(_("You have to initialize the Confirm module before call Merge function."),!1)},show:function(e,t,n,i,r,s,o){M(d.Show,e,t,null,n,i,r,s,o)},ask:function(e,t,n,i,r,s,o,a){M(d.Ask,e,t,n,i,r,s,o,a)},prompt:function(e,t,n,i,r,s,o,a){M(d.Prompt,e,t,n,i,r,s,o,a)}},Loading:{init:function(e){r=k(!0,m,e),w(F,"NotiflixLoadingInternalCSS")},merge:function(e){return r?void(r=k(!0,r,e)):(_("You have to initialize the Loading module before call Merge function."),!1)},standard:function(e,t){z(f.Standard,e,t,!0,0)},hourglass:function(e,t){z(f.Hourglass,e,t,!0,0)},circle:function(e,t){z(f.Circle,e,t,!0,0)},arrows:function(e,t){z(f.Arrows,e,t,!0,0)},dots:function(e,t){z(f.Dots,e,t,!0,0)},pulse:function(e,t){z(f.Pulse,e,t,!0,0)},custom:function(e,t){z(f.Custom,e,t,!0,0)},notiflix:function(e,t){z(f.Notiflix,e,t,!0,0)},remove:function(e){"number"!=typeof e&&(e=0),z(null,null,null,!1,e)},change:function(e){W(e)}},Block:{init:function(e){s=k(!0,y,e),w(U,"NotiflixBlockInternalCSS")},merge:function(e){return s?void(s=k(!0,s,e)):(_('You have to initialize the "Notiflix.Block" module before call Merge function.'),!1)},standard:function(e,t,n){q(!0,g.Standard,e,t,n)},hourglass:function(e,t,n){q(!0,g.Hourglass,e,t,n)},circle:function(e,t,n){q(!0,g.Circle,e,t,n)},arrows:function(e,t,n){q(!0,g.Arrows,e,t,n)},dots:function(e,t,n){q(!0,g.Dots,e,t,n)},pulse:function(e,t,n){q(!0,g.Pulse,e,t,n)},remove:function(e,t){"number"!=typeof t&&(t=0),q(!1,null,e,null,null,t)}}};return"object"==typeof e.Notiflix?k(!0,e.Notiflix,{Notify:j.Notify,Report:j.Report,Confirm:j.Confirm,Loading:j.Loading,Block:j.Block}):{Notify:j.Notify,Report:j.Report,Confirm:j.Confirm,Loading:j.Loading,Block:j.Block}},"function"==typeof define&&define.amd?define([],function(){return b(v)}):"object"==typeof uZ?uZ=b(v):v.Notiflix=b(v);var u0=class{constructor(){tz.initializeApp({apiKey:"AIzaSyCo7Hm3k-gsUsQ5NwATa_fhUGPi8TrU9Lo",authDomain:"localhost",projectId:"bookshelf-2f203",databaseURL:"https://bookshelf-2f203-default-rtdb.firebaseio.com"})}firebaseSignUp(e,t,n){tz.auth().createUserWithEmailAndPassword(e,t).then(e=>{let t=e.user.uid;tz.database().ref("users/"+t).set({name:n}),p(uZ).Notify.success("Sign Up Success")}).catch(e=>{"auth/email-already-in-use"===e.code?p(uZ).Notify.failure("Email already in use"):p(uZ).Notify.failure("Registration failed: "+e.message)})}firebaseSignIn(e,t){return tz.auth().signInWithEmailAndPassword(e,t).then(e=>{let t=e.user.uid;return this.getUserData(t).then(e=>{let n=e&&e.name?e.name:"NONAME";return{userId:t,name:n}})}).catch(e=>{let t=e.code,n=e.message;return"auth/wrong-password"===t?p(uZ).Notify.failure("Password is incorrect"):p(uZ).Notify.failure("Sign In Error:",n),{userId:null,name:"NONAME"}})}getUserData(e){return tz.database().ref("users/"+e).once("value").then(e=>{if(e.exists())return e.val();throw Error("User data not found")})}firebaseLogOut(){tz.auth().signOut().then(()=>{p(uZ).Notify.success("SignOut is Success")}).catch(e=>{p(uZ).Notify.failure("SignOut Error",e)})}onAuthStateChanged(e){return tz.auth().onAuthStateChanged(e)}firebaseAddBookToList(e,t){tz.database().ref("users/"+e+"/shoppingList").push({bookID:t}).then(()=>{p(uZ).Notify.success("Book was successfully added")}).catch(e=>{p(uZ).Notify.failure("Error. Book was not added.",e)})}firebaseRemoveBookFromList(e,t){let n=tz.database().ref("users/"+e+"/shoppingList");n.orderByChild("bookID").equalTo(t).once("value").then(e=>{if(e.exists()){let t=Object.keys(e.val());t.forEach(e=>{n.child(e).remove()}),p(uZ).Notify.success("Book was removed.")}else p(uZ).Notify.failure("Book was not found.")}).catch(e=>{p(uZ).Notify.failure("Error during removing Book:",e)})}firebaseClearShoppingList(e){let t=tz.database().ref("users/"+e+"/shoppingList");t.remove().then(()=>{p(uZ).Notify.success("Shopping List was cleaned.")}).catch(e=>{p(uZ).Notify.failure("Error during cleaning Shopping List:",e)})}firebaseSelectBooksFromList(e){return tz.database().ref("users/"+e+"/shoppingList").once("value").then(function(e){var t=e.val();return!!t&&Object.values(t).map(function(e){return e.bookID})}).catch(function(e){return console.error("Error getting the list :",e),!1})}};let u1=new u0;u1.firebaseSignIn("taras_678@ukr.net","Taras_123432atdgbdd"),u1.onAuthStateChanged(function(e){if(!e)return console.log("User is not authenticated"),!1;{let t=e.uid;return console.log("User is authenticated",t),u1.firebaseSelectBooksFromList(t).then(function(e){!1!==e?console.log("   :",e):console.log(" ")}).catch(function(e){console.error("      :",e)}),t}});let u6=document.getElementById("modal"),u2=document.getElementById("modal-close"),u5=document.getElementById("sign-up"),u3=document.getElementById("sign-in-form"),u4=document.getElementById("sign-up-form"),u9=document.getElementById("switch-signup"),u8=document.getElementById("switch-signin");u5.addEventListener("click",function(e){e.preventDefault(),u6.style.display="block",u4.style.display="block",u3.style.display="none",u9.classList.add("active"),u8.classList.remove("active")}),u2.addEventListener("click",function(){u6.style.display="none"}),u9.addEventListener("click",function(){u4.style.display="block",u3.style.display="none",u9.classList.add("active"),u8.classList.remove("active")}),u8.addEventListener("click",function(){u4.style.display="none",u3.style.display="block",u9.classList.remove("active"),u8.classList.add("active")}),u3.addEventListener("submit",function(e){e.preventDefault()}),u4.addEventListener("submit",function(e){e.preventDefault()})}();
//# sourceMappingURL=index.a1a04e29.js.map
