let e,t,n,i,r,s,o,a,l,c,u,h;function d(e){return e&&e.__esModule?e.default:e}var p,f,m,g,y,_,v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function b(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var w={},k={},x=v.parcelRequired7c6;null==x&&((x=function(e){if(e in w)return w[e].exports;if(e in k){var t=k[e];delete k[e];var n={id:e,exports:{}};return w[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){k[e]=t},v.parcelRequired7c6=x),document.querySelector("#theme-switch");const I=document.querySelector("body"),C=document.querySelector("#theme-switch");C.addEventListener("change",function(e){let t="";e.currentTarget.checked?(t="dark-theme",I.classList.add(t),I.classList.remove("light-theme")):(t="light-theme",I.classList.remove("dark-theme"),I.classList.add(t))}),x("dTazW"),x("fb9GJ");var T={},N=T={};function E(){throw Error("setTimeout has not been defined")}function S(){throw Error("clearTimeout has not been defined")}function R(e){if(f===setTimeout)return setTimeout(e,0);if((f===E||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}!function(){try{f="function"==typeof setTimeout?setTimeout:E}catch(e){f=E}try{m="function"==typeof clearTimeout?clearTimeout:S}catch(e){m=S}}();var P=[],A=!1,O=-1;function L(){A&&g&&(A=!1,g.length?P=g.concat(P):O=-1,P.length&&D())}function D(){if(!A){var e=R(L);A=!0;for(var t=P.length;t;){for(g=P,P=[];++O<t;)g&&g[O].run();O=-1,t=P.length}g=null,A=!1,function(e){if(m===clearTimeout)return clearTimeout(e);if((m===S||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(e);try{m(e)}catch(t){try{return m.call(null,e)}catch(t){return m.call(this,e)}}}(e)}}function M(e,t){this.fun=e,this.array=t}function F(){}N.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];P.push(new M(e,t)),1!==P.length||A||R(D)},M.prototype.run=function(){this.fun.apply(null,this.array)},N.title="browser",N.browser=!0,N.env={},N.argv=[],N.version="",N.versions={},N.on=F,N.addListener=F,N.once=F,N.off=F,N.removeListener=F,N.removeAllListeners=F,N.emit=F,N.prependListener=F,N.prependOnceListener=F,N.listeners=function(e){return[]},N.binding=function(e){throw Error("process.binding is not supported")},N.cwd=function(){return"/"},N.chdir=function(e){throw Error("process.chdir is not supported")},N.umask=function(){return 0};const z={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},W=function(e,t){if(!e)throw U(t)},U=function(e){return Error("Firebase Database ("+z.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},q=function(e){let t=[],n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:((64512&r)==55296&&i+1<e.length&&(64512&e.charCodeAt(i+1))==56320?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128):t[n++]=r>>12|224,t[n++]=r>>6&63|128),t[n++]=63&r|128)}return t},B=function(e){let t=[],n=0,i=0;for(;n<e.length;){let r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){let s=e[n++],o=e[n++],a=e[n++],l=((7&r)<<18|(63&s)<<12|(63&o)<<6|63&a)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(1023&l))}else{let s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")},j={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){let r=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,c=r>>2,u=(3&r)<<4|o>>4,h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(q(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):B(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){let r=n[e.charAt(t++)],s=t<e.length,o=s?n[e.charAt(t)]:0;++t;let a=t<e.length,l=a?n[e.charAt(t)]:64;++t;let c=t<e.length,u=c?n[e.charAt(t)]:64;if(++t,null==r||null==o||null==l||null==u)throw new H;let h=r<<2|o>>4;if(i.push(h),64!==l){let e=o<<4&240|l>>2;if(i.push(e),64!==u){let e=l<<6&192|u;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class H extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V=function(e){let t=q(e);return j.encodeByteArray(t,!0)},$=function(e){return V(e).replace(/\./g,"")},K=function(e){try{return j.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function X(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=X(e[n],t[n]));return e}const G=()=>(function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==v)return v;throw Error("Unable to locate global object.")})().__FIREBASE_DEFAULTS__,Y=()=>{if(void 0===T||void 0===T.env)return;let e=void 0;if(e)return JSON.parse(e)},Q=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&K(e[1]);return t&&JSON.parse(t)},J=()=>{try{return G()||Y()||Q()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Z=()=>{var e;return null===(e=J())||void 0===e?void 0:e.config};class ee{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function et(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function en(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())}function ei(){var e;let t=null===(e=J())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(v.process)}catch(e){return!1}}function er(){let e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function es(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function eo(){let e=et();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ea(){return!0===z.NODE_CLIENT||!0===z.NODE_ADMIN}function el(){try{return"object"==typeof indexedDB}catch(e){return!1}}class ec extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ec.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eu.prototype.create)}}class eu{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?r.replace(eh,(e,t)=>{let i=n[t];return null!=i?String(i):`<${t}?>`}):"Error",o=`${this.serviceName}: ${s} (${i}).`,a=new ec(i,o,n);return a}}const eh=/\{\$([^}]+)}/g;function ed(e){return JSON.parse(e)}function ep(e){return JSON.stringify(e)}const ef=function(e){let t={},n={},i={},r="";try{let s=e.split(".");t=ed(K(s[0])||""),n=ed(K(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:i,signature:r}},em=function(e){let t=ef(e),n=t.claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")},eg=function(e){let t=ef(e).claims;return"object"==typeof t&&!0===t.admin};function ey(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function e_(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ev(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function eb(e,t,n){let i={};for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function ew(e,t){if(e===t)return!0;let n=Object.keys(e),i=Object.keys(t);for(let r of n){if(!i.includes(r))return!1;let n=e[r],s=t[r];if(ek(n)&&ek(s)){if(!ew(n,s))return!1}else if(n!==s)return!1}for(let e of i)if(!n.includes(e))return!1;return!0}function ek(e){return null!==e&&"object"==typeof e}function ex(e){let t=[];for(let[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function eI(e){let t={},n=e.replace(/^\?/,"").split("&");return n.forEach(e=>{if(e){let[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}}),t}function eC(e){let t=e.indexOf("?");if(!t)return"";let n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class eT{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){let n,i;t||(t=0);let r=this.W_;if("string"==typeof e)for(let n=0;n<16;n++)r[n]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let n=0;n<16;n++)r[n]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){let t=r[e-3]^r[e-8]^r[e-14]^r[e-16];r[e]=(t<<1|t>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(n=l^o&(a^l),i=1518500249):(n=o^a^l,i=1859775393):e<60?(n=o&a|l&(o|a),i=2400959708):(n=o^a^l,i=3395469782);let t=(s<<5|s>>>27)+n+c+i+r[e]&4294967295;c=l,l=a,a=(o<<30|o>>>2)&4294967295,o=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);let n=t-this.blockSize,i=0,r=this.buf_,s=this.inbuf_;for(;i<t;){if(0===s)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(r[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<t;)if(r[s]=e[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){let e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let i=24;i>=0;i-=8)e[n]=this.chain_[t]>>i&255,++n;return e}}function eN(e,t){let n=new eE(e,t);return n.subscribe.bind(n)}class eE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw Error("Missing Observer.");void 0===(i=!function(e,t){if("object"!=typeof e||null===e)return!1;for(let n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?{next:e,error:t,complete:n}:e).next&&(i.next=eS),void 0===i.error&&(i.error=eS),void 0===i.complete&&(i.complete=eS);let r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}}),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eS(){}const eR=function(e,t,n,i){let r;if(i<t?r="at least "+t:i>n&&(r=0===n?"none":"no more than "+n),r){let t=e+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".";throw Error(t)}};function eP(e,t){return`${e} failed: ${t} argument `}function eA(e,t,n,i){if((!i||n)&&"function"!=typeof n)throw Error(eP(e,t)+"must be a valid function.")}function eO(e,t,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw Error(eP(e,t)+"must be a valid context object.")}const eL=function(e){let t=[],n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r>=55296&&r<=56319){let t=r-55296;W(++i<e.length,"Surrogate pair missing trail surrogate.");let n=e.charCodeAt(i)-56320;r=65536+(t<<10)+n}r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return t},eD=function(e){let t=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};function eM(e){return e&&e._delegate?e._delegate:e}class eF{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ez="[DEFAULT]";class eW{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new ee;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ez})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=ez){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=ez){return this.instances.has(e)}getOptions(e=ez){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);n===r&&t.resolve(i)}return i}onInit(e,t){var n;let i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);let s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:e===ez?void 0:e,options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}return n||null}normalizeInstanceIdentifier(e=ez){return this.component?this.component.multipleInstances?e:ez:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class eU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){let t=this.getProvider(e.name);t.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new eW(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var eq={};b(eq,"_DEFAULT_ENTRY_NAME",function(){return tt}),b(eq,"_apps",function(){return ti}),b(eq,"_components",function(){return tr}),b(eq,"_addComponent",function(){return ts}),b(eq,"_addOrOverwriteComponent",function(){return to}),b(eq,"_registerComponent",function(){return ta}),b(eq,"_getProvider",function(){return tl}),b(eq,"_removeServiceInstance",function(){return tc}),b(eq,"_clearComponents",function(){return tu}),b(eq,"SDK_VERSION",function(){return tp}),b(eq,"initializeApp",function(){return tf}),b(eq,"getApp",function(){return tm}),b(eq,"getApps",function(){return tg}),b(eq,"deleteApp",function(){return ty}),b(eq,"registerVersion",function(){return t_}),b(eq,"onLog",function(){return tv}),b(eq,"setLogLevel",function(){return tb}),b(eq,"FirebaseError",function(){return ec});const eB=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(y||(y={}));const ej={debug:y.DEBUG,verbose:y.VERBOSE,info:y.INFO,warn:y.WARN,error:y.ERROR,silent:y.SILENT},eH=y.INFO,eV={[y.DEBUG]:"log",[y.VERBOSE]:"log",[y.INFO]:"info",[y.WARN]:"warn",[y.ERROR]:"error"},e$=(e,t,...n)=>{if(t<e.logLevel)return;let i=new Date().toISOString(),r=eV[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class eK{constructor(e){this.name=e,this._logLevel=eH,this._logHandler=e$,this._userLogHandler=null,eB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in y))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ej[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,y.DEBUG,...e),this._logHandler(this,y.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,y.VERBOSE,...e),this._logHandler(this,y.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,y.INFO,...e),this._logHandler(this,y.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,y.WARN,...e),this._logHandler(this,y.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,y.ERROR,...e),this._logHandler(this,y.ERROR,...e)}}const eX=(e,t)=>t.some(t=>e instanceof t),eG=new WeakMap,eY=new WeakMap,eQ=new WeakMap,eJ=new WeakMap,eZ=new WeakMap;let e0={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return eY.get(e);if("objectStoreNames"===t)return e.objectStoreNames||eQ.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return e1(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function e1(n){var i;if(n instanceof IDBRequest)return function(e){let t=new Promise((t,n)=>{let i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(e1(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&eG.set(t,e)}).catch(()=>{}),eZ.set(t,e),t}(n);if(eJ.has(n))return eJ.get(n);let r="function"==typeof(i=n)?i!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(t||(t=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(i)?function(...e){return i.apply(e6(this),e),e1(eG.get(this))}:function(...e){return e1(i.apply(e6(this),e))}:function(e,...t){let n=i.call(e6(this),e,...t);return eQ.set(n,e.sort?e.sort():[e]),e1(n)}:(i instanceof IDBTransaction&&function(e){if(eY.has(e))return;let t=new Promise((t,n)=>{let i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)});eY.set(e,t)}(i),eX(i,e||(e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(i,e0):i;return r!==n&&(eJ.set(n,r),eZ.set(r,n)),r}const e6=e=>eZ.get(e),e2=["get","getKey","getAll","getAllKeys","count"],e5=["put","add","delete","clear"],e3=new Map;function e4(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(e3.get(t))return e3.get(t);let n=t.replace(/FromIndex$/,""),i=t!==n,r=e5.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||e2.includes(n)))return;let s=async function(e,...t){let s=this.transaction(e,r?"readwrite":"readonly"),o=s.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),r&&s.done]))[0]};return e3.set(t,s),s}e0={...p=e0,get:(e,t,n)=>e4(e,t)||p.get(e,t,n),has:(e,t)=>!!e4(e,t)||p.has(e,t)};class e9{constructor(e){this.container=e}getPlatformInfoString(){let e=this.container.getProviders();return e.map(e=>{if(!function(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}const e8="@firebase/app",e7="0.9.14",te=new eK("@firebase/app"),tt="[DEFAULT]",tn={[e8]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ti=new Map,tr=new Map;function ts(e,t){try{e.container.addComponent(t)}catch(n){te.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function to(e,t){e.container.addOrOverwriteComponent(t)}function ta(e){let t=e.name;if(tr.has(t))return te.debug(`There were multiple attempts to register component ${t}.`),!1;for(let n of(tr.set(t,e),ti.values()))ts(n,e);return!0}function tl(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function tc(e,t,n=tt){tl(e,t).clearInstance(n)}function tu(){tr.clear()}const th=new eu("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class td{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new eF("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw th.create("app-deleted",{appName:this._name})}}const tp="10.0.0";function tf(e,t={}){let n=e;if("object"!=typeof t){let e=t;t={name:e}}let i=Object.assign({name:tt,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!=typeof r||!r)throw th.create("bad-app-name",{appName:String(r)});if(n||(n=Z()),!n)throw th.create("no-options");let s=ti.get(r);if(s){if(ew(n,s.options)&&ew(i,s.config))return s;throw th.create("duplicate-app",{appName:r})}let o=new eU(r);for(let e of tr.values())o.addComponent(e);let a=new td(n,i,o);return ti.set(r,a),a}function tm(e=tt){let t=ti.get(e);if(!t&&e===tt&&Z())return tf();if(!t)throw th.create("no-app",{appName:e});return t}function tg(){return Array.from(ti.values())}async function ty(e){let t=e.name;ti.has(t)&&(ti.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function t_(e,t,n){var i;let r=null!==(i=tn[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);let s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){let e=[`Unable to register library "${r}" with version "${t}":`];s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),te.warn(e.join(" "));return}ta(new eF(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}function tv(e,t){if(null!==e&&"function"!=typeof e)throw th.create("invalid-log-argument");!function(e,t){for(let n of eB){let i=null;t&&t.level&&(i=ej[t.level]),null===e?n.userLogHandler=null:n.userLogHandler=(t,n,...r)=>{let s=r.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:y[n].toLowerCase(),message:s,args:r,type:t.name})}}}(e,t)}function tb(e){eB.forEach(t=>{t.setLogLevel(e)})}const tw="firebase-heartbeat-store";let tk=null;function tx(){return tk||(tk=(function(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(e,1),a=e1(o);return i&&o.addEventListener("upgradeneeded",e=>{i(e1(o.result),e.oldVersion,e.newVersion,e1(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a})("firebase-heartbeat-database",0,{upgrade:(e,t)=>{0===t&&e.createObjectStore(tw)}}).catch(e=>{throw th.create("idb-open",{originalErrorMessage:e.message})})),tk}async function tI(e){try{let t=await tx(),n=await t.transaction(tw).objectStore(tw).get(tT(e));return n}catch(e){if(e instanceof ec)te.warn(e.message);else{let t=th.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});te.warn(t.message)}}}async function tC(e,t){try{let n=await tx(),i=n.transaction(tw,"readwrite"),r=i.objectStore(tw);await r.put(t,tT(e)),await i.done}catch(e){if(e instanceof ec)te.warn(e.message);else{let t=th.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});te.warn(t.message)}}}function tT(e){return`${e.name}!${e.options.appId}`}class tN{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new tS(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){let e=this.container.getProvider("platform-logger").getImmediate(),t=e.getPlatformInfoString(),n=tE();return(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(e=>e.date===n))?void 0:(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let t=new Date(e.date).valueOf(),n=Date.now();return n-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";let e=tE(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){let n=[],i=e.slice();for(let r of e){let e=n.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),tR(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),tR(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=$(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function tE(){let e=new Date;return e.toISOString().substring(0,10)}class tS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!el()&&new Promise((e,t)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}).then(()=>!0).catch(()=>!1)}async read(){let e=await this._canUseIndexedDBPromise;if(!e)return{heartbeats:[]};{let e=await tI(this.app);return e||{heartbeats:[]}}}async overwrite(e){var t;let n=await this._canUseIndexedDBPromise;if(n){let n=await this.read();return tC(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;let n=await this._canUseIndexedDBPromise;if(n){let n=await this.read();return tC(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function tR(e){return $(JSON.stringify({version:2,heartbeats:e})).length}ta(new eF("platform-logger",e=>new e9(e),"PRIVATE")),ta(new eF("heartbeat",e=>new tN(e),"PRIVATE")),t_(e8,e7,""),t_(e8,e7,"esm2017"),t_("fire-js","");class tP{constructor(e,t){this._delegate=e,this.firebase=t,ts(e,new eF("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),ty(this._delegate)))}_getService(e,t=tt){var n;this._delegate.checkDestroyed();let i=this._delegate.container.getProvider(e);return i.isInitialized()||(null===(n=i.getComponent())||void 0===n?void 0:n.instantiationMode)!=="EXPLICIT"||i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=tt){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){ts(this._delegate,e)}_addOrOverwriteComponent(e){to(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const tA=new eu("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),tO=function e(){let t=function(e){let t={},n={__esModule:!0,initializeApp:function(i,r={}){let s=tf(i,r);if(ey(t,s.name))return t[s.name];let o=new e(s,n);return t[s.name]=o,o},app:i,registerVersion:t_,setLogLevel:tb,onLog:tv,apps:null,SDK_VERSION:tp,INTERNAL:{registerComponent:function(t){let r=t.name,s=r.replace("-compat","");if(ta(t)&&"PUBLIC"===t.type){let o=(e=i())=>{if("function"!=typeof e[s])throw tA.create("invalid-app-argument",{appName:r});return e[s]()};void 0!==t.serviceProps&&X(o,t.serviceProps),n[s]=o,e.prototype[s]=function(...e){let n=this._getService.bind(this,r);return n.apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:eq}};function i(e){if(!ey(t,e=e||tt))throw tA.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(tP);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){X(t,e)},createSubscribe:eN,ErrorFactory:eu,deepExtend:X}),t}(),tL=new eK("@firebase/app-compat");if("object"==typeof self&&self.self===self&&void 0!==self.firebase){tL.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);let e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&tL.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}t_("@firebase/app-compat","0.2.14",void 0),tO.registerVersion("firebase","10.0.0","app-compat");function tD(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)0>t.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}"function"==typeof SuppressedError&&SuppressedError;const tM={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"};function tF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tz=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},tW=new eu("auth","Firebase",tF()),tU=new eK("@firebase/auth");function tq(e,...t){tU.logLevel<=y.ERROR&&tU.error(`Auth (${tp}): ${e}`,...t)}function tB(e,...t){throw t$(e,...t)}function tj(e,...t){return t$(e,...t)}function tH(e,t,n){let i=Object.assign(Object.assign({},tF()),{[t]:n}),r=new eu("auth","Firebase",i);return r.create(t,{appName:e.name})}function tV(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&tB(e,"argument-error"),tH(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function t$(e,...t){if("string"!=typeof e){let n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return tW.create(e,...t)}function tK(e,t,...n){if(!e)throw t$(t,...n)}function tX(e){let t="INTERNAL ASSERTION FAILED: "+e;throw tq(t),Error(t)}function tG(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function tY(){return"http:"===tQ()||"https:"===tQ()}function tQ(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class tJ{constructor(e,t){this.shortDelay=e,this.longDelay=t,t>e||tX("Short delay should be less than long delay!"),this.isMobile=en()||es()}get(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(tY()||er()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function tZ(e,t){e.emulator||tX("Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class t0{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void tX("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void tX("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void tX("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const t1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},t6=new tJ(3e4,6e4);function t2(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function t5(e,t,n,i,r={}){return t3(e,r,async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});let o=ex(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),t0.fetch()(t9(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},r))})}async function t3(e,t,n){e._canInitEmulator=!1;let i=Object.assign(Object.assign({},t1),t);try{let t=new t8(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let s=await r.json();if("needConfirmation"in s)throw t7(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{let t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw t7(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw t7(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw t7(e,"user-disabled",s);let a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw tH(e,a,o);tB(e,a)}}catch(t){if(t instanceof ec)throw t;tB(e,"network-request-failed",{message:String(t)})}}async function t4(e,t,n,i,r={}){let s=await t5(e,t,n,i,r);return"mfaPendingCredential"in s&&tB(e,"multi-factor-auth-required",{_serverResponse:s}),s}function t9(e,t,n,i){let r=`${t}${n}?${i}`;return e.config.emulator?tZ(e.config,r):`${e.config.apiScheme}://${r}`}class t8{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(tj(this.auth,"network-request-failed")),t6.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function t7(e,t,n){let i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let r=tj(e,t,i);return r.customData._tokenResponse=n,r}async function ne(e,t){return t5(e,"POST","/v1/accounts:delete",t)}async function nt(e,t){return t5(e,"POST","/v1/accounts:update",t)}async function nn(e,t){return t5(e,"POST","/v1/accounts:lookup",t)}function ni(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}async function nr(e,t=!1){let n=eM(e),i=await n.getIdToken(t),r=no(i);tK(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");let s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:ni(ns(r.auth_time)),issuedAtTime:ni(ns(r.iat)),expirationTime:ni(ns(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}function ns(e){return 1e3*Number(e)}function no(e){let[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return tq("JWT malformed, contained fewer than 3 sections"),null;try{let e=K(n);if(!e)return tq("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return tq("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}async function na(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof ec&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class nl{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;let e=null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0,n=e-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(null==e?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class nc{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ni(this.lastLoginAt),this.creationTime=ni(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function nu(e){var t;let n=e.auth,i=await e.getIdToken(),r=await na(e,nn(n,{idToken:i}));tK(null==r?void 0:r.users.length,n,"internal-error");let s=r.users[0];e._notifyReloadListener(s);let o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map(e=>{var{providerId:t}=e,n=tD(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[],a=function(e,t){let n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null==a?void 0:a.length),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new nc(s.createdAt,s.lastLoginAt),isAnonymous:!!l&&c};Object.assign(e,u)}async function nh(e){let t=eM(e);await nu(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}async function nd(e,t){let n=await t3(e,{},async()=>{let n=ex({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=t9(e,i,"/v1/token",`key=${r}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",t0.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}class np{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tK(e.idToken,"internal-error"),tK(void 0!==e.idToken,"internal-error"),tK(void 0!==e.refreshToken,"internal-error");let t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){let t=no(e);return tK(t,"internal-error"),tK(void 0!==t.exp,"internal-error"),tK(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return(tK(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired)?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:i,expiresIn:r}=await nd(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){let{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new np;return n&&(tK("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(tK("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(tK("number"==typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new np,this.toJSON())}_performRefresh(){return tX("not implemented")}}function nf(e,t){tK("string"==typeof e||void 0===e,"internal-error",{appName:t})}class nm{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=tD(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new nc(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await na(this,this.stsTokenManager.getToken(this.auth,e));return tK(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return nr(this,e)}reload(){return nh(this)}_assign(e){this!==e&&(tK(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new nm(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){tK(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await nu(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){let e=await this.getIdToken();return await na(this,ne(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,l,c;let u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:_,emailVerified:v,isAnonymous:b,providerData:w,stsTokenManager:k}=t;tK(_&&k,e,"internal-error");let x=np.fromJSON(this.name,k);tK("string"==typeof _,e,"internal-error"),nf(u,e.name),nf(h,e.name),tK("boolean"==typeof v,e,"internal-error"),tK("boolean"==typeof b,e,"internal-error"),nf(d,e.name),nf(p,e.name),nf(f,e.name),nf(m,e.name),nf(g,e.name),nf(y,e.name);let I=new nm({uid:_,auth:e,email:h,emailVerified:v,displayName:u,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:x,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(I.providerData=w.map(e=>Object.assign({},e))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(e,t,n=!1){let i=new np;i.updateFromServerResponse(t);let r=new nm({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await nu(r),r}}const ng=new Map;function ny(e){e instanceof Function||tX("Expected a class definition");let t=ng.get(e);return t?t instanceof e||tX("Instance stored in cache mismatched with class"):(t=new e,ng.set(e,t)),t}class n_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}function nv(e,t,n){return`firebase:${e}:${t}:${n}`}n_.type="NONE";class nb{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:i,name:r}=this.auth;this.fullUserKey=nv(this.userKey,i.apiKey,r),this.fullPersistenceKey=nv("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?nm._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new nb(ny(n_),e,n);let i=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),r=i[0]||ny(n_),s=nv(n,e.config.apiKey,e.name),o=null;for(let n of t)try{let t=await n._get(s);if(t){let i=nm._fromJSON(e,t);n!==r&&(o=i),r=n;break}}catch(e){}let a=i.filter(e=>e._shouldAllowMigration);return r._shouldAllowMigration&&a.length&&(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==r)try{await e._remove(s)}catch(e){}}))),new nb(r,e,n)}}function nw(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";{if(nC(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(nk(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(nN(t))return"Blackberry";if(nE(t))return"Webos";if(nx(t))return"Safari";if((t.includes("chrome/")||nI(t))&&!t.includes("edge/"))return"Chrome";if(nT(t))return"Android";let n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if((null==n?void 0:n.length)===2)return n[1]}return"Other"}function nk(e=et()){return/firefox\//i.test(e)}function nx(e=et()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function nI(e=et()){return/crios\//i.test(e)}function nC(e=et()){return/iemobile/i.test(e)}function nT(e=et()){return/android/i.test(e)}function nN(e=et()){return/blackberry/i.test(e)}function nE(e=et()){return/webos/i.test(e)}function nS(e=et()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function nR(e=et()){return nS(e)||nT(e)||nE(e)||nN(e)||/windows phone/i.test(e)||nC(e)}function nP(e,t=[]){let n;switch(e){case"Browser":n=nw(et());break;case"Worker":n=`${nw(et())}-${e}`;break;default:n=e}let i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${tp}/${i}`}async function nA(e){return(await t5(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function nO(e,t){return t5(e,"GET","/v2/recaptchaConfig",t2(e,t))}function nL(e){return void 0!==e&&void 0!==e.getResponse}function nD(e){return void 0!==e&&void 0!==e.enterprise}class nM{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function nF(e){return new Promise((t,n)=>{var i,r;let s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=e=>{let t=tj("internal-error");t.customData=e,n(t)},s.type="text/javascript",s.charset="UTF-8",(null!==(r=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==r?r:document).appendChild(s)})}function nz(e){return`__${e}${Math.floor(1e6*Math.random())}`}class nW{constructor(e){this.type="recaptcha-enterprise",this.auth=eM(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{nO(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(void 0===i.recaptchaKey)n(Error("recaptcha Enterprise site key undefined"));else{let n=new nM(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function i(t,n,i){let r=window.grecaptcha;nD(r)?r.enterprise.ready(()=>{r.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{n(this.auth).then(n=>{if(!t&&nD(window.grecaptcha))i(n,e,r);else{if("undefined"==typeof window){r(Error("RecaptchaVerifier is only supported in browser"));return}nF("https://www.google.com/recaptcha/enterprise.js?render="+n).then(()=>{i(n,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function nU(e,t,n,i=!1){let r;let s=new nW(e);try{r=await s.verify(n)}catch(e){r=await s.verify(n,!0)}let o=Object.assign({},t);return i?Object.assign(o,{captchaResp:r}):Object.assign(o,{captchaResponse:r}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class nq{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,i)=>{try{let i=e(t);n(i)}catch(e){i(e)}});n.onAbort=t,this.queue.push(n);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){for(let e of(t.reverse(),t))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class nB{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nj(this),this.idTokenSubscription=new nj(this),this.beforeStateQueue=new nq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tW,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ny(t)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await nb.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser(),i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);(!n||n===s)&&(null==o?void 0:o.user)&&(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(e){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return(tK(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId)?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await nu(e)}catch(e){if((null==e?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){let t=e?eM(e):null;return t&&tK(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&tK(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ny(e))})}async initializeRecaptchaConfig(){let e=await nO(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new nM(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){let e=new nW(this);e.verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new eu("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&ny(e)||this._popupRedirectResolver;tK(t,this,"argument-error"),this.redirectPersistenceManager=await nb.create(this,[ny(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return(this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e)?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};let r="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return(tK(s,this,"internal-error"),s.then(()=>r(this.currentUser)),"function"==typeof t)?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tK(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let n=await (null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;let t=await (null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){tU.logLevel<=y.WARN&&tU.warn(`Auth (${tp}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}class nj{constructor(e){this.auth=e,this.observer=null,this.addObserver=eN(e=>this.observer=e)}get next(){return tK(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function nH(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function nV(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}class n${constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return tX("not implemented")}_getIdTokenResponse(e){return tX("not implemented")}_linkToIdToken(e,t){return tX("not implemented")}_getReauthenticationResolver(e){return tX("not implemented")}}async function nK(e,t){return t5(e,"POST","/v1/accounts:resetPassword",t2(e,t))}async function nX(e,t){return t5(e,"POST","/v1/accounts:update",t)}async function nG(e,t){return t5(e,"POST","/v1/accounts:update",t2(e,t))}async function nY(e,t){return t4(e,"POST","/v1/accounts:signInWithPassword",t2(e,t))}async function nQ(e,t){return t5(e,"POST","/v1/accounts:sendOobCode",t2(e,t))}async function nJ(e,t){return nQ(e,t)}async function nZ(e,t){return nQ(e,t)}async function n0(e,t){return nQ(e,t)}async function n1(e,t){return nQ(e,t)}async function n6(e,t){return t4(e,"POST","/v1/accounts:signInWithEmailLink",t2(e,t))}async function n2(e,t){return t4(e,"POST","/v1/accounts:signInWithEmailLink",t2(e,t))}class n5 extends n${constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n5(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new n5(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t||!t.emailPasswordEnabled)return nY(e,n).catch(async t=>{if("auth/missing-recaptcha-token"!==t.code)return Promise.reject(t);{console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");let t=await nU(e,n,"signInWithPassword");return nY(e,t)}});{let t=await nU(e,n,"signInWithPassword");return nY(e,t)}case"emailLink":return n6(e,{email:this._email,oobCode:this._password});default:tB(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return nX(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return n2(e,{idToken:t,email:this._email,oobCode:this._password});default:tB(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function n3(e,t){return t4(e,"POST","/v1/accounts:signInWithIdp",t2(e,t))}class n4 extends n${constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n4(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tB("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=tD(t,["providerId","signInMethod"]);if(!n||!i)return null;let s=new n4(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return n3(e,t)}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,n3(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,n3(e,t)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ex(t)}return e}}async function n9(e,t){return t5(e,"POST","/v1/accounts:sendVerificationCode",t2(e,t))}async function n8(e,t){return t4(e,"POST","/v1/accounts:signInWithPhoneNumber",t2(e,t))}async function n7(e,t){let n=await t4(e,"POST","/v1/accounts:signInWithPhoneNumber",t2(e,t));if(n.temporaryProof)throw t7(e,"account-exists-with-different-credential",n);return n}const ie={USER_NOT_FOUND:"user-not-found"};async function it(e,t){let n=Object.assign(Object.assign({},t),{operation:"REAUTH"});return t4(e,"POST","/v1/accounts:signInWithPhoneNumber",t2(e,n),ie)}class ii extends n${constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ii({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ii({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return n8(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return n7(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return it(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new ii({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class ir{constructor(e){var t,n,i,r,s,o;let a=eI(eC(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);tK(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){let t=function(e){let t=eI(eC(e)).link,n=t?eI(eC(t)).deep_link_id:null,i=eI(eC(e)).deep_link_id,r=i?eI(eC(i)).link:null;return r||i||n||t||e}(e);try{return new ir(t)}catch(e){return null}}}class is{constructor(){this.providerId=is.PROVIDER_ID}static credential(e,t){return n5._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=ir.parseLink(t);return tK(n,"argument-error"),n5._fromEmailAndCode(e,n.code,n.tenantId)}}is.PROVIDER_ID="password",is.EMAIL_PASSWORD_SIGN_IN_METHOD="password",is.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class io{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ia extends io{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class il extends ia{static credentialFromJSON(e){let t="string"==typeof e?JSON.parse(e):e;return tK("providerId"in t&&"signInMethod"in t,"argument-error"),n4._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return tK(e.idToken||e.accessToken,"argument-error"),n4._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return il.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return il.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:r,nonce:s,providerId:o}=e;if(!n&&!i&&!t&&!r||!o)return null;try{return new il(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:r})}catch(e){return null}}}class ic extends ia{constructor(){super("facebook.com")}static credential(e){return n4._fromParams({providerId:ic.PROVIDER_ID,signInMethod:ic.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ic.credentialFromTaggedObject(e)}static credentialFromError(e){return ic.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ic.credential(e.oauthAccessToken)}catch(e){return null}}}ic.FACEBOOK_SIGN_IN_METHOD="facebook.com",ic.PROVIDER_ID="facebook.com";class iu extends ia{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return n4._fromParams({providerId:iu.PROVIDER_ID,signInMethod:iu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return iu.credentialFromTaggedObject(e)}static credentialFromError(e){return iu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return iu.credential(t,n)}catch(e){return null}}}iu.GOOGLE_SIGN_IN_METHOD="google.com",iu.PROVIDER_ID="google.com";class ih extends ia{constructor(){super("github.com")}static credential(e){return n4._fromParams({providerId:ih.PROVIDER_ID,signInMethod:ih.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ih.credentialFromTaggedObject(e)}static credentialFromError(e){return ih.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ih.credential(e.oauthAccessToken)}catch(e){return null}}}ih.GITHUB_SIGN_IN_METHOD="github.com",ih.PROVIDER_ID="github.com";class id extends n${constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){let t=this.buildRequest();return n3(e,t)}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,n3(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,n3(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i,pendingToken:r}=t;return n&&i&&r&&n===i?new id(n,r):null}static _create(e,t){return new id(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ip extends io{constructor(e){tK(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return ip.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return ip.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){let t=id.fromJSON(e);return tK(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return id._create(n,t)}catch(e){return null}}}class im extends ia{constructor(){super("twitter.com")}static credential(e,t){return n4._fromParams({providerId:im.PROVIDER_ID,signInMethod:im.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return im.credentialFromTaggedObject(e)}static credentialFromError(e){return im.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return im.credential(t,n)}catch(e){return null}}}async function ig(e,t){return t4(e,"POST","/v1/accounts:signUp",t2(e,t))}im.TWITTER_SIGN_IN_METHOD="twitter.com",im.PROVIDER_ID="twitter.com";class iy{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){let r=await nm._fromIdTokenResponse(e,n,i),s=i_(n),o=new iy({user:r,providerId:s,_tokenResponse:n,operationType:t});return o}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);let i=i_(n);return new iy({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function i_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}async function iv(e){var t;let n=eM(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new iy({user:n.currentUser,providerId:null,operationType:"signIn"});let i=await ig(n,{returnSecureToken:!0}),r=await iy._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}class ib extends ec{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,ib.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new ib(e,t,n,i)}}function iw(e,t,n,i){let r="reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e);return r.catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw ib._fromErrorAndOperation(e,n,t,i);throw n})}function ik(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}async function ix(e,t){let n=eM(e);await iC(!0,n,t);let{providerUserInfo:i}=await nt(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),r=ik(i||[]);return n.providerData=n.providerData.filter(e=>r.has(e.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function iI(e,t,n=!1){let i=await na(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return iy._forOperation(e,"link",i)}async function iC(e,t,n){await nu(t);let i=ik(t.providerData),r=!1===e?"provider-already-linked":"no-such-provider";tK(i.has(n)===e,t.auth,r)}async function iT(e,t,n=!1){let{auth:i}=e,r="reauthenticate";try{let s=await na(e,iw(i,r,t,e),n);tK(s.idToken,i,"internal-error");let o=no(s.idToken);tK(o,i,"internal-error");let{sub:a}=o;return tK(e.uid===a,i,"user-mismatch"),iy._forOperation(e,r,s)}catch(e){throw(null==e?void 0:e.code)==="auth/user-not-found"&&tB(i,"user-mismatch"),e}}async function iN(e,t,n=!1){let i="signIn",r=await iw(e,i,t),s=await iy._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function iE(e,t){return iN(eM(e),t)}async function iS(e,t){let n=eM(e);return await iC(!1,n,t.providerId),iI(n,t)}async function iR(e,t){return iT(eM(e),t)}async function iP(e,t){return t4(e,"POST","/v1/accounts:signInWithCustomToken",t2(e,t))}async function iA(e,t){let n=eM(e),i=await iP(n,{token:t,returnSecureToken:!0}),r=await iy._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}class iO{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?iL._fromServerResponse(e,t):"totpInfo"in t?iD._fromServerResponse(e,t):tB(e,"internal-error")}}class iL extends iO{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new iL(t)}}class iD extends iO{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new iD(t)}}function iM(e,t,n){var i;tK((null===(i=n.url)||void 0===i?void 0:i.length)>0,e,"invalid-continue-uri"),tK(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(tK(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(tK(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function iF(e,t,n){var i;let r=eM(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){let e=await nU(r,s,"getOobCode",!0);n&&iM(r,e,n),await nZ(r,e)}else n&&iM(r,s,n),await nZ(r,s).catch(async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");let e=await nU(r,s,"getOobCode",!0);n&&iM(r,e,n),await nZ(r,e)}})}async function iz(e,t,n){await nK(eM(e),{oobCode:t,newPassword:n})}async function iW(e,t){await nG(eM(e),{oobCode:t})}async function iU(e,t){let n=eM(e),i=await nK(n,{oobCode:t}),r=i.requestType;switch(tK(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":tK(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":tK(i.mfaInfo,n,"internal-error");default:tK(i.email,n,"internal-error")}let s=null;return i.mfaInfo&&(s=iO._fromServerResponse(eM(n),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function iq(e,t){let{data:n}=await iU(eM(e),t);return n.email}async function iB(e,t,n){var i;let r;let s=eM(e),o={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};if(null===(i=s._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){let e=await nU(s,o,"signUpPassword");r=ig(s,e)}else r=ig(s,o).catch(async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");let e=await nU(s,o,"signUpPassword");return ig(s,e)}});let a=await r.catch(e=>Promise.reject(e)),l=await iy._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(l.user),l}async function ij(e,t,n){var i;let r=eM(e),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(e,t){tK(t.handleCodeInApp,r,"argument-error"),t&&iM(r,e,t)}if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){let e=await nU(r,s,"getOobCode",!0);o(e,n),await n0(r,e)}else o(s,n),await n0(r,s).catch(async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");let e=await nU(r,s,"getOobCode",!0);o(e,n),await n0(r,e)}})}async function iH(e,t,n){let i=eM(e),r=is.credentialWithLink(t,n||tG());return tK(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),iE(i,r)}async function iV(e,t){return t5(e,"POST","/v1/accounts:createAuthUri",t2(e,t))}async function i$(e,t){let n=tY()?tG():"http://localhost",{signinMethods:i}=await iV(eM(e),{identifier:t,continueUri:n});return i||[]}async function iK(e,t){let n=eM(e),i=await e.getIdToken(),r={requestType:"VERIFY_EMAIL",idToken:i};t&&iM(n.auth,r,t);let{email:s}=await nJ(n.auth,r);s!==e.email&&await e.reload()}async function iX(e,t,n){let i=eM(e),r=await e.getIdToken(),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:r,newEmail:t};n&&iM(i.auth,s,n);let{email:o}=await n1(i.auth,s);o!==e.email&&await e.reload()}async function iG(e,t){return t5(e,"POST","/v1/accounts:update",t)}async function iY(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;let i=eM(e),r=await i.getIdToken(),s=await na(i,iG(i.auth,{idToken:r,displayName:t,photoUrl:n,returnSecureToken:!0}));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;let o=i.providerData.find(({providerId:e})=>"password"===e);o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}async function iQ(e,t,n){let{auth:i}=e,r=await e.getIdToken(),s={idToken:r,returnSecureToken:!0};t&&(s.email=t),n&&(s.password=n);let o=await na(e,nX(i,s));await e._updateTokensIfNecessary(o,!0)}class iJ{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class iZ extends iJ{constructor(e,t,n,i){super(e,t,n),this.username=i}}class i0 extends iJ{constructor(e,t){super(e,"facebook.com",t)}}class i1 extends iZ{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class i6 extends iJ{constructor(e,t){super(e,"google.com",t)}}class i2 extends iZ{constructor(e,t,n){super(e,"twitter.com",t,n)}}class i5{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new i5("enroll",e,t)}static _fromMfaPendingCredential(e){return new i5("signin",e)}toJSON(){let e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return i5._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return i5._fromIdtoken(e.multiFactorSession.idToken)}return null}}class i3{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){let n=eM(e),i=t.customData._serverResponse,r=(i.mfaInfo||[]).map(e=>iO._fromServerResponse(n,e));tK(i.mfaPendingCredential,n,"internal-error");let s=i5._fromMfaPendingCredential(i.mfaPendingCredential);return new i3(s,r,async e=>{let r=await e._process(n,s);delete i.mfaInfo,delete i.mfaPendingCredential;let o=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":let a=await iy._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(a.user),a;case"reauthenticate":return tK(t.user,n,"internal-error"),iy._forOperation(t.user,t.operationType,o);default:tB(n,"internal-error")}})}async resolveSignIn(e){return this.signInResolver(e)}}class i4{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>iO._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new i4(e)}async getSession(){return i5._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){let n=await this.getSession(),i=await na(this.user,e._process(this.user.auth,n,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){let t="string"==typeof e?e:e.uid,n=await this.user.getIdToken();try{var i;let e=await na(this.user,(i=this.user.auth,t5(i,"POST","/v2/accounts/mfaEnrollment:withdraw",t2(i,{idToken:n,mfaEnrollmentId:t}))));this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==t),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(e){throw e}}}const i9=new WeakMap,i8="__sak";class i7{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(i8,"1"),this.storage.removeItem(i8),Promise.resolve(!0)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class re extends i7{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){let e=et();return nx(e)||nS(e)}()&&function(){try{return!!(window&&window!==window.top)}catch(e){return!1}}(),this.fallbackToPolling=nR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}let i=()=>{let e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);eo()&&10===document.documentMode&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}re.type="LOCAL";class rt extends i7{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}rt.type="SESSION";class rn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;let n=new rn(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:t,eventType:n,data:i}=e.data,r=this.handlersMap[n];if(!(null==r?void 0:r.size))return;e.ports[0].postMessage({status:"ack",eventId:t,eventType:n});let s=Array.from(r).map(async t=>t(e.origin,i)),o=await Promise.all(s.map(async e=>{try{let t=await e;return{fulfilled:!0,value:t}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:t,eventType:n,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ri(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}rn.receivers=[];class rr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let i,r;let s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw Error("connection_unavailable");return new Promise((o,a)=>{let l=ri("",20);s.port1.start();let c=setTimeout(()=>{a(Error("unsupported_event"))},n);r={messageChannel:s,onMessage(e){if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(e.data.response);break;default:clearTimeout(c),clearTimeout(i),a(Error("invalid_response"))}}},this.handlers.add(r),s.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])}).finally(()=>{r&&this.removeMessageHandler(r)})}}function rs(){return window}function ro(){return void 0!==rs().WorkerGlobalScope&&"function"==typeof rs().importScripts}async function ra(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{let e=await navigator.serviceWorker.ready;return e.active}catch(e){return null}}const rl="firebaseLocalStorageDb",rc="firebaseLocalStorage",ru="fbase_key";class rh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function rd(e,t){return e.transaction([rc],t?"readwrite":"readonly").objectStore(rc)}function rp(){let e=indexedDB.open(rl,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{let t=e.result;try{t.createObjectStore(rc,{keyPath:ru})}catch(e){n(e)}}),e.addEventListener("success",async()=>{let n=e.result;n.objectStoreNames.contains(rc)?t(n):(n.close(),await function(){let e=indexedDB.deleteDatabase(rl);return new rh(e).toPromise()}(),t(await rp()))})})}async function rf(e,t,n){let i=rd(e,!0).put({[ru]:t,value:n});return new rh(i).toPromise()}async function rm(e,t){let n=rd(e,!1).get(t),i=await new rh(n).toPromise();return void 0===i?null:i.value}function rg(e,t){let n=rd(e,!0).delete(t);return new rh(n).toPromise()}class ry{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await rp()),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ro()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rn._getInstance(ro()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>{let n=await this._poll();return{keyProcessed:n.includes(t.key)}}),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ra(),!this.activeServiceWorker)return;this.sender=new rr(this.activeServiceWorker);let n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null==navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await rp();return await rf(e,i8,"1"),await rg(e,i8),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>rf(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>rm(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>rg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>{let t=rd(e,!1).getAll();return new rh(t).toPromise()});if(!e||0!==this.pendingWrites)return[];let t=[],n=new Set;for(let{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ry.type="LOCAL";class r_{constructor(e){this.auth=e,this.counter=1e12,this._widgets=new Map}render(e,t){let n=this.counter;return this._widgets.set(n,new rv(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;let n=e||1e12;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;let n=e||1e12;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;let n=e||1e12;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class rv{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};let i="string"==typeof e?document.getElementById(e):e;tK(i,"argument-error",{appName:t}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){let t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<50;e++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(0);let{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw Error("reCAPTCHA mock was already deleted!")}}const rb=nz("rcb"),rw=new tJ(3e4,6e4);class rk{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=rs().grecaptcha)||void 0===e?void 0:e.render)}load(e,t=""){return(tK(t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t),e,"argument-error"),this.shouldResolveImmediately(t)&&nL(rs().grecaptcha))?Promise.resolve(rs().grecaptcha):new Promise((n,i)=>{let r=rs().setTimeout(()=>{i(tj(e,"network-request-failed"))},rw.get());rs()[rb]=()=>{rs().clearTimeout(r),delete rs()[rb];let s=rs().grecaptcha;if(!s||!nL(s)){i(tj(e,"internal-error"));return}let o=s.render;s.render=(e,t)=>{let n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};let s=`https://www.google.com/recaptcha/api.js??${ex({onload:rb,render:"explicit",hl:t})}`;nF(s).catch(()=>{clearTimeout(r),i(tj(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=rs().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class rx{async load(e){return new r_(e)}clearedOneInstance(){}}const rI="recaptcha",rC={theme:"light",type:"image"};class rT{constructor(e,t,n=Object.assign({},rC)){this.parameters=n,this.type=rI,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=eM(e),this.isInvisible="invisible"===this.parameters.size,tK("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");let i="string"==typeof t?document.getElementById(t):t;tK(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new rx:new rk,this.validateStartingState()}async verify(){this.assertNotDestroyed();let e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{let i=e=>{e&&(this.tokenChangeListeners.delete(i),n(e))};this.tokenChangeListeners.add(i),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){tK(!this.parameters.sitekey,this.auth,"argument-error"),tK(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),tK("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){let n=rs()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){tK(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){let t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){let e;tK(tY()&&!ro(),this.auth,"internal-error"),await (e=null,new Promise(t=>{if("complete"===document.readyState){t();return}e=()=>t(),window.addEventListener("load",e)}).catch(t=>{throw e&&window.removeEventListener("load",e),t})),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);let t=await nA(this.auth);tK(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return tK(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rN{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){let t=ii._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function rE(e,t,n){let i=eM(e),r=await rP(i,t,eM(n));return new rN(r,e=>iE(i,e))}async function rS(e,t,n){let i=eM(e);await iC(!1,i,"phone");let r=await rP(i.auth,t,eM(n));return new rN(r,e=>iS(i,e))}async function rR(e,t,n){let i=eM(e),r=await rP(i.auth,t,eM(n));return new rN(r,e=>iR(i,e))}async function rP(e,t,n){var i,r,s;let o=await n.verify();try{let a;if(tK("string"==typeof o,e,"argument-error"),tK(n.type===rI,e,"argument-error"),a="string"==typeof t?{phoneNumber:t}:t,"session"in a){let t=a.session;if("phoneNumber"in a){tK("enroll"===t.type,e,"internal-error");let n=await (r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:o}},t5(e,"POST","/v2/accounts/mfaEnrollment:start",t2(e,r)));return n.phoneSessionInfo.sessionInfo}{tK("signin"===t.type,e,"internal-error");let n=(null===(i=a.multiFactorHint)||void 0===i?void 0:i.uid)||a.multiFactorUid;tK(n,e,"missing-multi-factor-info");let r=await (s={mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:o}},t5(e,"POST","/v2/accounts/mfaSignIn:start",t2(e,s)));return r.phoneResponseInfo.sessionInfo}}{let{sessionInfo:t}=await n9(e,{phoneNumber:a.phoneNumber,recaptchaToken:o});return t}}finally{n._reset()}}async function rA(e,t){await iI(eM(e),t)}class rO{constructor(e){this.providerId=rO.PROVIDER_ID,this.auth=eM(e)}verifyPhoneNumber(e,t){return rP(this.auth,e,eM(t))}static credential(e,t){return ii._fromVerification(e,t)}static credentialFromResult(e){return rO.credentialFromTaggedObject(e)}static credentialFromError(e){return rO.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?ii._fromTokenResponse(t,n):null}}function rL(e,t){return t?ny(t):(tK(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}rO.PROVIDER_ID="phone",rO.PHONE_SIGN_IN_METHOD="phone";class rD extends n${constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return n3(e,this._buildIdpRequest())}_linkToIdToken(e,t){return n3(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return n3(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rM(e){return iN(e.auth,new rD(e),e.bypassAuthState)}function rF(e){let{auth:t,user:n}=e;return tK(n,t,"internal-error"),iT(n,new rD(e),e.bypassAuthState)}async function rz(e){let{auth:t,user:n}=e;return tK(n,t,"internal-error"),iI(n,new rD(e),e.bypassAuthState)}class rW{constructor(e,t,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s){this.reject(s);return}let a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rM;case"linkViaPopup":case"linkViaRedirect":return rz;case"reauthViaPopup":case"reauthViaRedirect":return rF;default:tB(this.auth,"internal-error")}}resolve(e){this.pendingPromise||tX("Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){this.pendingPromise||tX("Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rU=new tJ(2e3,1e4);async function rq(e,t,n){let i=eM(e);tV(e,t,io);let r=rL(i,n),s=new rH(i,"signInViaPopup",t,r);return s.executeNotNull()}async function rB(e,t,n){let i=eM(e);tV(i.auth,t,io);let r=rL(i.auth,n),s=new rH(i.auth,"reauthViaPopup",t,r,i);return s.executeNotNull()}async function rj(e,t,n){let i=eM(e);tV(i.auth,t,io);let r=rL(i.auth,n),s=new rH(i.auth,"linkViaPopup",t,r,i);return s.executeNotNull()}class rH extends rW{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,rH.currentPopupAction&&rH.currentPopupAction.cancel(),rH.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return tK(e,this.auth,"internal-error"),e}async onExecution(){1===this.filter.length||tX("Popup operations only handle one event");let e=ri();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(tj(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(tj(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rH.currentPopupAction=null}pollUserCancellation(){let e=()=>{var t,n;if(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tj(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rU.get())};e()}}rH.currentPopupAction=null;const rV=new Map;class r$ extends rW{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=rV.get(this.auth._key());if(!e){try{let t=await rK(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}rV.set(this.auth._key(),e)}return this.bypassAuthState||rV.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rK(e,t){let n=rQ(t),i=rY(e);if(!await i._isAvailable())return!1;let r=await i._get(n)==="true";return await i._remove(n),r}async function rX(e,t){return rY(e)._set(rQ(t),"true")}function rG(e,t){rV.set(e._key(),t)}function rY(e){return ny(e._redirectPersistence)}function rQ(e){return nv("pendingRedirect",e.config.apiKey,e.name)}async function rJ(e,t,n){let i=eM(e);tV(e,t,io),await i._initializationPromise;let r=rL(i,n);return await rX(r,i),r._openRedirect(i,t,"signInViaRedirect")}async function rZ(e,t,n){let i=eM(e);tV(i.auth,t,io),await i.auth._initializationPromise;let r=rL(i.auth,n);await rX(r,i.auth);let s=await r2(i);return r._openRedirect(i.auth,t,"reauthViaRedirect",s)}async function r0(e,t,n){let i=eM(e);tV(i.auth,t,io),await i.auth._initializationPromise;let r=rL(i.auth,n);await iC(!1,i,t.providerId),await rX(r,i.auth);let s=await r2(i);return r._openRedirect(i.auth,t,"linkViaRedirect",s)}async function r1(e,t){return await eM(e)._initializationPromise,r6(e,t,!1)}async function r6(e,t,n=!1){let i=eM(e),r=rL(i,t),s=new r$(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}async function r2(e){let t=ri(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class r5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return r4(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!r4(e)){let i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(tj(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(r3(e))}saveEventToCache(e){this.cachedEventUids.add(r3(e)),this.lastProcessedEventTime=Date.now()}}function r3(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function r4({type:e,error:t}){return"unknown"===e&&(null==t?void 0:t.code)==="auth/no-auth-event"}async function r9(e,t={}){return t5(e,"GET","/v1/projects",t)}const r8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r7=/^https?/;async function se(e){if(e.config.emulator)return;let{authorizedDomains:t}=await r9(e);for(let e of t)try{if(function(e){let t=tG(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){let r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!r7.test(n))return!1;if(r8.test(e))return i===e;let r=e.replace(/\./g,"\\."),s=RegExp("^(.+\\."+r+"|"+r+")$","i");return s.test(i)}(e))return}catch(e){}tB(e,"unauthorized-domain")}const st=new tJ(3e4,6e4);function sn(){let e=rs().___jsl;if(null==e?void 0:e.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}let si=null;const sr=new tJ(5e3,15e3),ss={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},so=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function sa(e){let t=await (si=si||new Promise((t,n)=>{var i,r,s;function o(){sn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{sn(),n(tj(e,"network-request-failed"))},timeout:st.get()})}if(null===(r=null===(i=rs().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else if(null===(s=rs().gapi)||void 0===s?void 0:s.load)o();else{let t=nz("iframefcb");return rs()[t]=()=>{gapi.load?o():n(tj(e,"network-request-failed"))},nF(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw si=null,e})),n=rs().gapi;return tK(n,e,"internal-error"),t.open({where:document.body,url:function(e){let t=e.config;tK(t.authDomain,e,"auth-domain-config-required");let n=t.emulator?tZ(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:tp},r=so.get(e.config.apiHost);r&&(i.eid=r);let s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${ex(i).slice(1)}`}(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ss,dontclear:!0},t=>new Promise(async(n,i)=>{await t.restyle({setHideOnLeave:!1});let r=tj(e,"network-request-failed"),s=rs().setTimeout(()=>{i(r)},sr.get());function o(){rs().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{i(r)})}))}const sl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class sc{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const su=encodeURIComponent("fac");async function sh(e,t,n,i,r,s){tK(e.config.authDomain,e,"auth-domain-config-required"),tK(e.config.apiKey,e,"invalid-api-key");let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:tp,eventId:r};if(t instanceof io)for(let[n,i]of(t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",ev(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters())),Object.entries(s||{})))o[n]=i;if(t instanceof ia){let e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}for(let t of(e.tenantId&&(o.tid=e.tenantId),Object.keys(o)))void 0===o[t]&&delete o[t];let a=await e._getAppCheckToken(),l=a?`#${su}=${encodeURIComponent(a)}`:"";return`${function({config:e}){return e.emulator?tZ(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${ex(o).slice(1)}${l}`}const sd="webStorageSupport",sp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rt,this._completeRedirectFn=r6,this._overrideRedirectResult=rG}async _openPopup(e,t,n,i){var r;(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager)||tX("_initialize() not called before _openPopup()");let s=await sh(e,t,n,tG(),i);return function(e,t,n,i=500,r=600){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",l=Object.assign(Object.assign({},sl),{width:i.toString(),height:r.toString(),top:s,left:o}),c=et().toLowerCase();n&&(a=nI(c)?"_blank":n),nk(c)&&(t=t||"http://localhost",l.scrollbars="yes");let u=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=et()){var t;return nS(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==a)return function(e,t){let n=document.createElement("a");n.href=e,n.target=t;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new sc(null);let h=window.open(t||"",a,u);tK(h,e,"popup-blocked");try{h.focus()}catch(e){}return new sc(h)}(e,s,ri())}async _openRedirect(e,t,n,i){await this._originValidation(e);let r=await sh(e,t,n,tG(),i);return rs().location.href=r,new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(n||tX("If manager is not set, promise should be"),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await sa(e),n=new r5(e);return t.register("authEvent",t=>{tK(null==t?void 0:t.authEvent,e,"invalid-auth-event");let i=n.onEvent(t.authEvent);return{status:i?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){let n=this.iframes[e._key()];n.send(sd,{type:sd},n=>{var i;let r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[sd];void 0!==r&&t(!!r),tB(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=se(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nR()||nx()||nS()}};class sf{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return tX("unexpected MultiFactorSessionType")}}}class sm extends sf{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new sm(e)}_finalizeEnroll(e,t,n){return t5(e,"POST","/v2/accounts/mfaEnrollment:finalize",t2(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}_finalizeSignIn(e,t){return t5(e,"POST","/v2/accounts/mfaSignIn:finalize",t2(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}}class sg{constructor(){}static assertion(e){return sm._fromCredential(e)}}sg.FACTOR_ID="phone";class sy extends sf{constructor(e,t,n){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(e,t){return new sy(t,void 0,e)}static _fromEnrollmentId(e,t){return new sy(t,e)}async _finalizeEnroll(e,t,n){return tK(void 0!==this.secret,e,"argument-error"),t5(e,"POST","/v2/accounts/mfaEnrollment:finalize",t2(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}))}async _finalizeSignIn(e,t){tK(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");let n={verificationCode:this.otp};return t5(e,"POST","/v2/accounts/mfaSignIn:finalize",t2(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n}))}}class s_{constructor(e,t,n,i,r,s,o){this.sessionInfo=s,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=r}static _fromStartTotpMfaEnrollmentResponse(e,t){return new s_(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var n;let i=!1;return(sv(e)||sv(t))&&(i=!0),i&&(sv(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),sv(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function sv(e){return void 0===e||(null==e?void 0:e.length)===0}var sb="@firebase/auth",sw="1.0.0";class sk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;let t=await this.auth.currentUser.getIdToken(e);return{accessToken:t}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){tK(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function sx(){return window}async function sI(e,t,n){var i;let{BuildInfo:r}=sx();t.sessionId||tX("AuthEvent did not contain a session ID");let s=await sN(t.sessionId),o={};return nS()?o.ibi=r.packageName:nT()?o.apn=r.packageName:tB(e,"operation-not-supported-in-this-environment"),r.displayName&&(o.appDisplayName=r.displayName),o.sessionId=s,sh(e,n,t.type,void 0,null!==(i=t.eventId)&&void 0!==i?i:void 0,o)}async function sC(e){let{BuildInfo:t}=sx(),n={};nS()?n.iosBundleId=t.packageName:nT()?n.androidPackageName=t.packageName:tB(e,"operation-not-supported-in-this-environment"),await r9(e,n)}async function sT(e,t,n){let{cordova:i}=sx(),r=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var e;s();let t=null===(e=i.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(tj(e,"redirect-cancelled-by-user"))},2e3))}function u(){(null==document?void 0:document.visibilityState)==="visible"&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),nT()&&document.addEventListener("visibilitychange",u,!1),r=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{r()}}async function sN(e){let t=function(e){if(/[0-9a-zA-Z]+/.test(e)||tX("Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return new TextEncoder().encode(e);let t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}(e),n=await crypto.subtle.digest("SHA-256",t),i=Array.from(new Uint8Array(n));return i.map(e=>e.toString(16).padStart(2,"0")).join("")}(e=>{var t;return null===(t=J())||void 0===t?void 0:t[`_${e}`]})("authIdTokenMaxAge"),function(e){ta(new eF("auth",(t,{options:n})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;tK(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nP(e)},c=new nB(i,r,s,l);return function(e,t){let n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ny);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{let i=e.getProvider("auth-internal");i.initialize()})),ta(new eF("auth-internal",e=>{let t=eM(e.getProvider("auth").getImmediate());return new sk(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),t_(sb,sw,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(e)),t_(sb,sw,"esm2017")}("Browser");class sE extends r5{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}async function sS(e){let t=await ny(re)._get(sR(e));return t&&await ny(re)._remove(sR(e)),t}function sR(e){return nv("authEvent",e.config.apiKey,e.name)}function sP(e){if(!(null==e?void 0:e.includes("?")))return{};let[t,...n]=e.split("?");return eI(n.join("?"))}const sA=class{constructor(){this._redirectPersistence=rt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=r6,this._overrideRedirectResult=rG}async _initialize(e){let t=e._key(),n=this.eventManagers.get(t);return n||(n=new sE(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){tB(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,i){!function(e){var t,n,i,r,s,o,a,l,c,u;let h=sx();tK("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),tK(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),tK("function"==typeof(null===(s=null===(r=null===(i=null==h?void 0:h.cordova)||void 0===i?void 0:i.plugins)||void 0===r?void 0:r.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tK("function"==typeof(null===(l=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tK("function"==typeof(null===(u=null===(c=null==h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);let r=await this._initialize(e);await r.initialized(),r.resetRedirect(),rV.clear(),await this._originValidation(e);let s=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:function(){let e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){let n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}(),postBody:null,tenantId:e.tenantId,error:tj(e,"no-auth-event")}}(e,n,i);await ny(re)._set(sR(e),s);let o=await sI(e,s,t),a=await function(e){let{cordova:t}=sx();return new Promise(n=>{t.plugins.browsertab.isAvailable(i=>{let r=null;i?t.plugins.browsertab.openUrl(e):r=t.InAppBrowser.open(e,!function(e=et()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_system":"_blank","location=yes"),n(r)})})}(o);return sT(e,r,a)}_isIframeWebStorageSupported(e,t){throw Error("Method not implemented.")}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sC(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){let{universalLinks:n,handleOpenURL:i,BuildInfo:r}=sx(),s=setTimeout(async()=>{await sS(e),t.onEvent(sO())},500),o=async n=>{clearTimeout(s);let i=await sS(e),r=null;i&&(null==n?void 0:n.url)&&(r=function(e,t){var n,i;let r=function(e){let t=sP(e),n=t.link?decodeURIComponent(t.link):void 0,i=sP(n).link,r=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0,s=sP(r).link;return s||r||i||n||e}(t);if(r.includes("/__/auth/callback")){let t=sP(r),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(i=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===i?void 0:i[1],a=o?tj(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:r,postBody:null}}return null}(i,n.url)),t.onEvent(r||sO())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,o);let a=`${r.packageName.toLowerCase()}://`;sx().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(a)&&o({url:e}),"function"==typeof i)try{i(e)}catch(e){console.error(e)}}}};function sO(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:tj("no-auth-event")}}function sL(){var e;return(null===(e=null==self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function sD(e=et()){return!!(("file:"===sL()||"ionic:"===sL()||"capacitor:"===sL())&&e.toLowerCase().match(/iphone|ipad|ipod|android/))}function sM(){try{let e=self.localStorage,t=ri();if(e){if(e.setItem(t,"1"),e.removeItem(t),function(e=et()){return eo()&&(null==document?void 0:document.documentMode)===11||function(e=et()){return/Edge\/\d+/.test(e)}(e)}())return el();return!0}}catch(e){return sF()&&el()}return!1}function sF(){return void 0!==v&&"WorkerGlobalScope"in v&&"importScripts"in v}function sz(){return("http:"===sL()||"https:"===sL()||er()||sD())&&!(es()||ei())&&sM()&&!sF()}function sW(){return sD()&&"undefined"!=typeof document}async function sU(){return!!sW()&&new Promise(e=>{let t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})}const sq={LOCAL:"local",NONE:"none",SESSION:"session"},sB="persistence";async function sj(e){await e._initializationPromise;let t=sH(),n=nv(sB,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function sH(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(e){return null}}class sV{constructor(){this.browserResolver=ny(sp),this.cordovaResolver=ny(sA),this.underlyingResolver=null,this._redirectPersistence=rt,this._completeRedirectFn=r6,this._overrideRedirectResult=rG}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,i)}async _openRedirect(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return sW()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return tK(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;let e=await sU();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function s$(e){let t;let{_tokenResponse:n}=e instanceof ec?e.customData:e;if(!n)return null;if(!(e instanceof ec)&&"temporaryProof"in n&&"phoneNumber"in n)return rO.credentialFromResult(e);let i=n.providerId;if(!i||i===tM.PASSWORD)return null;switch(i){case tM.GOOGLE:t=iu;break;case tM.FACEBOOK:t=ic;break;case tM.GITHUB:t=ih;break;case tM.TWITTER:t=im;break;default:let{oauthIdToken:r,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=n;if(!s&&!o&&!r&&!a)return null;if(a){if(i.startsWith("saml."))return id._create(i,a);return n4._fromParams({providerId:i,signInMethod:i,pendingToken:a,idToken:r,accessToken:s})}return new il(i).credential({idToken:r,accessToken:s,rawNonce:l})}return e instanceof ec?t.credentialFromError(e):t.credentialFromResult(e)}function sK(e,t){return t.catch(t=>{throw t instanceof ec&&function(e,t){var n;let i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if((null==t?void 0:t.code)==="auth/multi-factor-auth-required")t.resolver=new sG(e,function(e,t){var n;let i=eM(e);return tK(t.customData.operationType,i,"argument-error"),tK(null===(n=t.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,i,"argument-error"),i3._fromError(i,t)}(e,t));else if(i){let e=s$(t);e&&(t.credential=e,t.tenantId=i.tenantId||void 0,t.email=i.email||void 0,t.phoneNumber=i.phoneNumber||void 0)}}(e,t),t}).then(e=>{let t=e.operationType,n=e.user;return{operationType:t,credential:s$(e),additionalUserInfo:function(e){let{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;let{providerId:i}=e,r=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!i&&(null==e?void 0:e.idToken)){let i=null===(n=null===(t=no(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(i){let e="anonymous"!==i&&"custom"!==i?i:null;return new iJ(s,e)}}if(!i)return null;switch(i){case"facebook.com":return new i0(s,r);case"github.com":return new i1(s,r);case"google.com":return new i6(s,r);case"twitter.com":return new i2(s,r,e.screenName||null);case"custom":case"anonymous":return new iJ(s,null);default:return new iJ(s,i,r)}}(n)}(e),user:sY.getOrCreate(n)}})}async function sX(e,t){let n=await t;return{verificationId:n.verificationId,confirm:t=>sK(e,n.confirm(t))}}class sG{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return sK(this.auth.unwrap(),this.resolver.resolveSignIn(e))}}class sY{constructor(e){this._delegate=e,this.multiFactor=function(e){let t=eM(e);return i9.has(t)||i9.set(t,i4._fromUser(t)),i9.get(t)}(e)}static getOrCreate(e){return sY.USER_MAP.has(e)||sY.USER_MAP.set(e,new sY(e)),sY.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return sK(this.auth,iS(this._delegate,e))}async linkWithPhoneNumber(e,t){return sX(this.auth,rS(this._delegate,e,t))}async linkWithPopup(e){return sK(this.auth,rj(this._delegate,e,sV))}async linkWithRedirect(e){return await sj(eM(this.auth)),r0(this._delegate,e,sV)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return sK(this.auth,iR(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return sX(this.auth,rR(this._delegate,e,t))}reauthenticateWithPopup(e){return sK(this.auth,rB(this._delegate,e,sV))}async reauthenticateWithRedirect(e){return await sj(eM(this.auth)),rZ(this._delegate,e,sV)}sendEmailVerification(e){return iK(this._delegate,e)}async unlink(e){return await ix(this._delegate,e),this}updateEmail(e){return iQ(eM(this._delegate),e,null)}updatePassword(e){return iQ(eM(this._delegate),null,e)}updatePhoneNumber(e){return rA(this._delegate,e)}updateProfile(e){return iY(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return iX(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}sY.USER_MAP=new WeakMap;class sQ{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}let{apiKey:n}=e.options;tK(n,"invalid-api-key",{appName:e.name}),tK(n,"invalid-api-key",{appName:e.name});let i="undefined"!=typeof window?sV:void 0;this._delegate=t.initialize({options:{persistence:function(e,t){let n=function(e,t){let n=sH();if(!n)return[];let i=nv(sB,e,t),r=n.getItem(i);switch(r){case sq.NONE:return[n_];case sq.LOCAL:return[ry,rt];case sq.SESSION:return[rt];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(ry)||n.push(ry),"undefined"!=typeof window)for(let e of[re,rt])n.includes(e)||n.push(e);return n.includes(n_)||n.push(n_),n}(n,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(tz),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?sY.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){let i=eM(e);tK(i._canInitEmulator,i,"emulator-config-failed"),tK(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");let r=!!(null==n?void 0:n.disableWarnings),s=nH(t),{host:o,port:a}=function(e){let t=nH(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};let i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let e=r[1];return{host:e,port:nV(i.substr(e.length+1))}}{let[e,t]=i.split(":");return{host:e,port:nV(t)}}}(t),l=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(this._delegate,e,t)}applyActionCode(e){return iW(this._delegate,e)}checkActionCode(e){return iU(this._delegate,e)}confirmPasswordReset(e,t){return iz(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return sK(this._delegate,iB(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return i$(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){let n=ir.parseLink(t);return(null==n?void 0:n.operation)==="EMAIL_SIGNIN"}(this._delegate,e)}async getRedirectResult(){tK(sz(),this._delegate,"operation-not-supported-in-this-environment");let e=await r1(this._delegate,sV);return e?sK(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){eM(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){let{next:i,error:r,complete:s}=sJ(e,t,n);return this._delegate.onAuthStateChanged(i,r,s)}onIdTokenChanged(e,t,n){let{next:i,error:r,complete:s}=sJ(e,t,n);return this._delegate.onIdTokenChanged(i,r,s)}sendSignInLinkToEmail(e,t){return ij(this._delegate,e,t)}sendPasswordResetEmail(e,t){return iF(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(!function(e,t){if(tK(Object.values(sq).includes(t),e,"invalid-persistence-type"),es()){tK(t!==sq.SESSION,e,"unsupported-persistence-type");return}if(ei()){tK(t===sq.NONE,e,"unsupported-persistence-type");return}if(sF()){tK(t===sq.NONE||t===sq.LOCAL&&el(),e,"unsupported-persistence-type");return}tK(t===sq.NONE||sM(),e,"unsupported-persistence-type")}(this._delegate,e),e){case sq.SESSION:t=rt;break;case sq.LOCAL:let n=await ny(ry)._isAvailable();t=n?ry:re;break;case sq.NONE:t=n_;break;default:return tB("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return sK(this._delegate,iv(this._delegate))}signInWithCredential(e){return sK(this._delegate,iE(this._delegate,e))}signInWithCustomToken(e){return sK(this._delegate,iA(this._delegate,e))}signInWithEmailAndPassword(e,t){return sK(this._delegate,iE(eM(this._delegate),is.credential(e,t)))}signInWithEmailLink(e,t){return sK(this._delegate,iH(this._delegate,e,t))}signInWithPhoneNumber(e,t){return sX(this._delegate,rE(this._delegate,e,t))}async signInWithPopup(e){return tK(sz(),this._delegate,"operation-not-supported-in-this-environment"),sK(this._delegate,rq(this._delegate,e,sV))}async signInWithRedirect(e){return tK(sz(),this._delegate,"operation-not-supported-in-this-environment"),await sj(this._delegate),rJ(this._delegate,e,sV)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return iq(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function sJ(e,t,n){let i=e;"function"!=typeof e&&({next:i,error:t,complete:n}=e);let r=i;return{next:e=>r(e&&sY.getOrCreate(e)),error:t,complete:n}}sQ.Persistence=sq;class sZ{constructor(){this.providerId="phone",this._delegate=new rO(tO.auth().unwrap())}static credential(e,t){return rO.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}sZ.PHONE_SIGN_IN_METHOD=rO.PHONE_SIGN_IN_METHOD,sZ.PROVIDER_ID=rO.PROVIDER_ID;class s0{constructor(e,t,n=tO.app()){var i;tK(null===(i=n.options)||void 0===i?void 0:i.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new rT(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new eF("auth-compat",e=>{let t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new sQ(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:is,FacebookAuthProvider:ic,GithubAuthProvider:ih,GoogleAuthProvider:iu,OAuthProvider:il,SAMLAuthProvider:ip,PhoneAuthProvider:sZ,PhoneMultiFactorGenerator:sg,RecaptchaVerifier:s0,TwitterAuthProvider:im,Auth:sQ,AuthCredential:n$,Error:ec}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.4.3")}(tO);const s1="@firebase/database",s6="1.0.0";let s2="";class s5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ep(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ed(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class s3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return ey(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const s4=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new s5(t)}}catch(e){}return new s3},s9=s4("localStorage"),s8=s4("sessionStorage"),s7=new eK("@firebase/database"),oe=function(){let e=1;return function(){return e++}}(),ot=function(e){let t=eL(e),n=new eT;n.update(t);let i=n.digest();return j.encodeByteArray(i)},on=function(...e){let t="";for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=on.apply(null,i):"object"==typeof i?t+=ep(i):t+=i,t+=" "}return t};let oi=null,or=!0;const os=function(e,t){W(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(s7.logLevel=y.VERBOSE,oi=s7.log.bind(s7),t&&s8.set("logging_enabled",!0)):"function"==typeof e?oi=e:(oi=null,s8.remove("logging_enabled"))},oo=function(...e){if(!0===or&&(or=!1,null===oi&&!0===s8.get("logging_enabled")&&os(!0)),oi){let t=on.apply(null,e);oi(t)}},oa=function(e){return function(...t){oo(e,...t)}},ol=function(...e){let t="FIREBASE INTERNAL ERROR: "+on(...e);s7.error(t)},oc=function(...e){let t=`FIREBASE FATAL ERROR: ${on(...e)}`;throw s7.error(t),Error(t)},ou=function(...e){let t="FIREBASE WARNING: "+on(...e);s7.warn(t)},oh=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ou("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},od=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},op=function(e){if(ea()||"complete"===document.readyState)e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},of="[MIN_NAME]",om="[MAX_NAME]",og=function(e,t){if(e===t)return 0;{if(e===of||t===om)return -1;if(t===of||e===om)return 1;let n=oI(e),i=oI(t);return null!==n?null!==i?n-i==0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},oy=function(e,t){return e===t?0:e<t?-1:1},o_=function(e,t){if(t&&e in t)return t[e];throw Error("Missing required key ("+e+") in object: "+ep(t))},ov=function(e){if("object"!=typeof e||null===e)return ep(e);let t=[];for(let n in e)t.push(n);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=ep(t[i])+":"+ov(e[t[i]]);return n+"}"},ob=function(e,t){let n=e.length;if(n<=t)return[e];let i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function ow(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}const ok=function(e){let t,n,i,r,s;W(!od(e),"Invalid JSON number"),0===e?(n=0,i=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=22250738585072014e-324?(n=(r=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,i=Math.round(e*Math.pow(2,52-r)-4503599627370496)):(n=0,i=Math.round(e/5e-324)));let o=[];for(s=52;s;s-=1)o.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)o.push(n%2?1:0),n=Math.floor(n/2);o.push(t?1:0),o.reverse();let a=o.join(""),l="";for(s=0;s<64;s+=8){let e=parseInt(a.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},ox=RegExp("^-?(0*)\\d{1,10}$"),oI=function(e){if(ox.test(e)){let t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},oC=function(e){try{e()}catch(e){setTimeout(()=>{let t=e.stack||"";throw ou("Exception was thrown by user callback.",t),e},Math.floor(0))}},oT=function(){let e="object"==typeof window&&window.navigator&&window.navigator.userAgent||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},oN=function(e,t){let n=setTimeout(e,t);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class oE{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(e=>this.appCheck=e)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){ou(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class oS{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(oo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ou(e)}}class oR{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}oR.OWNER="owner";const oP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,oA="websocket",oO="long_polling";class oL{constructor(e,t,n,i,r=!1,s="",o=!1,a=!1){this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=s9.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&s9.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function oD(e,t,n){let i;if(W("string"==typeof t,"typeof type must == string"),W("object"==typeof n,"typeof params must == object"),t===oA)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===oO)i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw Error("Unknown connection type: "+t);(e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams)&&(n.ns=e.namespace);let r=[];return ow(n,(e,t)=>{r.push(e+"="+t)}),i+r.join("&")}class oM{constructor(){this.counters_={}}incrementCounter(e,t=1){ey(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return X(void 0,this.counters_)}}const oF={},oz={};function oW(e){let t=e.toString();return oF[t]||(oF[t]=new oM),oF[t]}class oU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&oC(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const oq="start";class oB{constructor(e,t,n,i,r,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=oa(e),this.stats_=oW(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),oD(t,oO,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new oU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),op(()=>{if(this.isClosed_)return;this.scriptTagHolder=new oj((...e)=>{let[t,n,i,r,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder){if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===oq)this.id=n,this.password=i;else if("close"===t)n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_();else throw Error("Unrecognized command received: "+t)}},(...e)=>{let[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)},()=>{this.onClosed_()},this.urlFn);let e={};e[oq]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&oP.test(location.hostname)&&(e.r="f");let t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){oB.forceAllow_=!0}static forceDisallow(){oB.forceDisallow_=!0}static isAvailable(){return!ea()&&(!!oB.forceAllow_||!oB.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){!this.isClosed_&&(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=ep(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let n=V(t),i=ob(n,1840);for(let e=0;e<i.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(ea())return;this.myDisconnFrame=document.createElement("iframe");let n={};n.dframe="t",n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=ep(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class oj{constructor(e,t,n,i){if(this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,ea())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=oe(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=oj.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){let e=document.domain;n='<script>document.domain="'+e+'";</script>'}let i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(e){oo("frame writing exception"),e.stack&&oo(e.stack),oo(e)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{let t=e.contentWindow.document;t||oo("No IE domain setting required")}catch(n){let t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(!this.alive||!this.sendNewPolls||!(this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)))return!1;{this.currentSerial++;let e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0;){let e=this.pendingSegs[0];if(e.d.length+30+n.length<=1870){let e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}else break}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),n()})}addTag(e,t){ea()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){let e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{oo("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(e){}},Math.floor(1))}}let oH=null;"undefined"!=typeof MozWebSocket?oH=MozWebSocket:"undefined"!=typeof WebSocket&&(oH=WebSocket);class oV{constructor(e,t,n,i,r,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=oa(this.connId),this.stats_=oW(t),this.connURL=oV.connectionURL_(t,s,o,i,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i,r){let s={};return s.v="5",!ea()&&"undefined"!=typeof location&&location.hostname&&oP.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),i&&(s.ac=i),r&&(s.p=r),oD(e,oA,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,s9.set("previous_websocket_failure",!0);try{let e;if(ea()){let t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/5/${s2}/${T.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);let n={},i=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;i&&(e.proxy={origin:i})}this.mySock=new oH(this.connURL,[],e)}catch(t){this.log_("Error instantiating WebSocket.");let e=t.message||t.data;e&&this.log_(e),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");let t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){oV.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){let t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);t&&t.length>1&&4.4>parseFloat(t[1])&&(e=!0)}return!e&&null!==oH&&!oV.forceDisallow_}static previouslyFailed(){return s9.isInMemoryStorage||!0===s9.get("previous_websocket_failure")}markConnectionHealthy(){s9.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let e=this.frames.join("");this.frames=null;let t=ed(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(W(null===this.frames,"We already have a frame buffer"),e.length<=6){let t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;let t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{let e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();let t=ep(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let n=ob(t,16384);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){!this.isClosed_&&(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}oV.responsesRequiredToBeHealthy=2,oV.healthyTimeout=3e4;class o${constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[oB,oV]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){let t=oV&&oV.isAvailable(),n=t&&!oV.previouslyFailed();if(e.webSocketOnly&&(t||ou("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[oV];else{let e=this.transports_=[];for(let t of o$.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);o$.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}o$.globalTransportInitialized_=!1;class oK{constructor(e,t,n,i,r,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=oa("c:"+this.id+":"),this.transportManager_=new o$(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=oN(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){let t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=o_("t",e),n=o_("d",e);if("c"===t)this.onSecondaryControl_(n);else if("d"===t)this.pendingDataMessages.push(n);else throw Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=o_("t",e),n=o_("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){!this.isHealthy_&&(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=o_("t",e);if("d"in e){let n=e.d;if("h"===t){let e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?ol("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ol("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&ou("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),oN(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):oN(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(s9.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class oX{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class oG{constructor(e){this.allowedEvents_=e,this.listeners_={},W(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});let i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let e=0;e<i.length;e++)if(i[e].callback===t&&(!n||n===i[e].context)){i.splice(e,1);return}}validateEventType_(e){W(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class oY extends oG{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||en()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new oY}getInitialEvent(e){return W("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class oQ{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function oJ(){return new oQ("")}function oZ(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function o0(e){return e.pieces_.length-e.pieceNum_}function o1(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new oQ(e.pieces_,t)}function o6(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function o2(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function o5(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new oQ(t,0)}function o3(e,t){let n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof oQ)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{let e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new oQ(n,0)}function o4(e){return e.pieceNum_>=e.pieces_.length}function o9(e,t){let n=oZ(e),i=oZ(t);if(null===n)return t;if(n===i)return o9(o1(e),o1(t));throw Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function o8(e,t){let n=o2(e,0),i=o2(t,0);for(let e=0;e<n.length&&e<i.length;e++){let t=og(n[e],i[e]);if(0!==t)return t}return n.length===i.length?0:n.length<i.length?-1:1}function o7(e,t){if(o0(e)!==o0(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function ae(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(o0(e)>o0(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class at{constructor(e,t){this.errorPrefix_=t,this.parts_=o2(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=eD(this.parts_[e]);an(this)}}function an(e){if(e.byteLength_>768)throw Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ai(e))}function ai(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class ar extends oG{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}static getInstance(){return new ar}getInitialEvent(e){return W("visible"===e,"Unknown event type: "+e),[this.visible_]}}class as extends oX{constructor(e,t,n,i,r,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=as.nextPersistentConnectionId_++,this.log_=oa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=1e3,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!ea())throw Error("Auth override specified in options, but not supported on non Node.js platforms");ar.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&oY.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){let i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_(ep(r)),W(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();let t=new ee,n={p:e._path.toString(),q:e._queryObject};this.outstandingGets_.push({action:"g",request:n,onComplete:e=>{let n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}}),this.outstandingGetCount_++;let i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,i){this.initConnection_();let r=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),W(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");let o={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(s).set(r,o),this.connected_&&this.sendListen_(o)}sendGet_(e){let t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){let t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);let r={p:n};e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest("q",r,r=>{let s=r.d,o=r.s;as.warnOnListenWarnings_(s,t);let a=this.listens.get(n)&&this.listens.get(n).get(i);a===e&&(this.log_("listen response",r),"ok"!==o&&this.removeListen_(n,i),e.onComplete&&e.onComplete(o,s))})}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&ey(e,"w")){let n=e_(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){let e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();ou(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){let t=e&&40===e.length;(t||eg(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,t=em(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{let n=t.s,i=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){let n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");let r=this.removeListen_(n,i);r&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);let r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){let r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,e=>{i&&setTimeout(()=>{i(e.s,e.d)},Math.floor(0))})}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,r){this.initConnection_();let s={p:t,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;let o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){let t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)})}reportStats(e){if(this.connected_){let t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{let t=e.s;if("ok"!==t){let t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ep(e));let t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else if("error"in e)throw"A server-side error has occurred: "+e.error;else"a"in e&&this.onDataPush_(e.a,e.b)}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):ol("Unrecognized action received from server: "+ep(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){W(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){!e||this.visible_||this.reconnectDelay_!==this.maxReconnectDelay_||(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){let e=new Date().getTime()-this.lastConnectionEstablishedTime_;e>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime();let e=new Date().getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+as.nextConnectionId_++,r=this.lastSessionId,s=!1,o=null,a=function(){o?o.close():(s=!0,n())};this.realtime_={close:a,sendRequest:function(e){W(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)}};let l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[a,c]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);s?oo("getToken() completed but was canceled"):(oo("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=c&&c.token,o=new oK(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,e=>{ou(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},r))}catch(e){this.log_("Failed to get token: "+e),s||(this.repoInfo_.nodeAdmin&&ou(e),a())}}}interrupt(e){oo("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){oo("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ev(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>ov(e)).join("$"):"default";let i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){let n;let i=new oQ(e).toString();if(this.listens.has(i)){let e=this.listens.get(i);n=e.get(t),e.delete(t),0===e.size&&this.listens.delete(i)}else n=void 0;return n}onAuthRevoked_(e,t){oo("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){oo("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){for(let e of(this.tryAuth(),this.tryAppCheck(),this.listens.values()))for(let t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},t="js";ea()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+s2.replace(/\./g,"-")]=1,en()?e["framework.cordova"]=1:es()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=oY.getInstance().currentlyOnline();return ev(this.interruptReasons_)&&e}}as.nextPersistentConnectionId_=0,as.nextConnectionId_=0;class ao{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ao(e,t)}}class aa{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let n=new ao(of,e),i=new ao(of,t);return 0!==this.compare(n,i)}minPost(){return ao.MIN}}class al extends aa{static get __EMPTY_NODE(){return n}static set __EMPTY_NODE(e){n=e}compare(e,t){return og(e.name,t.name)}isDefinedOn(e){throw U("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ao.MIN}maxPost(){return new ao(om,n)}makePost(e,t){return W("string"==typeof e,"KeyIndex indexValue must always be a string."),new ao(e,n)}toString(){return".key"}}const ac=new al;class au{constructor(e,t,n,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else if(0===s){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}getNext(){let e;if(0===this.nodeStack_.length)return null;let t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ah{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:ah.RED,this.left=null!=i?i:ad.EMPTY_NODE,this.right=null!=r?r:ad.EMPTY_NODE}copy(e,t,n,i,r){return new ah(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this,r=n(e,i.key);return(i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n))).fixUp_()}removeMin_(){if(this.left.isEmpty())return ad.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}remove(e,t){let n,i;if(n=this,0>t(e,n.key))n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ad.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,ah.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,ah.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){let e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e===this.right.check_())return e+(this.isRed_()?0:1);throw Error("Black depths differ")}}ah.RED=!0,ah.BLACK=!1;class ad{constructor(e,t=ad.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ad(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ah.BLACK,null,null))}remove(e){return new ad(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ah.BLACK,null,null))}get(e){let t;let n=this.root_;for(;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty()){if(i)return i.key;return null}for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new au(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new au(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new au(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new au(this.root_,null,this.comparator_,!0,e)}}function ap(e,t){return og(e.name,t.name)}function af(e,t){return og(e,t)}ad.EMPTY_NODE=new class{copy(e,t,n,i,r){return this}insert(e,t,n){return new ah(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const am=function(e){return"number"==typeof e?"number:"+ok(e):"string:"+e},ag=function(e){if(e.isLeafNode()){let t=e.val();W("string"==typeof t||"number"==typeof t||"object"==typeof t&&ey(t,".sv"),"Priority must be a string or number.")}else W(e===i||e.isEmpty(),"priority of unexpected type.");W(e===i||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};class ay{constructor(e,t=ay.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,W(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ag(this.priorityNode_)}static set __childrenNodeConstructor(e){r=e}static get __childrenNodeConstructor(){return r}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ay(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:ay.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return o4(e)?this:".priority"===oZ(e)?this.priorityNode_:ay.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:ay.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){let n=oZ(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(W(".priority"!==n||1===o0(e),".priority must be the last token in a path"),this.updateImmediateChild(n,ay.__childrenNodeConstructor.EMPTY_NODE.updateChild(o1(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+am(this.priorityNode_.val())+":");let t=typeof this.value_;e+=t+":","number"===t?e+=ok(this.value_):e+=this.value_,this.lazyHash_=ot(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ay.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ay.__childrenNodeConstructor?-1:(W(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let t=typeof e.value_,n=typeof this.value_,i=ay.VALUE_TYPE_ORDER.indexOf(t),r=ay.VALUE_TYPE_ORDER.indexOf(n);return(W(i>=0,"Unknown leaf type: "+t),W(r>=0,"Unknown leaf type: "+n),i!==r)?r-i:"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}}ay.VALUE_TYPE_ORDER=["object","boolean","number","string"];const a_=new class extends aa{compare(e,t){let n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?og(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ao.MIN}maxPost(){return new ao(om,new ay("[PRIORITY-POST]",o))}makePost(e,t){let n=s(e);return new ao(t,new ay("[PRIORITY-POST]",n))}toString(){return".priority"}},av=Math.log(2);class ab{constructor(e){this.count=parseInt(Math.log(e+1)/av,10),this.current_=this.count-1;let t=parseInt(Array(this.count+1).join("1"),2);this.bits_=e+1&t}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}}const aw=function(e,t,n,i){e.sort(t);let r=function(t,i){let s,o;let a=i-t;if(0===a)return null;if(1===a)return s=e[t],o=n?n(s):s,new ah(o,s.node,ah.BLACK,null,null);{let l=parseInt(a/2,10)+t,c=r(t,l),u=r(l+1,i);return s=e[l],o=n?n(s):s,new ah(o,s.node,ah.BLACK,c,u)}},s=new ab(e.length),o=function(t){let i=null,s=null,o=e.length,a=function(t,i){let s=o-t,a=o;o-=t;let c=r(s+1,a),u=e[s],h=n?n(u):u;l(new ah(h,u.node,i,null,c))},l=function(e){i?i.left=e:s=e,i=e};for(let e=0;e<t.count;++e){let n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?a(i,ah.BLACK):(a(i,ah.BLACK),a(i,ah.RED))}return s}(s);return new ad(i||t,o)},ak={};class ax{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return W(ak&&a_,"ChildrenNode.ts has not been loaded"),a=a||new ax({".priority":ak},{".priority":a_})}get(e){let t=e_(this.indexes_,e);if(!t)throw Error("No index defined for "+e);return t instanceof ad?t:null}hasIndex(e){return ey(this.indexSet_,e.toString())}addIndex(e,t){let n;W(e!==ac,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=t.getIterator(ao.Wrap),o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();n=r?aw(i,e.getCompare()):ak;let a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;let c=Object.assign({},this.indexes_);return c[a]=n,new ax(c,l)}addToIndexes(e,t){let n=eb(this.indexes_,(n,i)=>{let r=e_(this.indexSet_,i);if(W(r,"Missing index implementation for "+i),n===ak){if(!r.isDefinedOn(e.node))return ak;{let n=[],i=t.getIterator(ao.Wrap),s=i.getNext();for(;s;)s.name!==e.name&&n.push(s),s=i.getNext();return n.push(e),aw(n,r.getCompare())}}{let i=t.get(e.name),r=n;return i&&(r=r.remove(new ao(e.name,i))),r.insert(e,e.node)}});return new ax(n,this.indexSet_)}removeFromIndexes(e,t){let n=eb(this.indexes_,n=>{if(n===ak)return n;{let i=t.get(e.name);return i?n.remove(new ao(e.name,i)):n}});return new ax(n,this.indexSet_)}}class aI{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ag(this.priorityNode_),this.children_.isEmpty()&&W(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return l||(l=new aI(new ad(af),null,ax.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||l}updatePriority(e){return this.children_.isEmpty()?this:new aI(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{let t=this.children_.get(e);return null===t?l:t}}getChild(e){let t=oZ(e);return null===t?this:this.getImmediateChild(t).getChild(o1(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(W(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{let n,i;let r=new ao(e,t);t.isEmpty()?(n=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(n=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(r,this.children_));let s=n.isEmpty()?l:this.priorityNode_;return new aI(n,s,i)}}updateChild(e,t){let n=oZ(e);if(null===n)return t;{W(".priority"!==oZ(e)||1===o0(e),".priority must be the last token in a path");let i=this.getImmediateChild(n).updateChild(o1(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let t={},n=0,i=0,r=!0;if(this.forEachChild(a_,(s,o)=>{t[s]=o.val(e),n++,r&&aI.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):r=!1}),e||!r||!(i<2*n))return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t;{let e=[];for(let n in t)e[n]=t[n];return e}}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+am(this.getPriority().val())+":"),this.forEachChild(a_,(t,n)=>{let i=n.hash();""!==i&&(e+=":"+t+":"+i)}),this.lazyHash_=""===e?"":ot(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){let i=this.resolveIndex_(n);if(!i)return this.children_.getPredecessorKey(e);{let n=i.getPredecessorKey(new ao(e,t));return n?n.name:null}}getFirstChildName(e){let t=this.resolveIndex_(e);if(!t)return this.children_.minKey();{let e=t.minKey();return e&&e.name}}getFirstChild(e){let t=this.getFirstChildName(e);return t?new ao(t,this.children_.get(t)):null}getLastChildName(e){let t=this.resolveIndex_(e);if(!t)return this.children_.maxKey();{let e=t.maxKey();return e&&e.name}}getLastChild(e){let t=this.getLastChildName(e);return t?new ao(t,this.children_.get(t)):null}forEachChild(e,t){let n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){let n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{let n=this.children_.getIteratorFrom(e.name,ao.Wrap),i=n.peek();for(;null!=i&&0>t.compare(i,e);)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){let n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{let n=this.children_.getReverseIteratorFrom(e.name,ao.Wrap),i=n.peek();for(;null!=i&&t.compare(i,e)>0;)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===aC?-1:0}withIndex(e){if(e===ac||this.indexMap_.hasIndex(e))return this;{let t=this.indexMap_.addIndex(e,this.children_);return new aI(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===ac||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode()||!this.getPriority().equals(e.getPriority())||this.children_.count()!==e.children_.count())return!1;{let t=this.getIterator(a_),n=e.getIterator(a_),i=t.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=t.getNext(),r=n.getNext()}return null===i&&null===r}}resolveIndex_(e){return e===ac?null:this.indexMap_.get(e.toString())}}aI.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const aC=new class extends aI{constructor(){super(new ad(af),aI.EMPTY_NODE,ax.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return aI.EMPTY_NODE}isEmpty(){return!1}};function aT(e,t=null){if(null===e)return aI.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),W(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e){let n=e;return new ay(n,aT(t))}if(e instanceof Array){let n=aI.EMPTY_NODE;return ow(e,(t,i)=>{if(ey(e,t)&&"."!==t.substring(0,1)){let e=aT(i);(e.isLeafNode()||!e.isEmpty())&&(n=n.updateImmediateChild(t,e))}}),n.updatePriority(aT(t))}{let n=[],i=!1,r=e;if(ow(r,(e,t)=>{if("."!==e.substring(0,1)){let r=aT(t);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new ao(e,r)))}}),0===n.length)return aI.EMPTY_NODE;let s=aw(n,ap,e=>e.name,af);if(!i)return new aI(s,aT(t),ax.Default);{let e=aw(n,a_.getCompare());return new aI(s,aT(t),new ax({".priority":e},{".priority":a_}))}}}Object.defineProperties(ao,{MIN:{value:new ao(of,aI.EMPTY_NODE)},MAX:{value:new ao(om,aC)}}),al.__EMPTY_NODE=aI.EMPTY_NODE,ay.__childrenNodeConstructor=aI,i=aC,o=aC,s=aT;class aN extends aa{constructor(e){super(),this.indexPath_=e,W(!o4(e)&&".priority"!==oZ(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?og(e.name,t.name):r}makePost(e,t){let n=aT(e),i=aI.EMPTY_NODE.updateChild(this.indexPath_,n);return new ao(t,i)}maxPost(){let e=aI.EMPTY_NODE.updateChild(this.indexPath_,aC);return new ao(om,e)}toString(){return o2(this.indexPath_,0).join("/")}}const aE=new class extends aa{compare(e,t){let n=e.node.compareTo(t.node);return 0===n?og(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ao.MIN}maxPost(){return ao.MAX}makePost(e,t){let n=aT(e);return new ao(t,n)}toString(){return".value"}};function aS(e){return{type:"value",snapshotNode:e}}function aR(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function aP(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function aA(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class aO{constructor(e){this.index_=e}updateChild(e,t,n,i,r,s){W(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let o=e.getImmediateChild(t);return o.getChild(i).equals(n.getChild(i))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(aP(t,o)):W(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(aR(t,n)):s.trackChildChange(aA(t,n,o))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(t,n).withIndex(this.index_)}updateFullNode(e,t,n){return null==n||(e.isLeafNode()||e.forEachChild(a_,(e,i)=>{t.hasChild(e)||n.trackChildChange(aP(e,i))}),t.isLeafNode()||t.forEachChild(a_,(t,i)=>{if(e.hasChild(t)){let r=e.getImmediateChild(t);r.equals(i)||n.trackChildChange(aA(t,i,r))}else n.trackChildChange(aR(t,i))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?aI.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class aL{constructor(e){this.indexedFilter_=new aO(e.getIndex()),this.index_=e.getIndex(),this.startPost_=aL.getStartPost_(e),this.endPost_=aL.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?0>=this.index_.compare(this.getStartPost(),e):0>this.index_.compare(this.getStartPost(),e),n=this.endIsInclusive_?0>=this.index_.compare(e,this.getEndPost()):0>this.index_.compare(e,this.getEndPost());return t&&n}updateChild(e,t,n,i,r,s){return this.matches(new ao(t,n))||(n=aI.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,r,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=aI.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(aI.EMPTY_NODE);let r=this;return t.forEachChild(a_,(e,t)=>{r.matches(new ao(e,t))||(i=i.updateImmediateChild(e,aI.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(!e.hasStart())return e.getIndex().minPost();{let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}}static getEndPost_(e){if(!e.hasEnd())return e.getIndex().maxPost();{let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}}}class aD{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{let t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{let t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new aL(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,i,r,s){return(this.rangedFilter_.matches(new ao(t,n))||(n=aI.EMPTY_NODE),e.getImmediateChild(t).equals(n))?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,r,s):this.fullLimitUpdateChild_(e,t,n,r,s)}updateFullNode(e,t,n){let i;if(t.isLeafNode()||t.isEmpty())i=aI.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;i=aI.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){let t=e.getNext();if(this.withinDirectionalStart(t)){if(this.withinDirectionalEnd(t))i=i.updateImmediateChild(t.name,t.node),n++;else break}}}else{let e;i=(i=t.withIndex(this.index_)).updatePriority(aI.EMPTY_NODE),e=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let n=0;for(;e.hasNext();){let t=e.getNext(),r=n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t);r?n++:i=i.updateImmediateChild(t.name,aI.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,i,r){let s;if(this.reverse_){let e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();W(e.numChildren()===this.limit_,"");let o=new ao(t,n),a=this.reverse_?e.getFirstChild(this.index_):e.getLastChild(this.index_),l=this.rangedFilter_.matches(o);if(e.hasChild(t)){let c=e.getImmediateChild(t),u=i.getChildAfterChild(this.index_,a,this.reverse_);for(;null!=u&&(u.name===t||e.hasChild(u.name));)u=i.getChildAfterChild(this.index_,u,this.reverse_);let h=null==u?1:s(u,o),d=l&&!n.isEmpty()&&h>=0;if(d)return null!=r&&r.trackChildChange(aA(t,n,c)),e.updateImmediateChild(t,n);{null!=r&&r.trackChildChange(aP(t,c));let n=e.updateImmediateChild(t,aI.EMPTY_NODE),i=null!=u&&this.rangedFilter_.matches(u);return i?(null!=r&&r.trackChildChange(aR(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:l&&s(a,o)>=0?(null!=r&&(r.trackChildChange(aP(a.name,a.node)),r.trackChildChange(aR(t,n))),e.updateImmediateChild(t,n).updateImmediateChild(a.name,aI.EMPTY_NODE)):e}}class aM{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=a_}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return W(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(W(this.startSet_,"Only valid if start has been set"),this.startNameSet_)?this.indexStartName_:of}hasEnd(){return this.endSet_}getIndexEndValue(){return W(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(W(this.endSet_,"Only valid if end has been set"),this.endNameSet_)?this.indexEndName_:om}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return W(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===a_}copy(){let e=new aM;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function aF(e,t,n){let i=e.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=n?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function az(e,t,n){let i=e.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==n?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function aW(e,t){let n=e.copy();return n.index_=t,n}function aU(e){let t;let n={};if(e.isDefault())return n;if(e.index_===a_?t="$priority":e.index_===aE?t="$value":e.index_===ac?t="$key":(W(e.index_ instanceof aN,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=ep(t),e.startSet_){let t=e.startAfterSet_?"startAfter":"startAt";n[t]=ep(e.indexStartValue_),e.startNameSet_&&(n[t]+=","+ep(e.indexStartName_))}if(e.endSet_){let t=e.endBeforeSet_?"endBefore":"endAt";n[t]=ep(e.indexEndValue_),e.endNameSet_&&(n[t]+=","+ep(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function aq(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==a_&&(t.i=e.index_.toString()),t}class aB extends oX{constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=oa("p:rest:"),this.listens_={}}reportStats(e){throw Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(W(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,i){let r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);let s=aB.getListenId_(e,n),o={};this.listens_[s]=o;let a=aU(e._queryParams);this.restRequest_(r+".json",a,(e,t)=>{let a=t;404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(r,a,!1,n),e_(this.listens_,s)===o&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)})}unlisten(e,t){let n=aB.getListenId_(e,t);delete this.listens_[n]}get(e){let t=aU(e._queryParams),n=e._path.toString(),i=new ee;return this.restRequest_(n+".json",t,(e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(Error(r))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,r])=>{i&&i.accessToken&&(t.auth=i.accessToken),r&&r.token&&(t.ac=r.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ex(t);this.log_("Sending REST request for "+s);let o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=ed(o.responseText)}catch(e){ou("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&ou("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()})}}class aj{constructor(){this.rootNode_=aI.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function aH(){return{value:null,children:new Map}}function aV(e,t,n){if(o4(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{let i=oZ(t);e.children.has(i)||e.children.set(i,aH());let r=e.children.get(i);aV(r,t=o1(t),n)}}function a$(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,i)=>{let r=new oQ(t.toString()+"/"+e);a$(i,r,n)})}class aK{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ow(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class aX{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new aK(e),oN(this.reportStats_.bind(this),Math.floor(1e4+2e4*Math.random()))}reportStats_(){let e=this.statsListener_.get(),t={},n=!1;ow(e,(e,i)=>{i>0&&ey(this.statsToReport_,e)&&(t[e]=i,n=!0)}),n&&this.server_.reportStats(t),oN(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}function aG(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function aY(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function aQ(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(_||(_={}));class aJ{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=_.ACK_USER_WRITE,this.source=aG()}operationForChild(e){if(!o4(this.path))return W(oZ(this.path)===e,"operationForChild called for unrelated child."),new aJ(o1(this.path),this.affectedTree,this.revert);if(null!=this.affectedTree.value)return W(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new oQ(e));return new aJ(oJ(),t,this.revert)}}}class aZ{constructor(e,t){this.source=e,this.path=t,this.type=_.LISTEN_COMPLETE}operationForChild(e){return o4(this.path)?new aZ(this.source,oJ()):new aZ(this.source,o1(this.path))}}class a0{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=_.OVERWRITE}operationForChild(e){return o4(this.path)?new a0(this.source,oJ(),this.snap.getImmediateChild(e)):new a0(this.source,o1(this.path),this.snap)}}class a1{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=_.MERGE}operationForChild(e){if(!o4(this.path))return W(oZ(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new a1(this.source,o1(this.path),this.children);{let t=this.children.subtree(new oQ(e));return t.isEmpty()?null:t.value?new a0(this.source,oJ(),t.value):new a1(this.source,oJ(),t)}}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class a6{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(o4(e))return this.isFullyInitialized()&&!this.filtered_;let t=oZ(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class a2{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function a5(e,t,n,i,r,s){let o=i.filter(e=>e.type===n);o.sort((t,n)=>(function(e,t,n){if(null==t.childName||null==n.childName)throw U("Should only compare child_ events.");let i=new ao(t.childName,t.snapshotNode),r=new ao(n.childName,n.snapshotNode);return e.index_.compare(i,r)})(e,t,n)),o.forEach(n=>{let i=("value"===n.type||"child_removed"===n.type||(n.prevName=s.getPredecessorChildName(n.childName,n.snapshotNode,e.index_)),n);r.forEach(r=>{r.respondsTo(n.type)&&t.push(r.createEvent(i,e.query_))})})}function a3(e,t){return{eventCache:e,serverCache:t}}function a4(e,t,n,i){return a3(new a6(t,n,i),e.serverCache)}function a9(e,t,n,i){return a3(e.eventCache,new a6(t,n,i))}function a8(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function a7(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}const le=()=>(c||(c=new ad(oy)),c);class lt{constructor(e,t=le()){this.value=e,this.children=t}static fromObject(e){let t=new lt(null);return ow(e,(e,n)=>{t=t.set(new oQ(e),n)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:oJ(),value:this.value};if(o4(e))return null;{let n=oZ(e),i=this.children.get(n);if(null===i)return null;{let r=i.findRootMostMatchingPathAndValue(o1(e),t);if(null==r)return null;{let e=o3(new oQ(n),r.path);return{path:e,value:r.value}}}}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(o4(e))return this;{let t=oZ(e),n=this.children.get(t);return null!==n?n.subtree(o1(e)):new lt(null)}}set(e,t){if(o4(e))return new lt(t,this.children);{let n=oZ(e),i=this.children.get(n)||new lt(null),r=i.set(o1(e),t),s=this.children.insert(n,r);return new lt(this.value,s)}}remove(e){if(o4(e))return this.children.isEmpty()?new lt(null):new lt(null,this.children);{let t=oZ(e),n=this.children.get(t);if(!n)return this;{let i;let r=n.remove(o1(e));return(i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty())?new lt(null):new lt(this.value,i)}}}get(e){if(o4(e))return this.value;{let t=oZ(e),n=this.children.get(t);return n?n.get(o1(e)):null}}setTree(e,t){if(o4(e))return t;{let n;let i=oZ(e),r=this.children.get(i)||new lt(null),s=r.setTree(o1(e),t);return n=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new lt(this.value,n)}}fold(e){return this.fold_(oJ(),e)}fold_(e,t){let n={};return this.children.inorderTraversal((i,r)=>{n[i]=r.fold_(o3(e,i),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,oJ(),t)}findOnPath_(e,t,n){let i=!!this.value&&n(t,this.value);if(i)return i;if(o4(e))return null;{let i=oZ(e),r=this.children.get(i);return r?r.findOnPath_(o1(e),o3(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,oJ(),t)}foreachOnPath_(e,t,n){if(o4(e))return this;{this.value&&n(t,this.value);let i=oZ(e),r=this.children.get(i);return r?r.foreachOnPath_(o1(e),o3(t,i),n):new lt(null)}}foreach(e){this.foreach_(oJ(),e)}foreach_(e,t){this.children.inorderTraversal((n,i)=>{i.foreach_(o3(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class ln{constructor(e){this.writeTree_=e}static empty(){return new ln(new lt(null))}}function li(e,t,n){if(o4(t))return new ln(new lt(n));{let i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){let r=i.path,s=i.value,o=o9(r,t);return s=s.updateChild(o,n),new ln(e.writeTree_.set(r,s))}{let i=new lt(n),r=e.writeTree_.setTree(t,i);return new ln(r)}}}function lr(e,t,n){let i=e;return ow(n,(e,n)=>{i=li(i,o3(t,e),n)}),i}function ls(e,t){if(o4(t))return ln.empty();{let n=e.writeTree_.setTree(t,new lt(null));return new ln(n)}}function lo(e,t){return null!=la(e,t)}function la(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(o9(n.path,t)):null}function ll(e){let t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(a_,(e,n)=>{t.push(new ao(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new ao(e,n.value))}),t}function lc(e,t){if(o4(t))return e;{let n=la(e,t);return new ln(null!=n?new lt(n):e.writeTree_.subtree(t))}}function lu(e){return e.writeTree_.isEmpty()}function lh(e,t){return function e(t,n,i){if(null!=n.value)return i.updateChild(t,n.value);{let r=null;return n.children.inorderTraversal((n,s)=>{".priority"===n?(W(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):i=e(o3(t,n),s,i)}),i.getChild(t).isEmpty()||null===r||(i=i.updateChild(o3(t,".priority"),r)),i}}(oJ(),e.writeTree_,t)}function ld(e){return e.visible}function lp(e,t,n){let i=ln.empty();for(let r=0;r<e.length;++r){let s=e[r];if(t(s)){let e;let t=s.path;if(s.snap)ae(n,t)?i=li(i,e=o9(n,t),s.snap):ae(t,n)&&(e=o9(t,n),i=li(i,oJ(),s.snap.getChild(e)));else if(s.children){if(ae(n,t))i=lr(i,e=o9(n,t),s.children);else if(ae(t,n)){if(o4(e=o9(t,n)))i=lr(i,oJ(),s.children);else{let t=e_(s.children,oZ(e));if(t){let n=t.getChild(o1(e));i=li(i,oJ(),n)}}}}else throw U("WriteRecord should have .snap or .children")}}return i}function lf(e,t,n,i,r){if(i||r){let s=lc(e.visibleWrites,t);if(!r&&lu(s))return n;if(!r&&null==n&&!lo(s,oJ()))return null;{let s=lp(e.allWrites,function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(ae(e.path,t)||ae(t,e.path))},t),o=n||aI.EMPTY_NODE;return lh(s,o)}}{let i=la(e.visibleWrites,t);if(null!=i)return i;{let i=lc(e.visibleWrites,t);if(lu(i))return n;{if(null==n&&!lo(i,oJ()))return null;let e=n||aI.EMPTY_NODE;return lh(i,e)}}}}function lm(e,t,n,i){return lf(e.writeTree,e.treePath,t,n,i)}function lg(e,t){return function(e,t,n){let i=aI.EMPTY_NODE,r=la(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(a_,(e,t)=>{i=i.updateImmediateChild(e,t)}),i;if(n){let r=lc(e.visibleWrites,t);return n.forEachChild(a_,(e,t)=>{let n=lh(lc(r,new oQ(e)),t);i=i.updateImmediateChild(e,n)}),ll(r).forEach(e=>{i=i.updateImmediateChild(e.name,e.node)}),i}{let n=lc(e.visibleWrites,t);return ll(n).forEach(e=>{i=i.updateImmediateChild(e.name,e.node)}),i}}(e.writeTree,e.treePath,t)}function ly(e,t,n,i){return function(e,t,n,i,r){W(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=o3(t,n);if(lo(e.visibleWrites,s))return null;{let t=lc(e.visibleWrites,s);return lu(t)?r.getChild(n):lh(t,r.getChild(n))}}(e.writeTree,e.treePath,t,n,i)}function l_(e,t){var n,i;return n=e.writeTree,i=o3(e.treePath,t),la(n.visibleWrites,i)}function lv(e,t,n){return function(e,t,n,i){let r=o3(t,n),s=la(e.visibleWrites,r);if(null!=s)return s;if(!i.isCompleteForChild(n))return null;{let t=lc(e.visibleWrites,r);return lh(t,i.getNode().getImmediateChild(n))}}(e.writeTree,e.treePath,t,n)}function lb(e,t){return lw(o3(e.treePath,t),e.writeTree)}function lw(e,t){return{treePath:e,writeTree:t}}class lk{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,n=e.childName;W("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),W(".priority"!==n,"Only non-priority child changes can be tracked.");let i=this.changeMap.get(n);if(i){let r=i.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(n,aA(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(n,aP(n,i.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(n,aR(n,e.snapshotNode));else if("child_changed"===t&&"child_changed"===r)this.changeMap.set(n,aA(n,e.snapshotNode,i.oldSnap));else throw U("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const lx=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class lI{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let t=null!=this.optCompleteServerCache_?new a6(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return lv(this.writes_,e,t)}}getChildAfterChild(e,t,n){var i;let r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:a7(this.viewCache_),s=function(e,t,n,i,r,s,o){let a;let l=lc(e.visibleWrites,t),c=la(l,oJ());if(null!=c)a=c;else{if(null==n)return[];a=lh(l,n)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];{let e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),r=n.getNext();for(;r&&e.length<1;)0!==t(r,i)&&e.push(r),r=n.getNext();return e}}((i=this.writes_).writeTree,i.treePath,r,t,0,n,e);return 0===s.length?null:s[0]}}function lC(e,t,n,i,r,s){let o=t.eventCache;if(null!=l_(i,n))return t;{let a,l;if(o4(n)){if(W(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let n=a7(t),r=n instanceof aI?n:aI.EMPTY_NODE,o=lg(i,r);a=e.filter.updateFullNode(t.eventCache.getNode(),o,s)}else{let n=lm(i,a7(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}}else{let c=oZ(n);if(".priority"===c){W(1===o0(n),"Can't have a priority with additional path components");let r=o.getNode();l=t.serverCache.getNode();let s=ly(i,n,r,l);a=null!=s?e.filter.updatePriority(r,s):o.getNode()}else{let u;let h=o1(n);if(o.isCompleteForChild(c)){l=t.serverCache.getNode();let e=ly(i,n,o.getNode(),l);u=null!=e?o.getNode().getImmediateChild(c).updateChild(h,e):o.getNode().getImmediateChild(c)}else u=lv(i,c,t.serverCache);a=null!=u?e.filter.updateChild(o.getNode(),c,u,h,r,s):o.getNode()}}return a4(t,a,o.isFullyInitialized()||o4(n),e.filter.filtersNodes())}}function lT(e,t,n,i,r,s,o,a){let l;let c=t.serverCache,u=o?e.filter:e.filter.getIndexedFilter();if(o4(n))l=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){let e=c.getNode().updateChild(n,i);l=u.updateFullNode(c.getNode(),e,null)}else{let e=oZ(n);if(!c.isCompleteForPath(n)&&o0(n)>1)return t;let r=o1(n),s=c.getNode().getImmediateChild(e),o=s.updateChild(r,i);l=".priority"===e?u.updatePriority(c.getNode(),o):u.updateChild(c.getNode(),e,o,r,lx,null)}let h=a9(t,l,c.isFullyInitialized()||o4(n),u.filtersNodes()),d=new lI(r,h,s);return lC(e,h,n,r,d,a)}function lN(e,t,n,i,r,s,o){let a,l;let c=t.eventCache,u=new lI(r,t,s);if(o4(n))l=e.filter.updateFullNode(t.eventCache.getNode(),i,o),a=a4(t,l,!0,e.filter.filtersNodes());else{let r=oZ(n);if(".priority"===r)l=e.filter.updatePriority(t.eventCache.getNode(),i),a=a4(t,l,c.isFullyInitialized(),c.isFiltered());else{let s;let l=o1(n),h=c.getNode().getImmediateChild(r);if(o4(l))s=i;else{let e=u.getCompleteChild(r);s=null!=e?".priority"===o6(l)&&e.getChild(o5(l)).isEmpty()?e:e.updateChild(l,i):aI.EMPTY_NODE}if(h.equals(s))a=t;else{let n=e.filter.updateChild(c.getNode(),r,s,l,u,o);a=a4(t,n,c.isFullyInitialized(),e.filter.filtersNodes())}}}return a}function lE(e,t){return e.eventCache.isCompleteForChild(t)}function lS(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function lR(e,t,n,i,r,s,o,a){let l;if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t;l=o4(n)?i:new lt(null).setTree(n,i);let u=t.serverCache.getNode();return l.children.inorderTraversal((n,i)=>{if(u.hasChild(n)){let l=t.serverCache.getNode().getImmediateChild(n),u=lS(e,l,i);c=lT(e,c,new oQ(n),u,r,s,o,a)}}),l.children.inorderTraversal((n,i)=>{let l=!t.serverCache.isCompleteForChild(n)&&null===i.value;if(!u.hasChild(n)&&!l){let l=t.serverCache.getNode().getImmediateChild(n),u=lS(e,l,i);c=lT(e,c,new oQ(n),u,r,s,o,a)}}),c}class lP{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let n=this.query_._queryParams,i=new aO(n.getIndex()),r=function(e){return e.loadsAllData()?new aO(e.getIndex()):e.hasLimit()?new aD(e):new aL(e)}(n);this.processor_={filter:r};let s=t.serverCache,o=t.eventCache,a=i.updateFullNode(aI.EMPTY_NODE,s.getNode(),null),l=r.updateFullNode(aI.EMPTY_NODE,o.getNode(),null),c=new a6(a,s.isFullyInitialized(),i.filtersNodes()),u=new a6(l,o.isFullyInitialized(),r.filtersNodes());this.viewCache_=a3(u,c),this.eventGenerator_=new a2(this.query_)}get query(){return this.query_}}function lA(e){return 0===e.eventRegistrations_.length}function lO(e,t,n){let i=[];if(n){W(null==t,"A cancel should cancel all event registrations.");let r=e.query._path;e.eventRegistrations_.forEach(e=>{let t=e.createCancelEvent(n,r);t&&i.push(t)})}if(t){let n=[];for(let i=0;i<e.eventRegistrations_.length;++i){let r=e.eventRegistrations_[i];if(r.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(i+1));break}}else n.push(r)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return i}function lL(e,t,n,i){var r,s;t.type===_.MERGE&&null!==t.source.queryId&&(W(a7(e.viewCache_),"We should always have a full cache before handling merges"),W(a8(e.viewCache_),"Missing event cache, even though we have a server cache"));let o=e.viewCache_,a=function(e,t,n,i,r){let s,o;let a=new lk;if(n.type===_.OVERWRITE)n.source.fromUser?s=lN(e,t,n.path,n.snap,i,r,a):(W(n.source.fromServer,"Unknown source."),o=n.source.tagged||t.serverCache.isFiltered()&&!o4(n.path),s=lT(e,t,n.path,n.snap,i,r,o,a));else if(n.type===_.MERGE){var l,c;let u;n.source.fromUser?(l=n.path,c=n.children,u=t,c.foreach((n,s)=>{let o=o3(l,n);lE(t,oZ(o))&&(u=lN(e,u,o,s,i,r,a))}),c.foreach((n,s)=>{let o=o3(l,n);lE(t,oZ(o))||(u=lN(e,u,o,s,i,r,a))}),s=u):(W(n.source.fromServer,"Unknown source."),o=n.source.tagged||t.serverCache.isFiltered(),s=lR(e,t,n.path,n.children,i,r,o,a))}else if(n.type===_.ACK_USER_WRITE)s=n.revert?function(e,t,n,i,r,s){let o;if(null!=l_(i,n))return t;{let a;let l=new lI(i,t,r),c=t.eventCache.getNode();if(o4(n)||".priority"===oZ(n)){let n;if(t.serverCache.isFullyInitialized())n=lm(i,a7(t));else{let e=t.serverCache.getNode();W(e instanceof aI,"serverChildren would be complete if leaf node"),n=lg(i,e)}a=e.filter.updateFullNode(c,n,s)}else{let r=oZ(n),u=lv(i,r,t.serverCache);null==u&&t.serverCache.isCompleteForChild(r)&&(u=c.getImmediateChild(r)),(a=null!=u?e.filter.updateChild(c,r,u,o1(n),l,s):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(c,r,aI.EMPTY_NODE,o1(n),l,s):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=lm(i,a7(t))).isLeafNode()&&(a=e.filter.updateFullNode(a,o,s))}return o=t.serverCache.isFullyInitialized()||null!=l_(i,oJ()),a4(t,a,o,e.filter.filtersNodes())}}(e,t,n.path,i,r,a):function(e,t,n,i,r,s,o){if(null!=l_(r,n))return t;let a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(o4(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return lT(e,t,n,l.getNode().getChild(n),r,s,a,o);if(!o4(n))return t;{let i=new lt(null);return l.getNode().forEachChild(ac,(e,t)=>{i=i.set(new oQ(e),t)}),lR(e,t,n,i,r,s,a,o)}}{let c=new lt(null);return i.foreach((e,t)=>{let i=o3(n,e);l.isCompleteForPath(i)&&(c=c.set(e,l.getNode().getChild(i)))}),lR(e,t,n,c,r,s,a,o)}}(e,t,n.path,n.affectedTree,i,r,a);else if(n.type===_.LISTEN_COMPLETE)s=function(e,t,n,i,r){let s=t.serverCache,o=a9(t,s.getNode(),s.isFullyInitialized()||o4(n),s.isFiltered());return lC(e,o,n,i,lx,r)}(e,t,n.path,i,a);else throw U("Unknown operation type: "+n.type);let u=a.getChanges();return function(e,t,n){let i=t.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=a8(e);!(n.length>0)&&e.eventCache.isFullyInitialized()&&(!r||i.getNode().equals(s))&&i.getNode().getPriority().equals(s.getPriority())||n.push(aS(a8(t)))}}(t,s,u),{viewCache:s,changes:u}}(e.processor_,o,t,n,i);return r=e.processor_,W((s=a.viewCache).eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),W(s.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed"),W(a.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=a.viewCache,lD(e,a.changes,a.viewCache.eventCache.getNode(),null)}function lD(e,t,n,i){let r=i?[i]:e.eventRegistrations_;return function(e,t,n,i){let r=[],s=[];return t.forEach(t=>{if("child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)){var n;s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))}}),a5(e,r,"child_removed",t,i,n),a5(e,r,"child_added",t,i,n),a5(e,r,"child_moved",s,i,n),a5(e,r,"child_changed",t,i,n),a5(e,r,"value",t,i,n),r}(e.eventGenerator_,t,n,r)}class lM{constructor(){this.views=new Map}}function lF(e,t,n,i){let r=t.source.queryId;if(null!==r){let s=e.views.get(r);return W(null!=s,"SyncTree gave us an op for an invalid query."),lL(s,t,n,i)}{let r=[];for(let s of e.views.values())r=r.concat(lL(s,t,n,i));return r}}function lz(e,t,n,i,r){let s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=lm(n,r?i:null),s=!1;e?s=!0:(e=i instanceof aI?lg(n,i):aI.EMPTY_NODE,s=!1);let o=a3(new a6(e,s,!1),new a6(i,r,!1));return new lP(t,o)}return o}function lW(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function lU(e,t){let n=null;for(let i of e.views.values())n=n||function(e,t){let n=a7(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!o4(t)&&!n.getImmediateChild(oZ(t)).isEmpty())?n.getChild(t):null}(i,t);return n}function lq(e,t){let n=t._queryParams;if(n.loadsAllData())return lj(e);{let n=t._queryIdentifier;return e.views.get(n)}}function lB(e){return null!=lj(e)}function lj(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let lH=1;class lV{constructor(e){this.listenProvider_=e,this.syncPointTree_=new lt(null),this.pendingWriteTree_={visibleWrites:ln.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function l$(e,t,n,i,r){var s,o;return(s=e.pendingWriteTree_,o=r,W(i>s.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),s.allWrites.push({path:t,snap:n,writeId:i,visible:o}),o&&(s.visibleWrites=li(s.visibleWrites,t,n)),s.lastWriteId=i,r)?lZ(e,new a0(aG(),t,n)):[]}function lK(e,t,n=!1){let i=function(e,t){for(let n=0;n<e.allWrites.length;n++){let i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t),r=function(e,t){let n=e.allWrites.findIndex(e=>e.writeId===t);W(n>=0,"removeWrite called with nonexistent writeId.");let i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,s=!1,o=e.allWrites.length-1;for(;r&&o>=0;){let t=e.allWrites[o];t.visible&&(o>=n&&function(e,t){if(e.snap)return ae(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&ae(o3(e.path,n),t))return!0;return!1}(t,i.path)?r=!1:ae(i.path,t.path)&&(s=!0)),o--}if(!r)return!1;if(s)return e.visibleWrites=lp(e.allWrites,ld,oJ()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1,!0;if(i.snap)e.visibleWrites=ls(e.visibleWrites,i.path);else{let t=i.children;ow(t,t=>{e.visibleWrites=ls(e.visibleWrites,o3(i.path,t))})}return!0}(e.pendingWriteTree_,t);if(!r)return[];{let t=new lt(null);return null!=i.snap?t=t.set(oJ(),!0):ow(i.children,e=>{t=t.set(new oQ(e),!0)}),lZ(e,new aJ(i.path,t,n))}}function lX(e,t,n){return lZ(e,new a0(aY(),t,n))}function lG(e,t,n,i,r=!1){let s=t._path,o=e.syncPointTree_.get(s),a=[];if(o&&("default"===t._queryIdentifier||null!=lq(o,t))){let l=function(e,t,n,i){let r=t._queryIdentifier,s=[],o=[],a=lB(e);if("default"===r)for(let[t,r]of e.views.entries())o=o.concat(lO(r,n,i)),lA(r)&&(e.views.delete(t),r.query._queryParams.loadsAllData()||s.push(r.query));else{let t=e.views.get(r);t&&(o=o.concat(lO(t,n,i)),lA(t)&&(e.views.delete(r),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!lB(e)&&s.push(new(W(u,"Reference.ts has not been loaded"),u)(t._repo,t._path)),{removed:s,events:o}}(o,t,n,i);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));let c=l.removed;if(a=l.events,!r){let n=-1!==c.findIndex(e=>e._queryParams.loadsAllData()),r=e.syncPointTree_.findOnPath(s,(e,t)=>lB(t));if(n&&!r){let t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){let n=t.fold((e,t,n)=>{if(t&&lB(t)){let e=lj(t);return[e]}{let e=[];return t&&(e=lW(t)),ow(n,(t,n)=>{e=e.concat(n)}),e}});for(let t=0;t<n.length;++t){let i=n[t],r=i.query,s=l0(e,i);e.listenProvider_.startListening(l4(r),l1(e,r),s.hashFn,s.onComplete)}}}r||!(c.length>0)||i||(n?e.listenProvider_.stopListening(l4(t),null):c.forEach(t=>{let n=e.queryToTagMap.get(l6(t));e.listenProvider_.stopListening(l4(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){let i=t[n];if(!i._queryParams.loadsAllData()){let t=l6(i),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function lY(e,t,n,i){let r=l2(e,i);if(null==r)return[];{let i=l5(r),s=i.path,o=i.queryId,a=o9(s,t),l=new a0(aQ(o),a,n);return l3(e,s,l)}}function lQ(e,t,n,i=!1){var r;let s;let o=t._path,a=null,l=!1;e.syncPointTree_.foreachOnPath(o,(e,t)=>{let n=o9(e,o);a=a||lU(t,n),l=l||lB(t)});let c=e.syncPointTree_.get(o);if(c?(l=l||lB(c),a=a||lU(c,oJ())):(c=new lM,e.syncPointTree_=e.syncPointTree_.set(o,c)),null!=a)s=!0;else{s=!1,a=aI.EMPTY_NODE;let t=e.syncPointTree_.subtree(o);t.foreachChild((e,t)=>{let n=lU(t,oJ());n&&(a=a.updateImmediateChild(e,n))})}let u=null!=lq(c,t);if(!u&&!t._queryParams.loadsAllData()){let n=l6(t);W(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");let i=lH++;e.queryToTagMap.set(n,i),e.tagToQueryMap.set(i,n)}let h=(r=e.pendingWriteTree_,lw(o,r)),d=function(e,t,n,i,r,s){let o=lz(e,t,i,r,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),!function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){let n=e.viewCache_.eventCache,i=[];if(!n.getNode().isLeafNode()){let e=n.getNode();e.forEachChild(a_,(e,t)=>{i.push(aR(e,t))})}return n.isFullyInitialized()&&i.push(aS(n.getNode())),lD(e,i,n.getNode(),t)}(o,n)}(c,t,n,h,a,s);if(!u&&!l&&!i){let n=lq(c,t);d=d.concat(function(e,t,n){let i=t._path,r=l1(e,t),s=l0(e,n),o=e.listenProvider_.startListening(l4(t),r,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(i);if(r)W(!lB(a.value),"If we're adding a query, it shouldn't be shadowed");else{let t=a.fold((e,t,n)=>{if(!o4(e)&&t&&lB(t))return[lj(t).query];{let e=[];return t&&(e=e.concat(lW(t).map(e=>e.query))),ow(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){let i=t[n];e.listenProvider_.stopListening(l4(i),l1(e,i))}}return o}(e,t,n))}return d}function lJ(e,t,n){let i=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(e,n)=>{let i=o9(e,t),r=lU(n,i);if(r)return r});return lf(i,t,r,n,!0)}function lZ(e,t){var n;return function e(t,n,i,r){if(o4(t.path))return function e(t,n,i,r){let s=n.get(oJ());null==i&&null!=s&&(i=lU(s,oJ()));let o=[];return n.children.inorderTraversal((n,s)=>{let a=i?i.getImmediateChild(n):null,l=lb(r,n),c=t.operationForChild(n);c&&(o=o.concat(e(c,s,a,l)))}),s&&(o=o.concat(lF(s,t,r,i))),o}(t,n,i,r);{let s=n.get(oJ());null==i&&null!=s&&(i=lU(s,oJ()));let o=[],a=oZ(t.path),l=t.operationForChild(a),c=n.children.get(a);if(c&&l){let t=i?i.getImmediateChild(a):null,n=lb(r,a);o=o.concat(e(l,c,t,n))}return s&&(o=o.concat(lF(s,t,r,i))),o}}(t,e.syncPointTree_,null,(n=e.pendingWriteTree_,lw(oJ(),n)))}function l0(e,t){let n=t.query,i=l1(e,n);return{hashFn:()=>{let e=t.viewCache_.serverCache.getNode()||aI.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t){var r;return i?function(e,t,n){let i=l2(e,n);if(!i)return[];{let n=l5(i),r=n.path,s=n.queryId,o=o9(r,t),a=new aZ(aQ(s),o);return l3(e,r,a)}}(e,n._path,i):(r=n._path,lZ(e,new aZ(aY(),r)))}{let i=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");let i=Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}(t,n);return lG(e,n,null,i)}}}}function l1(e,t){let n=l6(t);return e.queryToTagMap.get(n)}function l6(e){return e._path.toString()+"$"+e._queryIdentifier}function l2(e,t){return e.tagToQueryMap.get(t)}function l5(e){let t=e.indexOf("$");return W(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new oQ(e.substr(0,t))}}function l3(e,t,n){let i=e.syncPointTree_.get(t);W(i,"Missing sync point for query tag that we're tracking");let r=lw(t,e.pendingWriteTree_);return lF(i,n,r,null)}function l4(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(W(h,"Reference.ts has not been loaded"),h)(e._repo,e._path):e}class l9{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new l9(t)}node(){return this.node_}}class l8{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=o3(this.path_,e);return new l8(this.syncTree_,t)}node(){return lJ(this.syncTree_,this.path_)}}const l7=function(e,t,n){return e&&"object"==typeof e?(W(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"])?ce(e[".sv"],t,n):"object"==typeof e[".sv"]?ct(e[".sv"],t):void W(!1,"Unexpected server value: "+JSON.stringify(e,null,2)):e},ce=function(e,t,n){if("timestamp"===e)return n.timestamp;W(!1,"Unexpected server value: "+e)},ct=function(e,t,n){e.hasOwnProperty("increment")||W(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let i=e.increment;"number"!=typeof i&&W(!1,"Unexpected increment value: "+i);let r=t.node();if(W(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let s=r.getValue();return"number"!=typeof s?i:s+i},cn=function(e,t,n,i){return cr(t,new l8(n,e),i)},ci=function(e,t,n){return cr(e,new l9(t),n)};function cr(e,t,n){let i;let r=e.getPriority().val(),s=l7(r,t.getImmediateChild(".priority"),n);if(!e.isLeafNode())return i=e,s!==e.getPriority().val()&&(i=i.updatePriority(new ay(s))),e.forEachChild(a_,(e,r)=>{let s=cr(r,t.getImmediateChild(e),n);s!==r&&(i=i.updateImmediateChild(e,s))}),i;{let i=l7(e.getValue(),t,n);return i!==e.getValue()||s!==e.getPriority().val()?new ay(i,aT(s)):e}}class cs{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function co(e,t){let n=t instanceof oQ?t:new oQ(t),i=e,r=oZ(n);for(;null!==r;){let e=e_(i.node.children,r)||{children:{},childCount:0};i=new cs(r,i,e),r=oZ(n=o1(n))}return i}function ca(e){return e.node.value}function cl(e,t){e.node.value=t,function e(t){null!==t.parent&&function(t,n,i){let r=void 0===ca(i)&&!cc(i),s=ey(t.node.children,n);r&&s?(delete t.node.children[n],t.node.childCount--,e(t)):r||s||(t.node.children[n]=i.node,t.node.childCount++,e(t))}(t.parent,t.name,t)}(e)}function cc(e){return e.node.childCount>0}function cu(e,t){ow(e.node.children,(n,i)=>{t(new cs(n,e,i))})}function ch(e){return new oQ(null===e.parent?e.name:ch(e.parent)+"/"+e.name)}const cd=/[\[\].#$\/\u0000-\u001F\u007F]/,cp=/[\[\].#$\u0000-\u001F\u007F]/,cf=function(e){return"string"==typeof e&&0!==e.length&&!cd.test(e)},cm=function(e){return"string"==typeof e&&0!==e.length&&!cp.test(e)},cg=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!od(e)||e&&"object"==typeof e&&ey(e,".sv")},cy=function(e,t,n,i){i&&void 0===t||c_(eP(e,"value"),t,n)},c_=function(e,t,n){let i=n instanceof oQ?new at(n,e):n;if(void 0===t)throw Error(e+"contains undefined "+ai(i));if("function"==typeof t)throw Error(e+"contains a function "+ai(i)+" with contents = "+t.toString());if(od(t))throw Error(e+"contains "+t.toString()+" "+ai(i));if("string"==typeof t&&t.length>10485760/3&&eD(t)>10485760)throw Error(e+"contains a string greater than 10485760 utf8 bytes "+ai(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,r=!1;if(ow(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!cf(t)))throw Error(e+" contains an invalid key ("+t+") "+ai(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=eD(t),an(i),c_(e,s,i),function(e){let t=e.parts_.pop();e.byteLength_-=eD(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)}),n&&r)throw Error(e+' contains ".value" child '+ai(i)+" in addition to actual children.")}},cv=function(e,t){let n,i;for(n=0;n<t.length;n++){i=t[n];let r=o2(i);for(let t=0;t<r.length;t++)if(".priority"===r[t]&&t===r.length-1);else if(!cf(r[t]))throw Error(e+"contains an invalid key ("+r[t]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(o8);let r=null;for(n=0;n<t.length;n++){if(i=t[n],null!==r&&ae(r,i))throw Error(e+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},cb=function(e,t,n,i){if(i&&void 0===t)return;let r=eP(e,"values");if(!(t&&"object"==typeof t)||Array.isArray(t))throw Error(r+" must be an object containing the children to replace.");let s=[];ow(t,(e,t)=>{let i=new oQ(e);if(c_(r,t,o3(n,i)),".priority"===o6(i)&&!cg(t))throw Error(r+"contains an invalid value for '"+i.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(i)}),cv(r,s)},cw=function(e,t,n){if(!n||void 0!==t){if(od(t))throw Error(eP(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!cg(t))throw Error(eP(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ck=function(e,t,n,i){if((!i||void 0!==n)&&!cf(n))throw Error(eP(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},cx=function(e,t,n,i){if((!i||void 0!==n)&&!cm(n))throw Error(eP(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},cI=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),cx(e,t,n,i)},cC=function(e,t){if(".info"===oZ(t))throw Error(e+" failed = Can't modify data under /.info/")},cT=function(e,t){var n;let i=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!cf(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==i.length&&((n=i)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),!cm(n)))throw Error(eP(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class cN{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function cE(e,t){let n=null;for(let i=0;i<t.length;i++){let r=t[i],s=r.getPath();null===n||o7(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function cS(e,t,n){cE(e,n),cP(e,e=>o7(e,t))}function cR(e,t,n){cE(e,n),cP(e,e=>ae(e,t)||ae(t,e))}function cP(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){let r=e.eventLists_[i];if(r){let s=r.path;t(s)?(function(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(null!==n){e.events[t]=null;let i=n.getEventRunner();oi&&oo("event: "+n.toString()),oC(i)}}}(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}const cA="repo_interrupt";class cO{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new cN,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=aH(),this.transactionQueueTree_=new cs,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function cL(e){let t=e.infoData_.getNode(new oQ(".info/serverTimeOffset")),n=t.val()||0;return new Date().getTime()+n}function cD(e){var t;return(t=t={timestamp:cL(e)}).timestamp=t.timestamp||new Date().getTime(),t}function cM(e,t,n,i,r){e.dataUpdateCount++;let s=new oQ(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(r){if(i){let t=eb(n,e=>aT(e));o=function(e,t,n,i){let r=l2(e,i);if(!r)return[];{let i=l5(r),s=i.path,o=i.queryId,a=o9(s,t),l=lt.fromObject(n),c=new a1(aQ(o),a,l);return l3(e,s,c)}}(e.serverSyncTree_,s,t,r)}else{let t=aT(n);o=lY(e.serverSyncTree_,s,t,r)}}else if(i){let t=eb(n,e=>aT(e));o=function(e,t,n){let i=lt.fromObject(n);return lZ(e,new a1(aY(),t,i))}(e.serverSyncTree_,s,t)}else{let t=aT(n);o=lX(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=cX(e,s)),cR(e.eventQueue_,a,o)}function cF(e,t){cz(e,"connected",t),!1===t&&function(e){cH(e,"onDisconnectEvents");let t=cD(e),n=aH();a$(e.onDisconnect_,oJ(),(i,r)=>{let s=cn(i,r,e.serverSyncTree_,t);aV(n,i,s)});let i=[];a$(n,oJ(),(t,n)=>{i=i.concat(lX(e.serverSyncTree_,t,n));let r=cJ(e,t);cX(e,r)}),e.onDisconnect_=aH(),cR(e.eventQueue_,oJ(),i)}(e)}function cz(e,t,n){let i=new oQ("/.info/"+t),r=aT(n);e.infoData_.updateSnapshot(i,r);let s=lX(e.infoSyncTree_,i,r);cR(e.eventQueue_,i,s)}function cW(e){return e.nextWriteId_++}function cU(e,t,n,i,r){cH(e,"set",{path:t.toString(),value:n,priority:i});let s=cD(e),o=aT(n,i),a=lJ(e.serverSyncTree_,t),l=ci(o,a,s),c=cW(e),u=l$(e.serverSyncTree_,t,l,c,!0);cE(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(n,i)=>{let s="ok"===n;s||ou("set at "+t+" failed: "+n);let o=lK(e.serverSyncTree_,c,!s);cR(e.eventQueue_,t,o),cV(e,r,n,i)});let h=cJ(e,t);cX(e,h),cR(e.eventQueue_,h,[])}function cq(e,t,n,i){let r=aT(n);e.server_.onDisconnectPut(t.toString(),r.val(!0),(n,s)=>{"ok"===n&&aV(e.onDisconnect_,t,r),cV(e,i,n,s)})}function cB(e,t,n){let i;i=".info"===oZ(t._path)?lG(e.infoSyncTree_,t,n):lG(e.serverSyncTree_,t,n),cS(e.eventQueue_,t._path,i)}function cj(e){e.persistentConnection_&&e.persistentConnection_.interrupt(cA)}function cH(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),oo(n,...t)}function cV(e,t,n,i){t&&oC(()=>{if("ok"===n)t(null);else{let e=(n||"error").toUpperCase(),r=e;i&&(r+=": "+i);let s=Error(r);s.code=e,t(s)}})}function c$(e,t,n){return lJ(e.serverSyncTree_,t,n)||aI.EMPTY_NODE}function cK(e,t=e.transactionQueueTree_){if(t||cQ(e,t),ca(t)){let n=cY(e,t);W(n.length>0,"Sending zero length transaction queue");let i=n.every(e=>0===e.status);i&&function(e,t,n){let i=n.map(e=>e.currentWriteId),r=c$(e,t,i),s=r,o=r.hash();for(let e=0;e<n.length;e++){let i=n[e];W(0===i.status,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=1,i.retryCount++;let r=o9(t,i.path);s=s.updateChild(r,i.currentOutputSnapshotRaw)}let a=s.val(!0);e.server_.put(t.toString(),a,i=>{cH(e,"transaction put response",{path:t.toString(),status:i});let r=[];if("ok"===i){let i=[];for(let t=0;t<n.length;t++)n[t].status=2,r=r.concat(lK(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();cQ(e,co(e.transactionQueueTree_,t)),cK(e,e.transactionQueueTree_),cR(e.eventQueue_,t,r);for(let e=0;e<i.length;e++)oC(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{ou("transaction at "+t.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}cX(e,t)}},o)}(e,ch(t),n)}else cc(t)&&cu(t,t=>{cK(e,t)})}function cX(e,t){let n=cG(e,t),i=ch(n),r=cY(e,n);return function(e,t,n){if(0===t.length)return;let i=[],r=[],s=t.filter(e=>0===e.status),o=s.map(e=>e.currentWriteId);for(let s=0;s<t.length;s++){let a=t[s],l=o9(n,a.path),c=!1,u;if(W(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===a.status)c=!0,u=a.abortReason,r=r.concat(lK(e.serverSyncTree_,a.currentWriteId,!0));else if(0===a.status){if(a.retryCount>=25)c=!0,u="maxretry",r=r.concat(lK(e.serverSyncTree_,a.currentWriteId,!0));else{let n=c$(e,a.path,o);a.currentInputSnapshot=n;let i=t[s].update(n.val());if(void 0!==i){c_("transaction failed: Data returned ",i,a.path);let t=aT(i),s="object"==typeof i&&null!=i&&ey(i,".priority");s||(t=t.updatePriority(n.getPriority()));let l=a.currentWriteId,c=cD(e),u=ci(t,n,c);a.currentOutputSnapshotRaw=t,a.currentOutputSnapshotResolved=u,a.currentWriteId=cW(e),o.splice(o.indexOf(l),1),r=(r=r.concat(l$(e.serverSyncTree_,a.path,u,a.currentWriteId,a.applyLocally))).concat(lK(e.serverSyncTree_,l,!0))}else c=!0,u="nodata",r=r.concat(lK(e.serverSyncTree_,a.currentWriteId,!0))}}cR(e.eventQueue_,n,r),r=[],c&&(t[s].status=2,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete&&("nodata"===u?i.push(()=>t[s].onComplete(null,!1,t[s].currentInputSnapshot)):i.push(()=>t[s].onComplete(Error(u),!1,null))))}cQ(e,e.transactionQueueTree_);for(let e=0;e<i.length;e++)oC(i[e]);cK(e,e.transactionQueueTree_)}(e,r,i),i}function cG(e,t){let n;let i=e.transactionQueueTree_;for(n=oZ(t);null!==n&&void 0===ca(i);)i=co(i,n),n=oZ(t=o1(t));return i}function cY(e,t){let n=[];return function e(t,n,i){let r=ca(n);if(r)for(let e=0;e<r.length;e++)i.push(r[e]);cu(n,n=>{e(t,n,i)})}(e,t,n),n.sort((e,t)=>e.order-t.order),n}function cQ(e,t){let n=ca(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,cl(t,n.length>0?n:void 0)}cu(t,t=>{cQ(e,t)})}function cJ(e,t){let n=ch(cG(e,t)),i=co(e.transactionQueueTree_,t);return!function(e,t,n){let i=e.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,t=>{cZ(e,t)}),cZ(e,i),!function e(t,n,i,r){i&&!r&&n(t),cu(t,t=>{e(t,n,!0,r)}),i&&r&&n(t)}(i,t=>{cZ(e,t)}),n}function cZ(e,t){let n=ca(t);if(n){let i=[],r=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(W(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(W(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),r=r.concat(lK(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,Error("set"),!1,null))));-1===s?cl(t,void 0):n.length=s+1,cR(e.eventQueue_,ch(t),r);for(let e=0;e<i.length;e++)oC(i[e])}}const c0=function(e,t){let n=c1(e),i=n.namespace;"firebase.com"===n.domain&&oc(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||oc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||oh();let r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new oL(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new oQ(n.pathString)}},c1=function(e){let t="",n="",i="",r="",s="",o=!0,a="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(r=function(e){let t="",n=e.split("/");for(let e=0;e<n.length;e++)if(n[e].length>0){let i=n[e];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(u,h)));let d=function(e){let t={};for(let n of("?"===e.charAt(0)&&(e=e.substring(1)),e.split("&"))){if(0===n.length)continue;let i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ou(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;let p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{let e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=i}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}},c6="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",c2=function(){let e=0,t=[];return function(n){let i;let r=n===e;e=n;let s=Array(8);for(i=7;i>=0;i--)s[i]=c6.charAt(n%64),n=Math.floor(n/64);W(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=c6.charAt(t[i]);return W(20===o.length,"nextPushId: Length should be 20."),o}}();class c5{constructor(e,t,n,i){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=i}getPath(){let e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ep(this.snapshot.exportVal())}}class c3{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class c4{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return W(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class c9{constructor(e,t){this._repo=e,this._path=t}cancel(){let e=new ee;return!function(e,t,n){e.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&function e(t,n){if(o4(n))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;{let i=t.value;return t.value=null,i.forEachChild(a_,(e,n)=>{aV(t,new oQ(e),n)}),e(t,n)}}if(!(t.children.size>0))return!0;{let i=oZ(n);if(n=o1(n),t.children.has(i)){let r=e(t.children.get(i),n);r&&t.children.delete(i)}return 0===t.children.size}}(e.onDisconnect_,t),cV(e,n,i,r)})}(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){cC("OnDisconnect.remove",this._path);let e=new ee;return cq(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){cC("OnDisconnect.set",this._path),cy("OnDisconnect.set",e,this._path,!1);let t=new ee;return cq(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){cC("OnDisconnect.setWithPriority",this._path),cy("OnDisconnect.setWithPriority",e,this._path,!1),cw("OnDisconnect.setWithPriority",t,!1);let n=new ee;return!function(e,t,n,i,r){let s=aT(n,i);e.server_.onDisconnectPut(t.toString(),s.val(!0),(n,i)=>{"ok"===n&&aV(e.onDisconnect_,t,s),cV(e,r,n,i)})}(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){cC("OnDisconnect.update",this._path),cb("OnDisconnect.update",e,this._path,!1);let t=new ee;return!function(e,t,n,i){if(ev(n)){oo("onDisconnect().update() called with empty data.  Don't do anything."),cV(e,i,"ok",void 0);return}e.server_.onDisconnectMerge(t.toString(),n,(r,s)=>{"ok"===r&&ow(n,(n,i)=>{let r=aT(i);aV(e.onDisconnect_,o3(t,n),r)}),cV(e,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class c8{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return o4(this._path)?null:o6(this._path)}get ref(){return new un(this._repo,this._path)}get _queryIdentifier(){let e=aq(this._queryParams),t=ov(e);return"{}"===t?"default":t}get _queryObject(){return aq(this._queryParams)}isEqual(e){if(!((e=eM(e))instanceof c8))return!1;let t=this._repo===e._repo,n=o7(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function c7(e,t){if(!0===e._orderByCalled)throw Error(t+": You can't combine multiple orderBy calls.")}function ue(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===ac){let i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){let n=e.getIndexStartName();if(n!==of)throw Error(i);if("string"!=typeof t)throw Error(r)}if(e.hasEnd()){let t=e.getIndexEndName();if(t!==om)throw Error(i);if("string"!=typeof n)throw Error(r)}}else if(e.getIndex()===a_){if(null!=t&&!cg(t)||null!=n&&!cg(n))throw Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(W(e.getIndex() instanceof aN||e.getIndex()===aE,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ut(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class un extends c8{constructor(e,t){super(e,t,new aM,!1)}get parent(){let e=o5(this._path);return null===e?null:new un(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ui{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new oQ(e),n=uo(this.ref,e);return new ui(this._node.getChild(t),n,a_)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;let t=this._node;return!!t.forEachChild(this._index,(t,n)=>e(new ui(n,uo(this.ref,t),a_)))}hasChild(e){let t=new oQ(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ur(e,t){return(e=eM(e))._checkNotDeleted("ref"),void 0!==t?uo(e._root,t):e._root}function us(e,t){(e=eM(e))._checkNotDeleted("refFromURL");let n=c0(t,e._repo.repoInfo_.nodeAdmin);cT("refFromURL",n);let i=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||i.host===e._repo.repoInfo_.host||oc("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+e._repo.repoInfo_.host+")"),ur(e,n.path.toString())}function uo(e,t){return null===oZ((e=eM(e))._path)?cI("child","path",t,!1):cx("child","path",t,!1),new un(e._repo,o3(e._path,t))}function ua(e,t){cC("set",(e=eM(e))._path),cy("set",t,e._path,!1);let n=new ee;return cU(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}class ul{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){let n=t._queryParams.getIndex();return new c5("value",this,new ui(e.snapshotNode,new un(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new c3(this,e,t):null}matches(e){return e instanceof ul&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class uc{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new c3(this,e,t):null}createEvent(e,t){W(null!=e.childName,"Child events should have a childName.");let n=uo(new un(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new c5(e.type,this,new ui(e.snapshotNode,n,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof uc&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function uu(e,t,n,i,r){var s;let o,a;if("object"==typeof i&&(o=void 0,r=i),"function"==typeof i&&(o=i),r&&r.onlyOnce){let t=n,i=(n,i)=>{cB(e._repo,e,c),t(n,i)};i.userCallback=n.userCallback,i.context=n.context,n=i}let l=new c4(n,o||void 0),c="value"===t?new ul(l):new uc(t,l);return s=e._repo,a=".info"===oZ(e._path)?lQ(s.infoSyncTree_,e,c):lQ(s.serverSyncTree_,e,c),cS(s.eventQueue_,e._path,a),()=>cB(e._repo,e,c)}function uh(e,t,n,i){return uu(e,"value",t,n,i)}function ud(e,t,n,i){return uu(e,"child_added",t,n,i)}function up(e,t,n,i){return uu(e,"child_changed",t,n,i)}function uf(e,t,n,i){return uu(e,"child_moved",t,n,i)}function um(e,t,n,i){return uu(e,"child_removed",t,n,i)}function ug(e,t,n){let i=null,r=n?new c4(n):null;"value"===t?i=new ul(r):t&&(i=new uc(t,r)),cB(e._repo,e,i)}class uy{}class u_ extends uy{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){cy("endAt",this._value,e._path,!0);let t=az(e._queryParams,this._value,this._key);if(ut(t),ue(t),e._queryParams.hasEnd())throw Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new c8(e._repo,e._path,t,e._orderByCalled)}}class uv extends uy{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){var t,n,i;let r;cy("endBefore",this._value,e._path,!1);let s=(t=e._queryParams,n=this._value,i=this._key,(r=t.index_===ac||i?az(t,n,i):az(t,n,of)).endBeforeSet_=!0,r);if(ut(s),ue(s),e._queryParams.hasEnd())throw Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new c8(e._repo,e._path,s,e._orderByCalled)}}class ub extends uy{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){cy("startAt",this._value,e._path,!0);let t=aF(e._queryParams,this._value,this._key);if(ut(t),ue(t),e._queryParams.hasStart())throw Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new c8(e._repo,e._path,t,e._orderByCalled)}}class uw extends uy{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){var t,n,i;let r;cy("startAfter",this._value,e._path,!1);let s=(t=e._queryParams,n=this._value,i=this._key,(r=t.index_===ac||i?aF(t,n,i):aF(t,n,om)).startAfterSet_=!0,r);if(ut(s),ue(s),e._queryParams.hasStart())throw Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new c8(e._repo,e._path,s,e._orderByCalled)}}class uk extends uy{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new c8(e._repo,e._path,function(e,t){let n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class ux extends uy{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new c8(e._repo,e._path,function(e,t){let n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class uI extends uy{constructor(e){super(),this._path=e}_apply(e){c7(e,"orderByChild");let t=new oQ(this._path);if(o4(t))throw Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let n=new aN(t),i=aW(e._queryParams,n);return ue(i),new c8(e._repo,e._path,i,!0)}}class uC extends uy{_apply(e){c7(e,"orderByKey");let t=aW(e._queryParams,ac);return ue(t),new c8(e._repo,e._path,t,!0)}}class uT extends uy{_apply(e){c7(e,"orderByPriority");let t=aW(e._queryParams,a_);return ue(t),new c8(e._repo,e._path,t,!0)}}class uN extends uy{_apply(e){c7(e,"orderByValue");let t=aW(e._queryParams,aE);return ue(t),new c8(e._repo,e._path,t,!0)}}class uE extends uy{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(cy("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new u_(this._value,this._key)._apply(new ub(this._value,this._key)._apply(e))}}function uS(e,...t){let n=eM(e);for(let e of t)n=e._apply(n);return n}W(!u,"__referenceConstructor has already been defined"),u=un,W(!h,"__referenceConstructor has already been defined"),h=un;const uR={};function uP(e,t,n,i,r){var s,o;let a,l,c,u,h=i||e.options.databaseURL;void 0===h&&(e.options.projectId||oc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),oo("Using default host for project ",e.options.projectId),h=`${e.options.projectId}-default-rtdb.firebaseio.com`);let d=c0(h,r),p=d.repoInfo;void 0!==T&&T.env&&(c=T.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(u=!0,p=(d=c0(h=`http://${c}?ns=${p.namespace}`,r)).repoInfo):u=!d.repoInfo.secure;let f=r&&u?new oR(oR.OWNER):new oS(e.name,e.options,t);cT("Invalid Firebase Database URL",d),o4(d.path)||oc("Database URL must point to the root of a Firebase Database (not including a child path).");let m=(s=p,o=new oE(e.name,n),(a=uR[e.name])||(a={},uR[e.name]=a),(l=a[s.toURLString()])&&oc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new cO(s,!1,f,o),a[s.toURLString()]=l,l);return new uA(m,e)}class uA{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(e,t,n){if(e.stats_=oW(e.repoInfo_),e.forceRestClient_||oT())e.server_=new aB(e.repoInfo_,(t,n,i,r)=>{cM(e,t,n,i,r)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>cF(e,!0),0);else{if(null!=n){if("object"!=typeof n)throw Error("Only objects are supported for option databaseAuthVariableOverride");try{ep(n)}catch(e){throw Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new as(e.repoInfo_,t,(t,n,i,r)=>{cM(e,t,n,i,r)},t=>{cF(e,t)},t=>{ow(t,(t,n)=>{cz(e,t,n)})},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){let n=e.toString();return oz[n]||(oz[n]=t()),oz[n]}(e.repoInfo_,()=>new aX(e.stats_,e.server_)),e.infoData_=new aj,e.infoSyncTree_=new lV({startListening:(t,n,i,r)=>{let s=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=lX(e.infoSyncTree_,t._path,o),setTimeout(()=>{r("ok")},0)),s},stopListening:()=>{}}),cz(e,"connected",!1),e.serverSyncTree_=new lV({startListening:(t,n,i,r)=>(e.server_.listen(t,i,n,(n,i)=>{let s=r(n,i);cR(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new un(this._repo,oJ())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){let n=uR[t];n&&n[e.key]===e||oc(`Database ${t}(${e.repoInfo_}) has already been deleted.`),cj(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&oc("Cannot call "+e+" on a deleted database.")}}function uO(){o$.IS_TRANSPORT_INITIALIZED&&ou("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function uL(){uO(),oB.forceDisallow()}function uD(){uO(),oV.forceDisallow(),oB.forceAllow()}function uM(e,t){os(e,t)}class uF{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}as.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},as.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},s2=tp,ta(new eF("database",(e,{instanceIdentifier:t})=>{let n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return uP(n,i,r,t)},"PUBLIC").setMultipleInstances(!0)),t_(s1,s6,void 0),t_(s1,s6,"esm2017");const uz=new eK("@firebase/database-compat"),uW=function(e){uz.warn("FIREBASE WARNING: "+e)},uU=function(e,t,n,i){if((!i||void 0!==n)&&"boolean"!=typeof n)throw Error(eP(e,t)+"must be a boolean.")},uq=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error(eP(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};class uB{constructor(e){this._delegate=e}cancel(e){eR("OnDisconnect.cancel",0,1,arguments.length),eA("OnDisconnect.cancel","onComplete",e,!0);let t=this._delegate.cancel();return e&&t.then(()=>e(null),t=>e(t)),t}remove(e){eR("OnDisconnect.remove",0,1,arguments.length),eA("OnDisconnect.remove","onComplete",e,!0);let t=this._delegate.remove();return e&&t.then(()=>e(null),t=>e(t)),t}set(e,t){eR("OnDisconnect.set",1,2,arguments.length),eA("OnDisconnect.set","onComplete",t,!0);let n=this._delegate.set(e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){eR("OnDisconnect.setWithPriority",2,3,arguments.length),eA("OnDisconnect.setWithPriority","onComplete",n,!0);let i=this._delegate.setWithPriority(e,t);return n&&i.then(()=>n(null),e=>n(e)),i}update(e,t){if(eR("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,uW("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}eA("OnDisconnect.update","onComplete",t,!0);let n=this._delegate.update(e);return t&&n.then(()=>t(null),e=>t(e)),n}}class uj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return eR("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class uH{constructor(e,t){this._database=e,this._delegate=t}val(){return eR("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return eR("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return eR("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return eR("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return eR("DataSnapshot.child",0,1,arguments.length),cx("DataSnapshot.child","path",e=String(e),!1),new uH(this._database,this._delegate.child(e))}hasChild(e){return eR("DataSnapshot.hasChild",1,1,arguments.length),cx("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return eR("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return eR("DataSnapshot.forEach",1,1,arguments.length),eA("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new uH(this._database,t)))}hasChildren(){return eR("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return eR("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return eR("DataSnapshot.ref",0,0,arguments.length),new u$(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class uV{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,i){var r;eR("Query.on",2,4,arguments.length),eA("Query.on","callback",t,!1);let s=uV.getCancelAndContextArgs_("Query.on",n,i),o=(e,n)=>{t.call(s.context,new uH(this.database,e),n)};o.userCallback=t,o.context=s.context;let a=null===(r=s.cancel)||void 0===r?void 0:r.bind(s.context);switch(e){case"value":return uh(this._delegate,o,a),t;case"child_added":return ud(this._delegate,o,a),t;case"child_removed":return um(this._delegate,o,a),t;case"child_changed":return up(this._delegate,o,a),t;case"child_moved":return uf(this._delegate,o,a),t;default:throw Error(eP("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if(eR("Query.off",0,3,arguments.length),uq("Query.off",e,!0),eA("Query.off","callback",t,!0),eO("Query.off","context",n,!0),t){let i=()=>{};i.userCallback=t,i.context=n,ug(this._delegate,e,i)}else ug(this._delegate,e)}get(){return(function(e){e=eM(e);let t=new c4(()=>{}),n=new ul(t);return(function(e,t,n){let i=function(e,t){var n;let i=t._path,r=null;e.syncPointTree_.foreachOnPath(i,(e,t)=>{let n=o9(e,i);r=r||lU(t,n)});let s=e.syncPointTree_.get(i);s?r=r||lU(s,oJ()):(s=new lM,e.syncPointTree_=e.syncPointTree_.set(i,s));let o=null!=r,a=o?new a6(r,!0,!1):null,l=(n=e.pendingWriteTree_,lw(t._path,n)),c=lz(s,t,l,o?a.getNode():aI.EMPTY_NODE,o);return a8(c.viewCache_)}(e.serverSyncTree_,t);return null!=i?Promise.resolve(i):e.server_.get(t).then(i=>{let r;let s=aT(i).withIndex(t._queryParams.getIndex());if(lQ(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())r=lX(e.serverSyncTree_,t._path,s);else{let n=l1(e.serverSyncTree_,t);r=lY(e.serverSyncTree_,t._path,s,n)}return cR(e.eventQueue_,t._path,r),lG(e.serverSyncTree_,t,n,null,!0),s},n=>(cH(e,"get for query "+ep(t)+" failed: "+n),Promise.reject(Error(n))))})(e._repo,e,n).then(t=>new ui(t,new un(e._repo,e._path),e._queryParams.getIndex()))})(this._delegate).then(e=>new uH(this.database,e))}once(e,t,n,i){eR("Query.once",1,4,arguments.length),eA("Query.once","callback",t,!0);let r=uV.getCancelAndContextArgs_("Query.once",n,i),s=new ee,o=(e,n)=>{let i=new uH(this.database,e);t&&t.call(r.context,i,n),s.resolve(i)};o.userCallback=t,o.context=r.context;let a=e=>{r.cancel&&r.cancel.call(r.context,e),s.reject(e)};switch(e){case"value":uh(this._delegate,o,a,{onlyOnce:!0});break;case"child_added":ud(this._delegate,o,a,{onlyOnce:!0});break;case"child_removed":um(this._delegate,o,a,{onlyOnce:!0});break;case"child_changed":up(this._delegate,o,a,{onlyOnce:!0});break;case"child_moved":uf(this._delegate,o,a,{onlyOnce:!0});break;default:throw Error(eP("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return eR("Query.limitToFirst",1,1,arguments.length),new uV(this.database,uS(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw Error("limitToFirst: First argument must be a positive integer.");return new uk(e)}(e)))}limitToLast(e){return eR("Query.limitToLast",1,1,arguments.length),new uV(this.database,uS(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw Error("limitToLast: First argument must be a positive integer.");return new ux(e)}(e)))}orderByChild(e){return eR("Query.orderByChild",1,1,arguments.length),new uV(this.database,uS(this._delegate,function(e){if("$key"===e)throw Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return cx("orderByChild","path",e,!1),new uI(e)}(e)))}orderByKey(){return eR("Query.orderByKey",0,0,arguments.length),new uV(this.database,uS(this._delegate,new uC))}orderByPriority(){return eR("Query.orderByPriority",0,0,arguments.length),new uV(this.database,uS(this._delegate,new uT))}orderByValue(){return eR("Query.orderByValue",0,0,arguments.length),new uV(this.database,uS(this._delegate,new uN))}startAt(e=null,t){return eR("Query.startAt",0,2,arguments.length),new uV(this.database,uS(this._delegate,function(e=null,t){return ck("startAt","key",t,!0),new ub(e,t)}(e,t)))}startAfter(e=null,t){return eR("Query.startAfter",0,2,arguments.length),new uV(this.database,uS(this._delegate,(ck("startAfter","key",t,!0),new uw(e,t))))}endAt(e=null,t){return eR("Query.endAt",0,2,arguments.length),new uV(this.database,uS(this._delegate,(ck("endAt","key",t,!0),new u_(e,t))))}endBefore(e=null,t){return eR("Query.endBefore",0,2,arguments.length),new uV(this.database,uS(this._delegate,(ck("endBefore","key",t,!0),new uv(e,t))))}equalTo(e,t){return eR("Query.equalTo",1,2,arguments.length),new uV(this.database,uS(this._delegate,(ck("equalTo","key",t,!0),new uE(e,t))))}toString(){return eR("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return eR("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(eR("Query.isEqual",1,1,arguments.length),!(e instanceof uV))throw Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){let i={cancel:void 0,context:void 0};if(t&&n)i.cancel=t,eA(e,"cancel",i.cancel,!0),i.context=n,eO(e,"context",i.context,!0);else if(t){if("object"==typeof t&&null!==t)i.context=t;else if("function"==typeof t)i.cancel=t;else throw Error(eP(e,"cancelOrContext")+" must either be a cancel callback or a context object.")}return i}get ref(){return new u$(this.database,new un(this._delegate._repo,this._delegate._path))}}class u$ extends uV{constructor(e,t){super(e,new c8(t._repo,t._path,new aM,!1)),this.database=e,this._delegate=t}getKey(){return eR("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return eR("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new u$(this.database,uo(this._delegate,e))}getParent(){eR("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new u$(this.database,e):null}getRoot(){return eR("Reference.root",0,0,arguments.length),new u$(this.database,this._delegate.root)}set(e,t){eR("Reference.set",1,2,arguments.length),eA("Reference.set","onComplete",t,!0);let n=ua(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}update(e,t){if(eR("Reference.update",1,2,arguments.length),Array.isArray(e)){let t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,uW("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}cC("Reference.update",this._delegate._path),eA("Reference.update","onComplete",t,!0);let n=function(e,t){cb("update",t,e._path,!1);let n=new ee;return!function(e,t,n,i){cH(e,"update",{path:t.toString(),value:n});let r=!0,s=cD(e),o={};if(ow(n,(n,i)=>{r=!1,o[n]=cn(o3(t,n),aT(i),e.serverSyncTree_,s)}),r)oo("update() called with empty data.  Don't do anything."),cV(e,i,"ok",void 0);else{let r=cW(e),s=function(e,t,n,i){var r;W(i>(r=e.pendingWriteTree_).lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:t,children:n,writeId:i,visible:!0}),r.visibleWrites=lr(r.visibleWrites,t,n),r.lastWriteId=i;let s=lt.fromObject(n);return lZ(e,new a1(aG(),t,s))}(e.serverSyncTree_,t,o,r);cE(e.eventQueue_,s),e.server_.merge(t.toString(),n,(n,s)=>{let o="ok"===n;o||ou("update at "+t+" failed: "+n);let a=lK(e.serverSyncTree_,r,!o),l=a.length>0?cX(e,t):t;cR(e.eventQueue_,l,a),cV(e,i,n,s)}),ow(n,n=>{let i=cJ(e,o3(t,n));cX(e,i)}),cR(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){eR("Reference.setWithPriority",2,3,arguments.length),eA("Reference.setWithPriority","onComplete",n,!0);let i=function(e,t,n){if(cC("setWithPriority",e._path),cy("setWithPriority",t,e._path,!1),cw("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";let i=new ee;return cU(e._repo,e._path,t,n,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return n&&i.then(()=>n(null),e=>n(e)),i}remove(e){var t;eR("Reference.remove",0,1,arguments.length),eA("Reference.remove","onComplete",e,!0);let n=(cC("remove",(t=this._delegate)._path),ua(t,null));return e&&n.then(()=>e(null),t=>e(t)),n}transaction(e,t,n){eR("Reference.transaction",1,3,arguments.length),eA("Reference.transaction","transactionUpdate",e,!1),eA("Reference.transaction","onComplete",t,!0),uU("Reference.transaction","applyLocally",n,!0);let i=(function(e,t,n){var i;if(cC("Reference.transaction",(e=eM(e))._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";let r=null===(i=null==n?void 0:n.applyLocally)||void 0===i||i,s=new ee,o=uh(e,()=>{});return!function(e,t,n,i,r,s){cH(e,"transaction on "+t);let o={path:t,update:n,onComplete:i,status:null,order:oe(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=c$(e,t,void 0);o.currentInputSnapshot=a;let l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{let n;c_("transaction failed: Data returned ",l,o.path),o.status=0;let i=co(e.transactionQueueTree_,t),r=ca(i)||[];if(r.push(o),cl(i,r),"object"==typeof l&&null!==l&&ey(l,".priority"))W(cg(n=e_(l,".priority")),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{let i=lJ(e.serverSyncTree_,t)||aI.EMPTY_NODE;n=i.getPriority().val()}let s=cD(e),c=aT(l,n),u=ci(c,a,s);o.currentOutputSnapshotRaw=c,o.currentOutputSnapshotResolved=u,o.currentWriteId=cW(e);let h=l$(e.serverSyncTree_,t,u,o.currentWriteId,o.applyLocally);cR(e.eventQueue_,t,h),cK(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(t,n,i)=>{let r=null;t?s.reject(t):(r=new ui(i,new un(e._repo,e._path),a_),s.resolve(new uF(n,r)))},o,r),s.promise})(this._delegate,e,{applyLocally:n}).then(e=>new uj(e.committed,new uH(this.database,e.snapshot)));return t&&i.then(e=>t(null,e.committed,e.snapshot),e=>t(e,!1,null)),i}setPriority(e,t){eR("Reference.setPriority",1,2,arguments.length),eA("Reference.setPriority","onComplete",t,!0);let n=function(e,t){cC("setPriority",(e=eM(e))._path),cw("setPriority",t,!1);let n=new ee;return cU(e._repo,o3(e._path,".priority"),t,null,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}push(e,t){eR("Reference.push",0,2,arguments.length),eA("Reference.push","onComplete",t,!0);let n=function(e,t){let n;cC("push",(e=eM(e))._path),cy("push",t,e._path,!0);let i=cL(e._repo),r=c2(i),s=uo(e,r),o=uo(e,r);return n=null!=t?ua(o,t).then(()=>o):Promise.resolve(o),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}(this._delegate,e),i=n.then(e=>new u$(this.database,e));t&&i.then(()=>t(null),e=>t(e));let r=new u$(this.database,n);return r.then=i.then.bind(i),r.catch=i.catch.bind(i,void 0),r}onDisconnect(){return cC("Reference.onDisconnect",this._delegate._path),new uB(new c9(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class uK{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:uL,forceLongPolling:uD}}useEmulator(e,t,n={}){!function(e,t,n,i={}){var r;let s;(e=eM(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&oc("Cannot call useEmulator() after instance has already been initialized.");let o=e._repoInternal;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&oc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new oR(oR.OWNER);else if(i.mockUserToken){let t="string"==typeof i.mockUserToken?i.mockUserToken:function(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[$(JSON.stringify({alg:"none",type:"JWT"})),$(JSON.stringify(s)),""].join(".")}(i.mockUserToken,e.app.options.projectId);s=new oR(t)}r=s,o.repoInfo_=new oL(`${t}:${n}`,!1,o.repoInfo_.namespace,o.repoInfo_.webSocketOnly,o.repoInfo_.nodeAdmin,o.repoInfo_.persistenceKey,o.repoInfo_.includeNamespaceInQueryParams,!0),r&&(o.authTokenProvider_=r)}(this._delegate,e,t,n)}ref(e){if(eR("database.ref",0,1,arguments.length),e instanceof u$){let t=us(this._delegate,e.toString());return new u$(this,t)}{let t=ur(this._delegate,e);return new u$(this,t)}}refFromURL(e){eR("database.refFromURL",1,1,arguments.length);let t=us(this._delegate,e);return new u$(this,t)}goOffline(){var e;return eR("database.goOffline",0,0,arguments.length),void((e=eM(e=this._delegate))._checkNotDeleted("goOffline"),cj(e._repo))}goOnline(){var e,t;return eR("database.goOnline",0,0,arguments.length),void((e=eM(e=this._delegate))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(cA))}}uK.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:e=>({".sv":{increment:e}})};var uX=Object.freeze({__proto__:null,initStandalone:function({app:e,url:t,version:n,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){s2=n;let o=new eW("auth-internal",new eU("database-standalone"));return o.setComponent(new eF("auth-internal",()=>i,"PRIVATE")),{instance:new uK(uP(e,o,void 0,t,s),e),namespace:r}}});const uG=uK.ServerValue;!function(e){e.INTERNAL.registerComponent(new eF("database-compat",(e,{instanceIdentifier:t})=>{let n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new uK(i,n)},"PUBLIC").setServiceProps({Reference:u$,Query:uV,Database:uK,DataSnapshot:uH,enableLogging:uM,INTERNAL:uX,ServerValue:uG}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","1.0.0")}(tO);var uY={};!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e)}):"object"==typeof uY?uY=t(e):e.Notiflix=t(e)}(void 0===v?"undefined"==typeof window?uY:window:v,function(e){"use strict";if(void 0===e&&void 0===e.document)return!1;var t,n,i,r,s,o="\n\nVisit documentation page to learn more: https://notiflix.github.io/documentation",a='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif',l={Success:"Success",Failure:"Failure",Warning:"Warning",Info:"Info"},c={wrapID:"NotiflixNotifyWrap",overlayID:"NotiflixNotifyOverlay",width:"280px",position:"right-top",distance:"10px",opacity:1,borderRadius:"5px",rtl:!1,timeout:3e3,messageMaxLength:110,backOverlay:!1,backOverlayColor:"rgba(0,0,0,0.5)",plainText:!0,showOnlyTheLastOne:!1,clickToClose:!1,pauseOnHover:!0,ID:"NotiflixNotify",className:"notiflix-notify",zindex:4001,fontFamily:"Quicksand",fontSize:"13px",cssAnimation:!0,cssAnimationDuration:400,cssAnimationStyle:"fade",closeButton:!1,useIcon:!0,useFontAwesome:!1,fontAwesomeIconStyle:"basic",fontAwesomeIconSize:"34px",success:{background:"#32c682",textColor:"#fff",childClassName:"notiflix-notify-success",notiflixIconColor:"rgba(0,0,0,0.2)",fontAwesomeClassName:"fas fa-check-circle",fontAwesomeIconColor:"rgba(0,0,0,0.2)",backOverlayColor:"rgba(50,198,130,0.2)"},failure:{background:"#ff5549",textColor:"#fff",childClassName:"notiflix-notify-failure",notiflixIconColor:"rgba(0,0,0,0.2)",fontAwesomeClassName:"fas fa-times-circle",fontAwesomeIconColor:"rgba(0,0,0,0.2)",backOverlayColor:"rgba(255,85,73,0.2)"},warning:{background:"#eebf31",textColor:"#fff",childClassName:"notiflix-notify-warning",notiflixIconColor:"rgba(0,0,0,0.2)",fontAwesomeClassName:"fas fa-exclamation-circle",fontAwesomeIconColor:"rgba(0,0,0,0.2)",backOverlayColor:"rgba(238,191,49,0.2)"},info:{background:"#26c0d3",textColor:"#fff",childClassName:"notiflix-notify-info",notiflixIconColor:"rgba(0,0,0,0.2)",fontAwesomeClassName:"fas fa-info-circle",fontAwesomeIconColor:"rgba(0,0,0,0.2)",backOverlayColor:"rgba(38,192,211,0.2)"}},u={Success:"Success",Failure:"Failure",Warning:"Warning",Info:"Info"},h={ID:"NotiflixReportWrap",className:"notiflix-report",width:"320px",backgroundColor:"#f8f8f8",borderRadius:"25px",rtl:!1,zindex:4002,backOverlay:!0,backOverlayColor:"rgba(0,0,0,0.5)",backOverlayClickToClose:!1,fontFamily:"Quicksand",svgSize:"110px",plainText:!0,titleFontSize:"16px",titleMaxLength:34,messageFontSize:"13px",messageMaxLength:400,buttonFontSize:"14px",buttonMaxLength:34,cssAnimation:!0,cssAnimationDuration:360,cssAnimationStyle:"fade",success:{svgColor:"#32c682",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#32c682",buttonColor:"#fff",backOverlayColor:"rgba(50,198,130,0.2)"},failure:{svgColor:"#ff5549",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#ff5549",buttonColor:"#fff",backOverlayColor:"rgba(255,85,73,0.2)"},warning:{svgColor:"#eebf31",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#eebf31",buttonColor:"#fff",backOverlayColor:"rgba(238,191,49,0.2)"},info:{svgColor:"#26c0d3",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#26c0d3",buttonColor:"#fff",backOverlayColor:"rgba(38,192,211,0.2)"}},d={Show:"Show",Ask:"Ask",Prompt:"Prompt"},p={ID:"NotiflixConfirmWrap",className:"notiflix-confirm",width:"300px",zindex:4003,position:"center",distance:"10px",backgroundColor:"#f8f8f8",borderRadius:"25px",backOverlay:!0,backOverlayColor:"rgba(0,0,0,0.5)",rtl:!1,fontFamily:"Quicksand",cssAnimation:!0,cssAnimationDuration:300,cssAnimationStyle:"fade",plainText:!0,titleColor:"#32c682",titleFontSize:"16px",titleMaxLength:34,messageColor:"#1e1e1e",messageFontSize:"14px",messageMaxLength:110,buttonsFontSize:"15px",buttonsMaxLength:34,okButtonColor:"#f8f8f8",okButtonBackground:"#32c682",cancelButtonColor:"#f8f8f8",cancelButtonBackground:"#a9a9a9"},f={Standard:"Standard",Hourglass:"Hourglass",Circle:"Circle",Arrows:"Arrows",Dots:"Dots",Pulse:"Pulse",Custom:"Custom",Notiflix:"Notiflix"},m={ID:"NotiflixLoadingWrap",className:"notiflix-loading",zindex:4e3,backgroundColor:"rgba(0,0,0,0.8)",rtl:!1,fontFamily:"Quicksand",cssAnimation:!0,cssAnimationDuration:400,clickToClose:!1,customSvgUrl:null,customSvgCode:null,svgSize:"80px",svgColor:"#32c682",messageID:"NotiflixLoadingMessage",messageFontSize:"15px",messageMaxLength:34,messageColor:"#dcdcdc"},g={Standard:"Standard",Hourglass:"Hourglass",Circle:"Circle",Arrows:"Arrows",Dots:"Dots",Pulse:"Pulse"},y={ID:"NotiflixBlockWrap",querySelectorLimit:200,className:"notiflix-block",position:"absolute",zindex:1e3,backgroundColor:"rgba(255,255,255,0.9)",rtl:!1,fontFamily:"Quicksand",cssAnimation:!0,cssAnimationDuration:300,svgSize:"45px",svgColor:"#383838",messageFontSize:"14px",messageMaxLength:34,messageColor:"#383838"},_=function(e){return console.error("%c Notiflix Error ","padding:2px;border-radius:20px;color:#fff;background:#ff5549","\n"+e+o)},v=function(e){return console.log("%c Notiflix Info ","padding:2px;border-radius:20px;color:#fff;background:#26c0d3","\n"+e+o)},b=function(t){return t||(t="head"),null!==e.document[t]||(_('\nNotiflix needs to be appended to the "<'+t+'>" element, but you called it before the "<'+t+'>" element has been created.'),!1)},w=function(t,n){if(!b("head"))return!1;if(null!==t()&&!e.document.getElementById(n)){var i=e.document.createElement("style");i.id=n,i.innerHTML=t(),e.document.head.appendChild(i)}},k=function(){var e={},t=!1,n=0;for("[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],n++);n<arguments.length;n++)!function(n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=t&&"[object Object]"===Object.prototype.toString.call(n[i])?k(e[i],n[i]):n[i])}(arguments[n]);return e},x=function(t){var n=e.document.createElement("div");return n.innerHTML=t,n.textContent||n.innerText||""},I=function(e,t){return e||(e="60px"),t||(t="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" stroke="'+t+'" width="'+e+'" height="'+e+'" transform="scale(.8)" viewBox="0 0 38 38"><g fill="none" fill-rule="evenodd" stroke-width="2" transform="translate(1 1)"><circle cx="18" cy="18" r="18" stroke-opacity=".25"/><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" dur="1s" from="0 18 18" repeatCount="indefinite" to="360 18 18" type="rotate"/></path></g></svg>'},C=function(e,t){return e||(e="60px"),t||(t="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" id="NXLoadingHourglass" fill="'+t+'" width="'+e+'" height="'+e+'" viewBox="0 0 200 200"><style>@-webkit-keyframes NXhourglass5-animation{0%{-webkit-transform:scale(1,1);transform:scale(1,1)}16.67%{-webkit-transform:scale(1,.8);transform:scale(1,.8)}33.33%{-webkit-transform:scale(.88,.6);transform:scale(.88,.6)}37.5%{-webkit-transform:scale(.85,.55);transform:scale(.85,.55)}41.67%{-webkit-transform:scale(.8,.5);transform:scale(.8,.5)}45.83%{-webkit-transform:scale(.75,.45);transform:scale(.75,.45)}50%{-webkit-transform:scale(.7,.4);transform:scale(.7,.4)}54.17%{-webkit-transform:scale(.6,.35);transform:scale(.6,.35)}58.33%{-webkit-transform:scale(.5,.3);transform:scale(.5,.3)}83.33%,to{-webkit-transform:scale(.2,0);transform:scale(.2,0)}}@keyframes NXhourglass5-animation{0%{-webkit-transform:scale(1,1);transform:scale(1,1)}16.67%{-webkit-transform:scale(1,.8);transform:scale(1,.8)}33.33%{-webkit-transform:scale(.88,.6);transform:scale(.88,.6)}37.5%{-webkit-transform:scale(.85,.55);transform:scale(.85,.55)}41.67%{-webkit-transform:scale(.8,.5);transform:scale(.8,.5)}45.83%{-webkit-transform:scale(.75,.45);transform:scale(.75,.45)}50%{-webkit-transform:scale(.7,.4);transform:scale(.7,.4)}54.17%{-webkit-transform:scale(.6,.35);transform:scale(.6,.35)}58.33%{-webkit-transform:scale(.5,.3);transform:scale(.5,.3)}83.33%,to{-webkit-transform:scale(.2,0);transform:scale(.2,0)}}@-webkit-keyframes NXhourglass3-animation{0%{-webkit-transform:scale(1,.02);transform:scale(1,.02)}79.17%,to{-webkit-transform:scale(1,1);transform:scale(1,1)}}@keyframes NXhourglass3-animation{0%{-webkit-transform:scale(1,.02);transform:scale(1,.02)}79.17%,to{-webkit-transform:scale(1,1);transform:scale(1,1)}}@-webkit-keyframes NXhourglass1-animation{0%,83.33%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}@keyframes NXhourglass1-animation{0%,83.33%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}#NXLoadingHourglass *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g data-animator-group="true" data-animator-type="1" style="-webkit-animation-name:NXhourglass1-animation;animation-name:NXhourglass1-animation;-webkit-transform-origin:50% 50%;transform-origin:50% 50%;transform-box:fill-box"><g id="NXhourglass2" fill="inherit"><g data-animator-group="true" data-animator-type="2" style="-webkit-animation-name:NXhourglass3-animation;animation-name:NXhourglass3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform-origin:50% 100%;transform-origin:50% 100%;transform-box:fill-box" opacity=".4"><path id="NXhourglass4" d="M100 100l-34.38 32.08v31.14h68.76v-31.14z"/></g><g data-animator-group="true" data-animator-type="2" style="-webkit-animation-name:NXhourglass5-animation;animation-name:NXhourglass5-animation;-webkit-transform-origin:50% 100%;transform-origin:50% 100%;transform-box:fill-box" opacity=".4"><path id="NXhourglass6" d="M100 100L65.62 67.92V36.78h68.76v31.14z"/></g><path d="M51.14 38.89h8.33v14.93c0 15.1 8.29 28.99 23.34 39.1 1.88 1.25 3.04 3.97 3.04 7.08s-1.16 5.83-3.04 7.09c-15.05 10.1-23.34 23.99-23.34 39.09v14.93h-8.33a4.859 4.859 0 1 0 0 9.72h97.72a4.859 4.859 0 1 0 0-9.72h-8.33v-14.93c0-15.1-8.29-28.99-23.34-39.09-1.88-1.26-3.04-3.98-3.04-7.09s1.16-5.83 3.04-7.08c15.05-10.11 23.34-24 23.34-39.1V38.89h8.33a4.859 4.859 0 1 0 0-9.72H51.14a4.859 4.859 0 1 0 0 9.72zm79.67 14.93c0 15.87-11.93 26.25-19.04 31.03-4.6 3.08-7.34 8.75-7.34 15.15 0 6.41 2.74 12.07 7.34 15.15 7.11 4.78 19.04 15.16 19.04 31.03v14.93H69.19v-14.93c0-15.87 11.93-26.25 19.04-31.02 4.6-3.09 7.34-8.75 7.34-15.16 0-6.4-2.74-12.07-7.34-15.15-7.11-4.78-19.04-15.16-19.04-31.03V38.89h61.62v14.93z"/></g></g></svg>'},T=function(e,t){return e||(e="60px"),t||(t="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+e+'" viewBox="25 25 50 50" style="-webkit-animation:rotate 2s linear infinite;animation:rotate 2s linear infinite;height:'+e+";-webkit-transform-origin:center center;-ms-transform-origin:center center;transform-origin:center center;width:"+e+';position:absolute;top:0;left:0;margin:auto"><style>@-webkit-keyframes rotate{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}@keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}</style><circle cx="50" cy="50" r="20" fill="none" stroke="'+t+'" stroke-width="2" style="-webkit-animation:dash 1.5s ease-in-out infinite,color 1.5s ease-in-out infinite;animation:dash 1.5s ease-in-out infinite,color 1.5s ease-in-out infinite" stroke-dasharray="150 200" stroke-dashoffset="-10" stroke-linecap="round"/></svg>'},N=function(e,t){return e||(e="60px"),t||(t="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" fill="'+t+'" width="'+e+'" height="'+e+'" viewBox="0 0 128 128"><g><path fill="inherit" d="M109.25 55.5h-36l12-12a29.54 29.54 0 0 0-49.53 12H18.75A46.04 46.04 0 0 1 96.9 31.84l12.35-12.34v36zm-90.5 17h36l-12 12a29.54 29.54 0 0 0 49.53-12h16.97A46.04 46.04 0 0 1 31.1 96.16L18.74 108.5v-36z"/><animateTransform attributeName="transform" dur="1.5s" from="0 64 64" repeatCount="indefinite" to="360 64 64" type="rotate"/></g></svg>'},E=function(e,t){return e||(e="60px"),t||(t="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" fill="'+t+'" width="'+e+'" height="'+e+'" viewBox="0 0 100 100"><g transform="translate(25 50)"><circle r="9" fill="inherit" transform="scale(.239)"><animateTransform attributeName="transform" begin="-0.266s" calcMode="spline" dur="0.8s" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" keyTimes="0;0.5;1" repeatCount="indefinite" type="scale" values="0;1;0"/></circle></g><g transform="translate(50 50)"><circle r="9" fill="inherit" transform="scale(.00152)"><animateTransform attributeName="transform" begin="-0.133s" calcMode="spline" dur="0.8s" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" keyTimes="0;0.5;1" repeatCount="indefinite" type="scale" values="0;1;0"/></circle></g><g transform="translate(75 50)"><circle r="9" fill="inherit" transform="scale(.299)"><animateTransform attributeName="transform" begin="0s" calcMode="spline" dur="0.8s" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" keyTimes="0;0.5;1" repeatCount="indefinite" type="scale" values="0;1;0"/></circle></g></svg>'},S=function(e,t){return e||(e="60px"),t||(t="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" stroke="'+t+'" width="'+e+'" height="'+e+'" viewBox="0 0 44 44"><g fill="none" fill-rule="evenodd" stroke-width="2"><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="0s" calcMode="spline" dur="1.8s" keySplines="0.165, 0.84, 0.44, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 20"/><animate attributeName="stroke-opacity" begin="0s" calcMode="spline" dur="1.8s" keySplines="0.3, 0.61, 0.355, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 0"/></circle><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="-0.9s" calcMode="spline" dur="1.8s" keySplines="0.165, 0.84, 0.44, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 20"/><animate attributeName="stroke-opacity" begin="-0.9s" calcMode="spline" dur="1.8s" keySplines="0.3, 0.61, 0.355, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 0"/></circle></g></svg>'},R=function(){return'[id^=NotiflixNotifyWrap]{pointer-events:none;position:fixed;z-index:4001;opacity:1;right:10px;top:10px;width:280px;max-width:96%;-webkit-box-sizing:border-box;box-sizing:border-box;background:transparent}[id^=NotiflixNotifyWrap].nx-flex-center-center{max-height:calc(100vh - 20px);overflow-x:hidden;overflow-y:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:auto}[id^=NotiflixNotifyWrap]::-webkit-scrollbar{width:0;height:0}[id^=NotiflixNotifyWrap]::-webkit-scrollbar-thumb{background:transparent}[id^=NotiflixNotifyWrap]::-webkit-scrollbar-track{background:transparent}[id^=NotiflixNotifyWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixNotifyOverlay]{-webkit-transition:background .3s ease-in-out;-o-transition:background .3s ease-in-out;transition:background .3s ease-in-out}[id^=NotiflixNotifyWrap]>div{pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;width:100%;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;position:relative;margin:0 0 10px;border-radius:5px;background:#1e1e1e;color:#fff;padding:10px 12px;font-size:14px;line-height:1.4}[id^=NotiflixNotifyWrap]>div:last-child{margin:0}[id^=NotiflixNotifyWrap]>div.nx-with-callback{cursor:pointer}[id^=NotiflixNotifyWrap]>div.nx-with-icon{padding:8px;min-height:56px}[id^=NotiflixNotifyWrap]>div.nx-paused{cursor:auto}[id^=NotiflixNotifyWrap]>div.nx-notify-click-to-close{cursor:pointer}[id^=NotiflixNotifyWrap]>div.nx-with-close-button{padding:10px 36px 10px 12px}[id^=NotiflixNotifyWrap]>div.nx-with-icon.nx-with-close-button{padding:6px 36px 6px 6px}[id^=NotiflixNotifyWrap]>div>span.nx-message{cursor:inherit;font-weight:normal;font-family:inherit!important;word-break:break-all;word-break:break-word}[id^=NotiflixNotifyWrap]>div>span.nx-close-button{cursor:pointer;-webkit-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out;position:absolute;right:8px;top:0;bottom:0;margin:auto;color:inherit;width:20px;height:20px}[id^=NotiflixNotifyWrap]>div>span.nx-close-button:hover{-webkit-transform:rotate(90deg);transform:rotate(90deg)}[id^=NotiflixNotifyWrap]>div>span.nx-close-button>svg{position:absolute;width:16px;height:16px;right:2px;top:2px}[id^=NotiflixNotifyWrap]>div>.nx-message-icon{position:absolute;width:40px;height:40px;font-size:30px;line-height:40px;text-align:center;left:8px;top:0;bottom:0;margin:auto;border-radius:inherit}[id^=NotiflixNotifyWrap]>div>.nx-message-icon-fa.nx-message-icon-fa-shadow{color:inherit;background:rgba(0,0,0,.15);-webkit-box-shadow:inset 0 0 34px rgba(0,0,0,.2);box-shadow:inset 0 0 34px rgba(0,0,0,.2);text-shadow:0 0 10px rgba(0,0,0,.3)}[id^=NotiflixNotifyWrap]>div>span.nx-with-icon{position:relative;float:left;width:calc(100% - 40px);margin:0 0 0 40px;padding:0 0 0 10px;-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixNotifyWrap]>div.nx-rtl-on>.nx-message-icon{left:auto;right:8px}[id^=NotiflixNotifyWrap]>div.nx-rtl-on>span.nx-with-icon{padding:0 10px 0 0;margin:0 40px 0 0}[id^=NotiflixNotifyWrap]>div.nx-rtl-on>span.nx-close-button{right:auto;left:8px}[id^=NotiflixNotifyWrap]>div.nx-with-icon.nx-with-close-button.nx-rtl-on{padding:6px 6px 6px 36px}[id^=NotiflixNotifyWrap]>div.nx-with-close-button.nx-rtl-on{padding:10px 12px 10px 36px}[id^=NotiflixNotifyOverlay].nx-with-animation,[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-fade{-webkit-animation:notify-animation-fade .3s ease-in-out 0s normal;animation:notify-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes notify-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-zoom{-webkit-animation:notify-animation-zoom .3s ease-in-out 0s normal;animation:notify-animation-zoom .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-zoom{0%{-webkit-transform:scale(0);transform:scale(0)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes notify-animation-zoom{0%{-webkit-transform:scale(0);transform:scale(0)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(1);transform:scale(1)}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-right{-webkit-animation:notify-animation-from-right .3s ease-in-out 0s normal;animation:notify-animation-from-right .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-from-right{0%{right:-300px;opacity:0}50%{right:8px;opacity:1}100%{right:0;opacity:1}}@keyframes notify-animation-from-right{0%{right:-300px;opacity:0}50%{right:8px;opacity:1}100%{right:0;opacity:1}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-left{-webkit-animation:notify-animation-from-left .3s ease-in-out 0s normal;animation:notify-animation-from-left .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-from-left{0%{left:-300px;opacity:0}50%{left:8px;opacity:1}100%{left:0;opacity:1}}@keyframes notify-animation-from-left{0%{left:-300px;opacity:0}50%{left:8px;opacity:1}100%{left:0;opacity:1}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-top{-webkit-animation:notify-animation-from-top .3s ease-in-out 0s normal;animation:notify-animation-from-top .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-from-top{0%{top:-50px;opacity:0}50%{top:8px;opacity:1}100%{top:0;opacity:1}}@keyframes notify-animation-from-top{0%{top:-50px;opacity:0}50%{top:8px;opacity:1}100%{top:0;opacity:1}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-bottom{-webkit-animation:notify-animation-from-bottom .3s ease-in-out 0s normal;animation:notify-animation-from-bottom .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-from-bottom{0%{bottom:-50px;opacity:0}50%{bottom:8px;opacity:1}100%{bottom:0;opacity:1}}@keyframes notify-animation-from-bottom{0%{bottom:-50px;opacity:0}50%{bottom:8px;opacity:1}100%{bottom:0;opacity:1}}[id^=NotiflixNotifyOverlay].nx-with-animation.nx-remove,[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-fade.nx-remove{opacity:0;-webkit-animation:notify-remove-fade .3s ease-in-out 0s normal;animation:notify-remove-fade .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-fade{0%{opacity:1}100%{opacity:0}}@keyframes notify-remove-fade{0%{opacity:1}100%{opacity:0}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-zoom.nx-remove{-webkit-transform:scale(0);transform:scale(0);-webkit-animation:notify-remove-zoom .3s ease-in-out 0s normal;animation:notify-remove-zoom .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-zoom{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(0);transform:scale(0)}}@keyframes notify-remove-zoom{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(0);transform:scale(0)}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-top.nx-remove{opacity:0;-webkit-animation:notify-remove-to-top .3s ease-in-out 0s normal;animation:notify-remove-to-top .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-to-top{0%{top:0;opacity:1}50%{top:8px;opacity:1}100%{top:-50px;opacity:0}}@keyframes notify-remove-to-top{0%{top:0;opacity:1}50%{top:8px;opacity:1}100%{top:-50px;opacity:0}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-right.nx-remove{opacity:0;-webkit-animation:notify-remove-to-right .3s ease-in-out 0s normal;animation:notify-remove-to-right .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-to-right{0%{right:0;opacity:1}50%{right:8px;opacity:1}100%{right:-300px;opacity:0}}@keyframes notify-remove-to-right{0%{right:0;opacity:1}50%{right:8px;opacity:1}100%{right:-300px;opacity:0}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-bottom.nx-remove{opacity:0;-webkit-animation:notify-remove-to-bottom .3s ease-in-out 0s normal;animation:notify-remove-to-bottom .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-to-bottom{0%{bottom:0;opacity:1}50%{bottom:8px;opacity:1}100%{bottom:-50px;opacity:0}}@keyframes notify-remove-to-bottom{0%{bottom:0;opacity:1}50%{bottom:8px;opacity:1}100%{bottom:-50px;opacity:0}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-left.nx-remove{opacity:0;-webkit-animation:notify-remove-to-left .3s ease-in-out 0s normal;animation:notify-remove-to-left .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-to-left{0%{left:0;opacity:1}50%{left:8px;opacity:1}100%{left:-300px;opacity:0}}@keyframes notify-remove-to-left{0%{left:0;opacity:1}50%{left:8px;opacity:1}100%{left:-300px;opacity:0}}'},P=0,A=function(n,i,r,s){if(!b("body"))return!1;t||j.Notify.init({});var o=k(!0,t,{});if("object"==typeof r&&!Array.isArray(r)||"object"==typeof s&&!Array.isArray(s)){var u={};"object"==typeof r?u=r:"object"==typeof s&&(u=s),t=k(!0,t,u)}var h=t[n.toLocaleLowerCase("en")];P++,"string"!=typeof i&&(i="Notiflix "+n),t.plainText&&(i=x(i)),!t.plainText&&i.length>t.messageMaxLength&&(t=k(!0,t,{closeButton:!0,messageMaxLength:150}),i='Possible HTML Tags Error: The "plainText" option is "false" and the notification content length is more than the "messageMaxLength" option.'),i.length>t.messageMaxLength&&(i=i.substring(0,t.messageMaxLength)+"..."),"shadow"===t.fontAwesomeIconStyle&&(h.fontAwesomeIconColor=h.background),t.cssAnimation||(t.cssAnimationDuration=0);var d=e.document.getElementById(c.wrapID)||e.document.createElement("div");if(d.id=c.wrapID,d.style.width=t.width,d.style.zIndex=t.zindex,d.style.opacity=t.opacity,"center-center"===t.position?(d.style.left=t.distance,d.style.top=t.distance,d.style.right=t.distance,d.style.bottom=t.distance,d.style.margin="auto",d.classList.add("nx-flex-center-center"),d.style.maxHeight="calc((100vh - "+t.distance+") - "+t.distance+")",d.style.display="flex",d.style.flexWrap="wrap",d.style.flexDirection="column",d.style.justifyContent="center",d.style.alignItems="center",d.style.pointerEvents="none"):"center-top"===t.position?(d.style.left=t.distance,d.style.right=t.distance,d.style.top=t.distance,d.style.bottom="auto",d.style.margin="auto"):"center-bottom"===t.position?(d.style.left=t.distance,d.style.right=t.distance,d.style.bottom=t.distance,d.style.top="auto",d.style.margin="auto"):"right-bottom"===t.position?(d.style.right=t.distance,d.style.bottom=t.distance,d.style.top="auto",d.style.left="auto"):"left-top"===t.position?(d.style.left=t.distance,d.style.top=t.distance,d.style.right="auto",d.style.bottom="auto"):"left-bottom"===t.position?(d.style.left=t.distance,d.style.bottom=t.distance,d.style.top="auto",d.style.right="auto"):(d.style.right=t.distance,d.style.top=t.distance,d.style.left="auto",d.style.bottom="auto"),t.backOverlay){var p=e.document.getElementById(c.overlayID)||e.document.createElement("div");p.id=c.overlayID,p.style.width="100%",p.style.height="100%",p.style.position="fixed",p.style.zIndex=t.zindex-1,p.style.left=0,p.style.top=0,p.style.right=0,p.style.bottom=0,p.style.background=h.backOverlayColor||t.backOverlayColor,p.className=t.cssAnimation?"nx-with-animation":"",p.style.animationDuration=t.cssAnimation?t.cssAnimationDuration+"ms":"",e.document.getElementById(c.overlayID)||e.document.body.appendChild(p)}e.document.getElementById(c.wrapID)||e.document.body.appendChild(d);var f=e.document.createElement("div");f.id=t.ID+"-"+P,f.className=t.className+" "+h.childClassName+" "+(t.cssAnimation?"nx-with-animation":"")+" "+(t.useIcon?"nx-with-icon":"")+" nx-"+t.cssAnimationStyle+" "+(t.closeButton&&"function"!=typeof r?"nx-with-close-button":"")+" "+("function"==typeof r?"nx-with-callback":"")+" "+(t.clickToClose?"nx-notify-click-to-close":""),f.style.fontSize=t.fontSize,f.style.color=h.textColor,f.style.background=h.background,f.style.borderRadius=t.borderRadius,f.style.pointerEvents="all",t.rtl&&(f.setAttribute("dir","rtl"),f.classList.add("nx-rtl-on")),f.style.fontFamily='"'+t.fontFamily+'", '+a,t.cssAnimation&&(f.style.animationDuration=t.cssAnimationDuration+"ms");var m="";if(t.closeButton&&"function"!=typeof r&&(m='<span class="nx-close-button"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g><path fill="'+h.notiflixIconColor+'" d="M0.38 2.19l7.8 7.81 -7.8 7.81c-0.51,0.5 -0.51,1.31 -0.01,1.81 0.25,0.25 0.57,0.38 0.91,0.38 0.34,0 0.67,-0.14 0.91,-0.38l7.81 -7.81 7.81 7.81c0.24,0.24 0.57,0.38 0.91,0.38 0.34,0 0.66,-0.14 0.9,-0.38 0.51,-0.5 0.51,-1.31 0,-1.81l-7.81 -7.81 7.81 -7.81c0.51,-0.5 0.51,-1.31 0,-1.82 -0.5,-0.5 -1.31,-0.5 -1.81,0l-7.81 7.81 -7.81 -7.81c-0.5,-0.5 -1.31,-0.5 -1.81,0 -0.51,0.51 -0.51,1.32 0,1.82z"/></g></svg></span>'),t.useIcon){if(t.useFontAwesome)f.innerHTML='<i style="color:'+h.fontAwesomeIconColor+"; font-size:"+t.fontAwesomeIconSize+';" class="nx-message-icon nx-message-icon-fa '+h.fontAwesomeClassName+" "+("shadow"===t.fontAwesomeIconStyle?"nx-message-icon-fa-shadow":"nx-message-icon-fa-basic")+'"></i><span class="nx-message nx-with-icon">'+i+"</span>"+(t.closeButton?m:"");else{var g="";n===l.Success?g='<svg class="nx-message-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><g><path fill="'+h.notiflixIconColor+'" d="M20 0c11.03,0 20,8.97 20,20 0,11.03 -8.97,20 -20,20 -11.03,0 -20,-8.97 -20,-20 0,-11.03 8.97,-20 20,-20zm0 37.98c9.92,0 17.98,-8.06 17.98,-17.98 0,-9.92 -8.06,-17.98 -17.98,-17.98 -9.92,0 -17.98,8.06 -17.98,17.98 0,9.92 8.06,17.98 17.98,17.98zm-2.4 -13.29l11.52 -12.96c0.37,-0.41 1.01,-0.45 1.42,-0.08 0.42,0.37 0.46,1 0.09,1.42l-12.16 13.67c-0.19,0.22 -0.46,0.34 -0.75,0.34 -0.23,0 -0.45,-0.07 -0.63,-0.22l-7.6 -6.07c-0.43,-0.35 -0.5,-0.99 -0.16,-1.42 0.35,-0.43 0.99,-0.5 1.42,-0.16l6.85 5.48z"/></g></svg>':n===l.Failure?g='<svg class="nx-message-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><g><path fill="'+h.notiflixIconColor+'" d="M20 0c11.03,0 20,8.97 20,20 0,11.03 -8.97,20 -20,20 -11.03,0 -20,-8.97 -20,-20 0,-11.03 8.97,-20 20,-20zm0 37.98c9.92,0 17.98,-8.06 17.98,-17.98 0,-9.92 -8.06,-17.98 -17.98,-17.98 -9.92,0 -17.98,8.06 -17.98,17.98 0,9.92 8.06,17.98 17.98,17.98zm1.42 -17.98l6.13 6.12c0.39,0.4 0.39,1.04 0,1.43 -0.19,0.19 -0.45,0.29 -0.71,0.29 -0.27,0 -0.53,-0.1 -0.72,-0.29l-6.12 -6.13 -6.13 6.13c-0.19,0.19 -0.44,0.29 -0.71,0.29 -0.27,0 -0.52,-0.1 -0.71,-0.29 -0.39,-0.39 -0.39,-1.03 0,-1.43l6.13 -6.12 -6.13 -6.13c-0.39,-0.39 -0.39,-1.03 0,-1.42 0.39,-0.39 1.03,-0.39 1.42,0l6.13 6.12 6.12 -6.12c0.4,-0.39 1.04,-0.39 1.43,0 0.39,0.39 0.39,1.03 0,1.42l-6.13 6.13z"/></g></svg>':n===l.Warning?g='<svg class="nx-message-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><g><path fill="'+h.notiflixIconColor+'" d="M21.91 3.48l17.8 30.89c0.84,1.46 -0.23,3.25 -1.91,3.25l-35.6 0c-1.68,0 -2.75,-1.79 -1.91,-3.25l17.8 -30.89c0.85,-1.47 2.97,-1.47 3.82,0zm16.15 31.84l-17.8 -30.89c-0.11,-0.2 -0.41,-0.2 -0.52,0l-17.8 30.89c-0.12,0.2 0.05,0.4 0.26,0.4l35.6 0c0.21,0 0.38,-0.2 0.26,-0.4zm-19.01 -4.12l0 -1.05c0,-0.53 0.42,-0.95 0.95,-0.95 0.53,0 0.95,0.42 0.95,0.95l0 1.05c0,0.53 -0.42,0.95 -0.95,0.95 -0.53,0 -0.95,-0.42 -0.95,-0.95zm0 -4.66l0 -13.39c0,-0.52 0.42,-0.95 0.95,-0.95 0.53,0 0.95,0.43 0.95,0.95l0 13.39c0,0.53 -0.42,0.96 -0.95,0.96 -0.53,0 -0.95,-0.43 -0.95,-0.96z"/></g></svg>':n===l.Info&&(g='<svg class="nx-message-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><g><path fill="'+h.notiflixIconColor+'" d="M20 0c11.03,0 20,8.97 20,20 0,11.03 -8.97,20 -20,20 -11.03,0 -20,-8.97 -20,-20 0,-11.03 8.97,-20 20,-20zm0 37.98c9.92,0 17.98,-8.06 17.98,-17.98 0,-9.92 -8.06,-17.98 -17.98,-17.98 -9.92,0 -17.98,8.06 -17.98,17.98 0,9.92 8.06,17.98 17.98,17.98zm-0.99 -23.3c0,-0.54 0.44,-0.98 0.99,-0.98 0.55,0 0.99,0.44 0.99,0.98l0 15.86c0,0.55 -0.44,0.99 -0.99,0.99 -0.55,0 -0.99,-0.44 -0.99,-0.99l0 -15.86zm0 -5.22c0,-0.55 0.44,-0.99 0.99,-0.99 0.55,0 0.99,0.44 0.99,0.99l0 1.09c0,0.54 -0.44,0.99 -0.99,0.99 -0.55,0 -0.99,-0.45 -0.99,-0.99l0 -1.09z"/></g></svg>'),f.innerHTML=g+'<span class="nx-message nx-with-icon">'+i+"</span>"+(t.closeButton?m:"")}}else f.innerHTML='<span class="nx-message">'+i+"</span>"+(t.closeButton?m:"");if("left-bottom"===t.position||"right-bottom"===t.position){var y=e.document.getElementById(c.wrapID);y.insertBefore(f,y.firstChild)}else e.document.getElementById(c.wrapID).appendChild(f);var _=e.document.getElementById(f.id);if(_){var v,w,I=function(){_.classList.add("nx-remove");var t=e.document.getElementById(c.overlayID);t&&0>=d.childElementCount&&t.classList.add("nx-remove"),clearTimeout(v)},C=function(){if(_&&null!==_.parentNode&&_.parentNode.removeChild(_),0>=d.childElementCount&&null!==d.parentNode){d.parentNode.removeChild(d);var t=e.document.getElementById(c.overlayID);t&&null!==t.parentNode&&t.parentNode.removeChild(t)}clearTimeout(w)};if(t.closeButton&&"function"!=typeof r&&e.document.getElementById(f.id).querySelector("span.nx-close-button").addEventListener("click",function(){I();var e=setTimeout(function(){C(),clearTimeout(e)},t.cssAnimationDuration)}),("function"==typeof r||t.clickToClose)&&_.addEventListener("click",function(){"function"==typeof r&&r(),I();var e=setTimeout(function(){C(),clearTimeout(e)},t.cssAnimationDuration)}),!t.closeButton&&"function"!=typeof r){var T=function(){v=setTimeout(function(){I()},t.timeout),w=setTimeout(function(){C()},t.timeout+t.cssAnimationDuration)};T(),t.pauseOnHover&&(_.addEventListener("mouseenter",function(){_.classList.add("nx-paused"),clearTimeout(v),clearTimeout(w)}),_.addEventListener("mouseleave",function(){_.classList.remove("nx-paused"),T()}))}}if(t.showOnlyTheLastOne&&0<P)for(var N,E=e.document.querySelectorAll("[id^="+t.ID+"-]:not([id="+t.ID+"-"+P+"])"),S=0;S<E.length;S++)null!==(N=E[S]).parentNode&&N.parentNode.removeChild(N);t=k(!0,t,o)},O=function(){return'[id^=NotiflixReportWrap]{position:fixed;z-index:4002;width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;left:0;top:0;padding:10px;color:#1e1e1e;border-radius:25px;background:transparent;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}[id^=NotiflixReportWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixReportWrap]>div[class*="-overlay"]{width:100%;height:100%;left:0;top:0;background:rgba(255,255,255,.5);position:fixed;z-index:0}[id^=NotiflixReportWrap]>div.nx-report-click-to-close{cursor:pointer}[id^=NotiflixReportWrap]>div[class*="-content"]{width:320px;max-width:100%;max-height:96vh;overflow-x:hidden;overflow-y:auto;border-radius:inherit;padding:10px;-webkit-filter:drop-shadow(0 0 5px rgba(0,0,0,0.05));filter:drop-shadow(0 0 5px rgba(0, 0, 0, .05));border:1px solid rgba(0,0,0,.03);background:#f8f8f8;position:relative;z-index:1}[id^=NotiflixReportWrap]>div[class*="-content"]::-webkit-scrollbar{width:0;height:0}[id^=NotiflixReportWrap]>div[class*="-content"]::-webkit-scrollbar-thumb{background:transparent}[id^=NotiflixReportWrap]>div[class*="-content"]::-webkit-scrollbar-track{background:transparent}[id^=NotiflixReportWrap]>div[class*="-content"]>div[class$="-icon"]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:110px;height:110px;display:block;margin:6px auto 12px}[id^=NotiflixReportWrap]>div[class*="-content"]>div[class$="-icon"] svg{min-width:100%;max-width:100%;height:auto}[id^=NotiflixReportWrap]>*>h5{word-break:break-all;word-break:break-word;font-family:inherit!important;font-size:16px;font-weight:500;line-height:1.4;margin:0 0 10px;padding:0 0 10px;border-bottom:1px solid rgba(0,0,0,.1);float:left;width:100%;text-align:center}[id^=NotiflixReportWrap]>*>p{word-break:break-all;word-break:break-word;font-family:inherit!important;font-size:13px;line-height:1.4;font-weight:normal;float:left;width:100%;padding:0 10px;margin:0 0 10px}[id^=NotiflixReportWrap] a#NXReportButton{word-break:break-all;word-break:break-word;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit!important;-webkit-transition:all .25s ease-in-out;-o-transition:all .25s ease-in-out;transition:all .25s ease-in-out;cursor:pointer;float:right;padding:7px 17px;background:#32c682;font-size:14px;line-height:1.4;font-weight:500;border-radius:inherit!important;color:#fff}[id^=NotiflixReportWrap] a#NXReportButton:hover{-webkit-box-shadow:inset 0 -60px 5px -5px rgba(0,0,0,.25);box-shadow:inset 0 -60px 5px -5px rgba(0,0,0,.25)}[id^=NotiflixReportWrap].nx-rtl-on a#NXReportButton{float:left}[id^=NotiflixReportWrap]>div[class*="-overlay"].nx-with-animation{-webkit-animation:report-overlay-animation .3s ease-in-out 0s normal;animation:report-overlay-animation .3s ease-in-out 0s normal}@-webkit-keyframes report-overlay-animation{0%{opacity:0}100%{opacity:1}}@keyframes report-overlay-animation{0%{opacity:0}100%{opacity:1}}[id^=NotiflixReportWrap]>div[class*="-content"].nx-with-animation.nx-fade{-webkit-animation:report-animation-fade .3s ease-in-out 0s normal;animation:report-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes report-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes report-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixReportWrap]>div[class*="-content"].nx-with-animation.nx-zoom{-webkit-animation:report-animation-zoom .3s ease-in-out 0s normal;animation:report-animation-zoom .3s ease-in-out 0s normal}@-webkit-keyframes report-animation-zoom{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}50%{opacity:1;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes report-animation-zoom{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}50%{opacity:1;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}[id^=NotiflixReportWrap].nx-remove>div[class*="-overlay"].nx-with-animation{opacity:0;-webkit-animation:report-overlay-animation-remove .3s ease-in-out 0s normal;animation:report-overlay-animation-remove .3s ease-in-out 0s normal}@-webkit-keyframes report-overlay-animation-remove{0%{opacity:1}100%{opacity:0}}@keyframes report-overlay-animation-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixReportWrap].nx-remove>div[class*="-content"].nx-with-animation.nx-fade{opacity:0;-webkit-animation:report-animation-fade-remove .3s ease-in-out 0s normal;animation:report-animation-fade-remove .3s ease-in-out 0s normal}@-webkit-keyframes report-animation-fade-remove{0%{opacity:1}100%{opacity:0}}@keyframes report-animation-fade-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixReportWrap].nx-remove>div[class*="-content"].nx-with-animation.nx-zoom{opacity:0;-webkit-animation:report-animation-zoom-remove .3s ease-in-out 0s normal;animation:report-animation-zoom-remove .3s ease-in-out 0s normal}@-webkit-keyframes report-animation-zoom-remove{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.5;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}@keyframes report-animation-zoom-remove{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.5;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}'},L=function(t,i,r,s,o,l){if(!b("body"))return!1;n||j.Report.init({});var c,d,p,f,m,g,y,_,v={};if("object"==typeof o&&!Array.isArray(o)||"object"==typeof l&&!Array.isArray(l)){var w={};"object"==typeof o?w=o:"object"==typeof l&&(w=l),v=k(!0,n,{}),n=k(!0,n,w)}var I=n[t.toLocaleLowerCase("en")];"string"!=typeof i&&(i="Notiflix "+t),"string"!=typeof r&&(t===u.Success?r='"Do not try to become a person of success but try to become a person of value." <br><br>- Albert Einstein':t===u.Failure?r='"Failure is simply the opportunity to begin again, this time more intelligently." <br><br>- Henry Ford':t===u.Warning?r='"The peoples who want to live comfortably without producing and fatigue; they are doomed to lose their dignity, then liberty, and then independence and destiny." <br><br>- Mustafa Kemal Ataturk':t===u.Info&&(r='"Knowledge rests not upon truth alone, but upon error also." <br><br>- Carl Gustav Jung')),"string"!=typeof s&&(s="Okay"),n.plainText&&(i=x(i),r=x(r),s=x(s)),n.plainText||(i.length>n.titleMaxLength&&(i="Possible HTML Tags Error",r='The "plainText" option is "false" and the title content length is more than the "titleMaxLength" option.',s="Okay"),r.length>n.messageMaxLength&&(i="Possible HTML Tags Error",r='The "plainText" option is "false" and the message content length is more than the "messageMaxLength" option.',s="Okay"),s.length>n.buttonMaxLength&&(i="Possible HTML Tags Error",r='The "plainText" option is "false" and the button content length is more than the "buttonMaxLength" option.',s="Okay")),i.length>n.titleMaxLength&&(i=i.substring(0,n.titleMaxLength)+"..."),r.length>n.messageMaxLength&&(r=r.substring(0,n.messageMaxLength)+"..."),s.length>n.buttonMaxLength&&(s=s.substring(0,n.buttonMaxLength)+"..."),n.cssAnimation||(n.cssAnimationDuration=0);var C=e.document.createElement("div");C.id=h.ID,C.className=n.className,C.style.zIndex=n.zindex,C.style.borderRadius=n.borderRadius,C.style.fontFamily='"'+n.fontFamily+'", '+a,n.rtl&&(C.setAttribute("dir","rtl"),C.classList.add("nx-rtl-on")),C.style.display="flex",C.style.flexWrap="wrap",C.style.flexDirection="column",C.style.alignItems="center",C.style.justifyContent="center";var T="",N=!0===n.backOverlayClickToClose;n.backOverlay&&(T='<div class="'+n.className+"-overlay"+(n.cssAnimation?" nx-with-animation":"")+(N?" nx-report-click-to-close":"")+'" style="background:'+(I.backOverlayColor||n.backOverlayColor)+";animation-duration:"+n.cssAnimationDuration+'ms;"></div>');var E="";if(t===u.Success?(c=n.svgSize,d=I.svgColor,c||(c="110px"),d||(d="#32c682"),E='<svg xmlns="http://www.w3.org/2000/svg" id="NXReportSuccess" width="'+c+'" height="'+c+'" fill="'+d+'" viewBox="0 0 120 120"><style>@-webkit-keyframes NXReportSuccess1-animation{0%{-webkit-transform:translate(60px,57.7px) scale(.5,.5) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(.5,.5) translate(-60px,-57.7px)}50%,to{-webkit-transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px)}60%{-webkit-transform:translate(60px,57.7px) scale(.95,.95) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(.95,.95) translate(-60px,-57.7px)}}@keyframes NXReportSuccess1-animation{0%{-webkit-transform:translate(60px,57.7px) scale(.5,.5) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(.5,.5) translate(-60px,-57.7px)}50%,to{-webkit-transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px)}60%{-webkit-transform:translate(60px,57.7px) scale(.95,.95) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(.95,.95) translate(-60px,-57.7px)}}@-webkit-keyframes NXReportSuccess4-animation{0%{opacity:0}50%,to{opacity:1}}@keyframes NXReportSuccess4-animation{0%{opacity:0}50%,to{opacity:1}}@-webkit-keyframes NXReportSuccess3-animation{0%{opacity:0}40%,to{opacity:1}}@keyframes NXReportSuccess3-animation{0%{opacity:0}40%,to{opacity:1}}@-webkit-keyframes NXReportSuccess2-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportSuccess2-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}#NXReportSuccess *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g style="-webkit-animation-name:NXReportSuccess2-animation;animation-name:NXReportSuccess2-animation;-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)"><path d="M60 115.38C29.46 115.38 4.62 90.54 4.62 60 4.62 29.46 29.46 4.62 60 4.62c30.54 0 55.38 24.84 55.38 55.38 0 30.54-24.84 55.38-55.38 55.38zM60 0C26.92 0 0 26.92 0 60s26.92 60 60 60 60-26.92 60-60S93.08 0 60 0z" style="-webkit-animation-name:NXReportSuccess3-animation;animation-name:NXReportSuccess3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g><g style="-webkit-animation-name:NXReportSuccess1-animation;animation-name:NXReportSuccess1-animation;-webkit-transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px);-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)"><path d="M88.27 35.39L52.8 75.29 31.43 58.2c-.98-.81-2.44-.63-3.24.36-.79.99-.63 2.44.36 3.24l23.08 18.46c.43.34.93.51 1.44.51.64 0 1.27-.26 1.74-.78l36.91-41.53a2.3 2.3 0 0 0-.19-3.26c-.95-.86-2.41-.77-3.26.19z" style="-webkit-animation-name:NXReportSuccess4-animation;animation-name:NXReportSuccess4-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g></svg>'):t===u.Failure?(p=n.svgSize,f=I.svgColor,p||(p="110px"),f||(f="#ff5549"),E='<svg xmlns="http://www.w3.org/2000/svg" id="NXReportFailure" width="'+p+'" height="'+p+'" fill="'+f+'" viewBox="0 0 120 120"><style>@-webkit-keyframes NXReportFailure2-animation{0%{opacity:0}40%,to{opacity:1}}@keyframes NXReportFailure2-animation{0%{opacity:0}40%,to{opacity:1}}@-webkit-keyframes NXReportFailure1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportFailure1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@-webkit-keyframes NXReportFailure3-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}50%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportFailure3-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}50%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@-webkit-keyframes NXReportFailure4-animation{0%{opacity:0}50%,to{opacity:1}}@keyframes NXReportFailure4-animation{0%{opacity:0}50%,to{opacity:1}}#NXReportFailure *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g style="-webkit-animation-name:NXReportFailure1-animation;animation-name:NXReportFailure1-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M4.35 34.95c0-16.82 13.78-30.6 30.6-30.6h50.1c16.82 0 30.6 13.78 30.6 30.6v50.1c0 16.82-13.78 30.6-30.6 30.6h-50.1c-16.82 0-30.6-13.78-30.6-30.6v-50.1zM34.95 120h50.1c19.22 0 34.95-15.73 34.95-34.95v-50.1C120 15.73 104.27 0 85.05 0h-50.1C15.73 0 0 15.73 0 34.95v50.1C0 104.27 15.73 120 34.95 120z" style="-webkit-animation-name:NXReportFailure2-animation;animation-name:NXReportFailure2-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g><g style="-webkit-animation-name:NXReportFailure3-animation;animation-name:NXReportFailure3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M82.4 37.6c-.9-.9-2.37-.9-3.27 0L60 56.73 40.86 37.6a2.306 2.306 0 0 0-3.26 3.26L56.73 60 37.6 79.13c-.9.9-.9 2.37 0 3.27.45.45 1.04.68 1.63.68.59 0 1.18-.23 1.63-.68L60 63.26 79.13 82.4c.45.45 1.05.68 1.64.68.58 0 1.18-.23 1.63-.68.9-.9.9-2.37 0-3.27L63.26 60 82.4 40.86c.9-.91.9-2.36 0-3.26z" style="-webkit-animation-name:NXReportFailure4-animation;animation-name:NXReportFailure4-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g></svg>'):t===u.Warning?(m=n.svgSize,g=I.svgColor,m||(m="110px"),g||(g="#eebf31"),E='<svg xmlns="http://www.w3.org/2000/svg" id="NXReportWarning" width="'+m+'" height="'+m+'" fill="'+g+'" viewBox="0 0 120 120"><style>@-webkit-keyframes NXReportWarning2-animation{0%{opacity:0}40%,to{opacity:1}}@keyframes NXReportWarning2-animation{0%{opacity:0}40%,to{opacity:1}}@-webkit-keyframes NXReportWarning1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportWarning1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@-webkit-keyframes NXReportWarning3-animation{0%{-webkit-transform:translate(60px,66.6px) scale(.5,.5) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(.5,.5) translate(-60px,-66.6px)}50%,to{-webkit-transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px)}60%{-webkit-transform:translate(60px,66.6px) scale(.95,.95) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(.95,.95) translate(-60px,-66.6px)}}@keyframes NXReportWarning3-animation{0%{-webkit-transform:translate(60px,66.6px) scale(.5,.5) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(.5,.5) translate(-60px,-66.6px)}50%,to{-webkit-transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px)}60%{-webkit-transform:translate(60px,66.6px) scale(.95,.95) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(.95,.95) translate(-60px,-66.6px)}}@-webkit-keyframes NXReportWarning4-animation{0%{opacity:0}50%,to{opacity:1}}@keyframes NXReportWarning4-animation{0%{opacity:0}50%,to{opacity:1}}#NXReportWarning *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g style="-webkit-animation-name:NXReportWarning1-animation;animation-name:NXReportWarning1-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M115.46 106.15l-54.04-93.8c-.61-1.06-2.23-1.06-2.84 0l-54.04 93.8c-.62 1.07.21 2.29 1.42 2.29h108.08c1.21 0 2.04-1.22 1.42-2.29zM65.17 10.2l54.04 93.8c2.28 3.96-.65 8.78-5.17 8.78H5.96c-4.52 0-7.45-4.82-5.17-8.78l54.04-93.8c2.28-3.95 8.03-4 10.34 0z" style="-webkit-animation-name:NXReportWarning2-animation;animation-name:NXReportWarning2-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g><g style="-webkit-animation-name:NXReportWarning3-animation;animation-name:NXReportWarning3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px)"><path d="M57.83 94.01c0 1.2.97 2.17 2.17 2.17s2.17-.97 2.17-2.17v-3.2c0-1.2-.97-2.17-2.17-2.17s-2.17.97-2.17 2.17v3.2zm0-14.15c0 1.2.97 2.17 2.17 2.17s2.17-.97 2.17-2.17V39.21c0-1.2-.97-2.17-2.17-2.17s-2.17.97-2.17 2.17v40.65z" style="-webkit-animation-name:NXReportWarning4-animation;animation-name:NXReportWarning4-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g></svg>'):t===u.Info&&(y=n.svgSize,_=I.svgColor,y||(y="110px"),_||(_="#26c0d3"),E='<svg xmlns="http://www.w3.org/2000/svg" id="NXReportInfo" width="'+y+'" height="'+y+'" fill="'+_+'" viewBox="0 0 120 120"><style>@-webkit-keyframes NXReportInfo4-animation{0%{opacity:0}50%,to{opacity:1}}@keyframes NXReportInfo4-animation{0%{opacity:0}50%,to{opacity:1}}@-webkit-keyframes NXReportInfo3-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}50%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportInfo3-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}50%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@-webkit-keyframes NXReportInfo2-animation{0%{opacity:0}40%,to{opacity:1}}@keyframes NXReportInfo2-animation{0%{opacity:0}40%,to{opacity:1}}@-webkit-keyframes NXReportInfo1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportInfo1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}#NXReportInfo *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g style="-webkit-animation-name:NXReportInfo1-animation;animation-name:NXReportInfo1-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M60 115.38C29.46 115.38 4.62 90.54 4.62 60 4.62 29.46 29.46 4.62 60 4.62c30.54 0 55.38 24.84 55.38 55.38 0 30.54-24.84 55.38-55.38 55.38zM60 0C26.92 0 0 26.92 0 60s26.92 60 60 60 60-26.92 60-60S93.08 0 60 0z" style="-webkit-animation-name:NXReportInfo2-animation;animation-name:NXReportInfo2-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g><g style="-webkit-animation-name:NXReportInfo3-animation;animation-name:NXReportInfo3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M57.75 43.85c0-1.24 1.01-2.25 2.25-2.25s2.25 1.01 2.25 2.25v48.18c0 1.24-1.01 2.25-2.25 2.25s-2.25-1.01-2.25-2.25V43.85zm0-15.88c0-1.24 1.01-2.25 2.25-2.25s2.25 1.01 2.25 2.25v3.32c0 1.25-1.01 2.25-2.25 2.25s-2.25-1-2.25-2.25v-3.32z" style="-webkit-animation-name:NXReportInfo4-animation;animation-name:NXReportInfo4-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g></svg>'),C.innerHTML=T+'<div class="'+n.className+"-content"+(n.cssAnimation?" nx-with-animation ":"")+" nx-"+n.cssAnimationStyle+'" style="width:'+n.width+"; background:"+n.backgroundColor+"; animation-duration:"+n.cssAnimationDuration+'ms;"><div style="width:'+n.svgSize+"; height:"+n.svgSize+';" class="'+n.className+'-icon">'+E+'</div><h5 class="'+n.className+'-title" style="font-weight:500; font-size:'+n.titleFontSize+"; color:"+I.titleColor+';">'+i+'</h5><p class="'+n.className+'-message" style="font-size:'+n.messageFontSize+"; color:"+I.messageColor+';">'+r+'</p><a id="NXReportButton" class="'+n.className+'-button" style="font-weight:500; font-size:'+n.buttonFontSize+"; background:"+I.buttonBackground+"; color:"+I.buttonColor+';">'+s+"</a></div>",!e.document.getElementById(C.id)){e.document.body.appendChild(C);var S=function(){var t=e.document.getElementById(C.id);t.classList.add("nx-remove");var i=setTimeout(function(){null!==t.parentNode&&t.parentNode.removeChild(t),clearTimeout(i)},n.cssAnimationDuration)};e.document.getElementById("NXReportButton").addEventListener("click",function(){"function"==typeof o&&o(),S()}),T&&N&&e.document.querySelector(".nx-report-click-to-close").addEventListener("click",function(){S()})}n=k(!0,n,v)},D=function(){return'[id^=NotiflixConfirmWrap]{position:fixed;z-index:4003;width:100%;height:100%;left:0;top:0;padding:10px;-webkit-box-sizing:border-box;box-sizing:border-box;background:transparent;font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}[id^=NotiflixConfirmWrap].nx-position-center-top{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start}[id^=NotiflixConfirmWrap].nx-position-center-bottom{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}[id^=NotiflixConfirmWrap].nx-position-left-top{-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start}[id^=NotiflixConfirmWrap].nx-position-left-center{-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start}[id^=NotiflixConfirmWrap].nx-position-left-bottom{-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}[id^=NotiflixConfirmWrap].nx-position-right-top{-webkit-box-align:end;-webkit-align-items:flex-end;-ms-flex-align:end;align-items:flex-end;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start}[id^=NotiflixConfirmWrap].nx-position-right-center{-webkit-box-align:end;-webkit-align-items:flex-end;-ms-flex-align:end;align-items:flex-end}[id^=NotiflixConfirmWrap].nx-position-right-bottom{-webkit-box-align:end;-webkit-align-items:flex-end;-ms-flex-align:end;align-items:flex-end;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}[id^=NotiflixConfirmWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixConfirmWrap]>div[class*="-overlay"]{width:100%;height:100%;left:0;top:0;background:rgba(255,255,255,.5);position:fixed;z-index:0}[id^=NotiflixConfirmWrap]>div[class*="-overlay"].nx-with-animation{-webkit-animation:confirm-overlay-animation .3s ease-in-out 0s normal;animation:confirm-overlay-animation .3s ease-in-out 0s normal}@-webkit-keyframes confirm-overlay-animation{0%{opacity:0}100%{opacity:1}}@keyframes confirm-overlay-animation{0%{opacity:0}100%{opacity:1}}[id^=NotiflixConfirmWrap].nx-remove>div[class*="-overlay"].nx-with-animation{opacity:0;-webkit-animation:confirm-overlay-animation-remove .3s ease-in-out 0s normal;animation:confirm-overlay-animation-remove .3s ease-in-out 0s normal}@-webkit-keyframes confirm-overlay-animation-remove{0%{opacity:1}100%{opacity:0}}@keyframes confirm-overlay-animation-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixConfirmWrap]>div[class*="-content"]{width:300px;max-width:100%;max-height:96vh;overflow-x:hidden;overflow-y:auto;border-radius:25px;padding:10px;margin:0;-webkit-filter:drop-shadow(0 0 5px rgba(0,0,0,0.05));filter:drop-shadow(0 0 5px rgba(0, 0, 0, .05));background:#f8f8f8;color:#1e1e1e;position:relative;z-index:1;text-align:center}[id^=NotiflixConfirmWrap]>div[class*="-content"]::-webkit-scrollbar{width:0;height:0}[id^=NotiflixConfirmWrap]>div[class*="-content"]::-webkit-scrollbar-thumb{background:transparent}[id^=NotiflixConfirmWrap]>div[class*="-content"]::-webkit-scrollbar-track{background:transparent}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]{float:left;width:100%;text-align:inherit}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>h5{float:left;width:100%;margin:0;padding:0 0 10px;border-bottom:1px solid rgba(0,0,0,.1);color:#32c682;font-family:inherit!important;font-size:16px;line-height:1.4;font-weight:500;text-align:inherit}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div{font-family:inherit!important;margin:15px 0 20px;padding:0 10px;float:left;width:100%;font-size:14px;line-height:1.4;font-weight:normal;color:inherit;text-align:inherit}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div{font-family:inherit!important;float:left;width:100%;margin:15px 0 0;padding:0}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div>input{font-family:inherit!important;float:left;width:100%;height:40px;margin:0;padding:0 15px;border:1px solid rgba(0,0,0,.1);border-radius:25px;font-size:14px;font-weight:normal;line-height:1;-webkit-transition:all .25s ease-in-out;-o-transition:all .25s ease-in-out;transition:all .25s ease-in-out;text-align:left}[id^=NotiflixConfirmWrap].nx-rtl-on>div[class*="-content"]>div[class*="-head"]>div>div>input{text-align:right}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div>input:hover{border-color:rgba(0,0,0,.1)}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div>input:focus{border-color:rgba(0,0,0,.3)}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div>input.nx-validation-failure{border-color:#ff5549}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div>input.nx-validation-success{border-color:#32c682}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:inherit;float:left;width:100%;text-align:inherit}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]>a{cursor:pointer;font-family:inherit!important;-webkit-transition:all .25s ease-in-out;-o-transition:all .25s ease-in-out;transition:all .25s ease-in-out;float:left;width:48%;padding:9px 5px;border-radius:inherit!important;font-weight:500;font-size:15px;line-height:1.4;color:#f8f8f8;text-align:inherit}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]>a.nx-confirm-button-ok{margin:0 2% 0 0;background:#32c682}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]>a.nx-confirm-button-cancel{margin:0 0 0 2%;background:#a9a9a9}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]>a.nx-full{margin:0;width:100%}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]>a:hover{-webkit-box-shadow:inset 0 -60px 5px -5px rgba(0,0,0,.25);box-shadow:inset 0 -60px 5px -5px rgba(0,0,0,.25)}[id^=NotiflixConfirmWrap].nx-rtl-on>div[class*="-content"]>div[class*="-buttons"],[id^=NotiflixConfirmWrap].nx-rtl-on>div[class*="-content"]>div[class*="-buttons"]>a{-webkit-transform:rotateY(180deg);transform:rotateY(180deg)}[id^=NotiflixConfirmWrap].nx-with-animation.nx-fade>div[class*="-content"]{-webkit-animation:confirm-animation-fade .3s ease-in-out 0s normal;animation:confirm-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes confirm-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes confirm-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixConfirmWrap].nx-with-animation.nx-zoom>div[class*="-content"]{-webkit-animation:confirm-animation-zoom .3s ease-in-out 0s normal;animation:confirm-animation-zoom .3s ease-in-out 0s normal}@-webkit-keyframes confirm-animation-zoom{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}50%{opacity:1;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes confirm-animation-zoom{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}50%{opacity:1;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}[id^=NotiflixConfirmWrap].nx-with-animation.nx-fade.nx-remove>div[class*="-content"]{opacity:0;-webkit-animation:confirm-animation-fade-remove .3s ease-in-out 0s normal;animation:confirm-animation-fade-remove .3s ease-in-out 0s normal}@-webkit-keyframes confirm-animation-fade-remove{0%{opacity:1}100%{opacity:0}}@keyframes confirm-animation-fade-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixConfirmWrap].nx-with-animation.nx-zoom.nx-remove>div[class*="-content"]{opacity:0;-webkit-animation:confirm-animation-zoom-remove .3s ease-in-out 0s normal;animation:confirm-animation-zoom-remove .3s ease-in-out 0s normal}@-webkit-keyframes confirm-animation-zoom-remove{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.5;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}@keyframes confirm-animation-zoom-remove{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.5;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}'},M=function(t,n,r,s,o,l,c,u,h){if(!b("body"))return!1;i||j.Confirm.init({});var f=k(!0,i,{});"object"!=typeof h||Array.isArray(h)||(i=k(!0,i,h)),"string"!=typeof n&&(n="Notiflix Confirm"),"string"!=typeof r&&(r="Do you agree with me?"),"string"!=typeof o&&(o="Yes"),"string"!=typeof l&&(l="No"),"function"!=typeof c&&(c=void 0),"function"!=typeof u&&(u=void 0),i.plainText&&(n=x(n),r=x(r),o=x(o),l=x(l)),i.plainText||(n.length>i.titleMaxLength&&(n="Possible HTML Tags Error",r='The "plainText" option is "false" and the title content length is more than "titleMaxLength" option.',o="Okay",l="..."),r.length>i.messageMaxLength&&(n="Possible HTML Tags Error",r='The "plainText" option is "false" and the message content length is more than "messageMaxLength" option.',o="Okay",l="..."),(o.length||l.length)>i.buttonsMaxLength&&(n="Possible HTML Tags Error",r='The "plainText" option is "false" and the buttons content length is more than "buttonsMaxLength" option.',o="Okay",l="...")),n.length>i.titleMaxLength&&(n=n.substring(0,i.titleMaxLength)+"..."),r.length>i.messageMaxLength&&(r=r.substring(0,i.messageMaxLength)+"..."),o.length>i.buttonsMaxLength&&(o=o.substring(0,i.buttonsMaxLength)+"..."),l.length>i.buttonsMaxLength&&(l=l.substring(0,i.buttonsMaxLength)+"..."),i.cssAnimation||(i.cssAnimationDuration=0);var m=e.document.createElement("div");m.id=p.ID,m.className=i.className+(i.cssAnimation?" nx-with-animation nx-"+i.cssAnimationStyle:""),m.style.zIndex=i.zindex,m.style.padding=i.distance,i.rtl&&(m.setAttribute("dir","rtl"),m.classList.add("nx-rtl-on"));var g="string"==typeof i.position?i.position.trim():"center";m.classList.add("nx-position-"+g),m.style.fontFamily='"'+i.fontFamily+'", '+a;var y="";i.backOverlay&&(y='<div class="'+i.className+"-overlay"+(i.cssAnimation?" nx-with-animation":"")+'" style="background:'+i.backOverlayColor+";animation-duration:"+i.cssAnimationDuration+'ms;"></div>');var _="";"function"==typeof c&&(_='<a id="NXConfirmButtonCancel" class="nx-confirm-button-cancel" style="color:'+i.cancelButtonColor+";background:"+i.cancelButtonBackground+";font-size:"+i.buttonsFontSize+';">'+l+"</a>");var v="",w=null,I=void 0;if(t===d.Ask||t===d.Prompt){w=s||"";var C=t===d.Ask?Math.ceil(1.5*w.length):200<w.length?Math.ceil(1.5*w.length):250;v='<div><input id="NXConfirmValidationInput" type="text" '+(t===d.Prompt?'value="'+w+'"':"")+' maxlength="'+C+'" style="font-size:'+i.messageFontSize+";border-radius: "+i.borderRadius+';" autocomplete="off" spellcheck="false" autocapitalize="none" /></div>'}if(m.innerHTML=y+'<div class="'+i.className+'-content" style="width:'+i.width+"; background:"+i.backgroundColor+"; animation-duration:"+i.cssAnimationDuration+"ms; border-radius: "+i.borderRadius+';"><div class="'+i.className+'-head"><h5 style="color:'+i.titleColor+";font-size:"+i.titleFontSize+';">'+n+'</h5><div style="color:'+i.messageColor+";font-size:"+i.messageFontSize+';">'+r+v+'</div></div><div class="'+i.className+'-buttons"><a id="NXConfirmButtonOk" class="nx-confirm-button-ok'+("function"==typeof c?"":" nx-full")+'" style="color:'+i.okButtonColor+";background:"+i.okButtonBackground+";font-size:"+i.buttonsFontSize+';">'+o+"</a>"+_+"</div></div>",!e.document.getElementById(m.id)){e.document.body.appendChild(m);var T=e.document.getElementById(m.id),N=e.document.getElementById("NXConfirmButtonOk"),E=e.document.getElementById("NXConfirmValidationInput");E&&(E.focus(),E.setSelectionRange(0,(E.value||"").length),E.addEventListener("keyup",function(e){var n=e.target.value;t===d.Ask&&n!==w?(e.preventDefault(),E.classList.add("nx-validation-failure"),E.classList.remove("nx-validation-success")):(t===d.Ask&&(E.classList.remove("nx-validation-failure"),E.classList.add("nx-validation-success")),("enter"===(e.key||"").toLocaleLowerCase("en")||13===e.keyCode)&&N.dispatchEvent(new Event("click")))})),N.addEventListener("click",function(e){if(t===d.Ask&&w&&E){if((E.value||"").toString()!==w)return E.focus(),E.classList.add("nx-validation-failure"),e.stopPropagation(),e.preventDefault(),e.returnValue=!1,e.cancelBubble=!0,!1;E.classList.remove("nx-validation-failure")}"function"==typeof c&&(t===d.Prompt&&E&&(I=E.value||""),c(I)),T.classList.add("nx-remove");var n=setTimeout(function(){null!==T.parentNode&&(T.parentNode.removeChild(T),clearTimeout(n))},i.cssAnimationDuration)}),"function"==typeof c&&e.document.getElementById("NXConfirmButtonCancel").addEventListener("click",function(){"function"==typeof u&&(t===d.Prompt&&E&&(I=E.value||""),u(I)),T.classList.add("nx-remove");var e=setTimeout(function(){null!==T.parentNode&&(T.parentNode.removeChild(T),clearTimeout(e))},i.cssAnimationDuration)})}i=k(!0,i,f)},F=function(){return'[id^=NotiflixLoadingWrap]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:fixed;z-index:4000;width:100%;height:100%;left:0;top:0;right:0;bottom:0;margin:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;background:rgba(0,0,0,.8);font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}[id^=NotiflixLoadingWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixLoadingWrap].nx-loading-click-to-close{cursor:pointer}[id^=NotiflixLoadingWrap]>div[class*="-icon"]{width:60px;height:60px;position:relative;-webkit-transition:top .2s ease-in-out;-o-transition:top .2s ease-in-out;transition:top .2s ease-in-out;margin:0 auto}[id^=NotiflixLoadingWrap]>div[class*="-icon"] img,[id^=NotiflixLoadingWrap]>div[class*="-icon"] svg{max-width:unset;max-height:unset;width:100%;height:auto;position:absolute;left:0;top:0}[id^=NotiflixLoadingWrap]>p{position:relative;margin:10px auto 0;font-family:inherit!important;font-weight:normal;font-size:15px;line-height:1.4;padding:0 10px;width:100%;text-align:center}[id^=NotiflixLoadingWrap].nx-with-animation{-webkit-animation:loading-animation-fade .3s ease-in-out 0s normal;animation:loading-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes loading-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes loading-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixLoadingWrap].nx-with-animation.nx-remove{opacity:0;-webkit-animation:loading-animation-fade-remove .3s ease-in-out 0s normal;animation:loading-animation-fade-remove .3s ease-in-out 0s normal}@-webkit-keyframes loading-animation-fade-remove{0%{opacity:1}100%{opacity:0}}@keyframes loading-animation-fade-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixLoadingWrap]>p.nx-loading-message-new{-webkit-animation:loading-new-message-fade .3s ease-in-out 0s normal;animation:loading-new-message-fade .3s ease-in-out 0s normal}@-webkit-keyframes loading-new-message-fade{0%{opacity:0}100%{opacity:1}}@keyframes loading-new-message-fade{0%{opacity:0}100%{opacity:1}}'},z=function(t,n,i,s,o){if(!b("body"))return!1;r||j.Loading.init({});var l=k(!0,r,{});if("object"==typeof n&&!Array.isArray(n)||"object"==typeof i&&!Array.isArray(i)){var c={};"object"==typeof n?c=n:"object"==typeof i&&(c=i),r=k(!0,r,c)}var u="";if("string"==typeof n&&0<n.length&&(u=n),s){u=u.length>r.messageMaxLength?x(u).toString().substring(0,r.messageMaxLength)+"...":x(u).toString();var h,d,p="";0<u.length&&(p='<p id="'+r.messageID+'" class="nx-loading-message" style="color:'+r.messageColor+";font-size:"+r.messageFontSize+';">'+u+"</p>"),r.cssAnimation||(r.cssAnimationDuration=0);var g="";if(t===f.Standard)g=I(r.svgSize,r.svgColor);else if(t===f.Hourglass)g=C(r.svgSize,r.svgColor);else if(t===f.Circle)g=T(r.svgSize,r.svgColor);else if(t===f.Arrows)g=N(r.svgSize,r.svgColor);else if(t===f.Dots)g=E(r.svgSize,r.svgColor);else if(t===f.Pulse)g=S(r.svgSize,r.svgColor);else if(t===f.Custom&&null!==r.customSvgCode&&null===r.customSvgUrl)g=r.customSvgCode||"";else if(t===f.Custom&&null!==r.customSvgUrl&&null===r.customSvgCode)g='<img class="nx-custom-loading-icon" width="'+r.svgSize+'" height="'+r.svgSize+'" src="'+r.customSvgUrl+'" alt="Notiflix">';else{if(t===f.Custom&&(null===r.customSvgUrl||null===r.customSvgCode))return _('You have to set a static SVG url to "customSvgUrl" option to use Loading Custom.'),!1;(h=r.svgSize)||(h="60px"),g='<svg xmlns="http://www.w3.org/2000/svg" id="NXLoadingNotiflixLib" width="'+h+'" height="'+h+'" viewBox="0 0 200 200"><defs><style>@keyframes notiflix-n{0%{stroke-dashoffset:1000}to{stroke-dashoffset:0}}@keyframes notiflix-x{0%{stroke-dashoffset:1000}to{stroke-dashoffset:0}}@keyframes notiflix-dot{0%,to{stroke-width:0}50%{stroke-width:12}}.nx-icon-line{stroke:#f8f8f8;stroke-width:12;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:22;fill:none}</style></defs><path d="M47.97 135.05a6.5 6.5 0 1 1 0 13 6.5 6.5 0 0 1 0-13z" style="animation-name:notiflix-dot;animation-timing-function:ease-in-out;animation-duration:1.25s;animation-iteration-count:infinite;animation-direction:normal" fill="'+(d="#32c682")+'" stroke="'+d+'" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="22" stroke-width="12"/><path class="nx-icon-line" d="M10.14 144.76V87.55c0-5.68-4.54-41.36 37.83-41.36 42.36 0 37.82 35.68 37.82 41.36v57.21" style="animation-name:notiflix-n;animation-timing-function:linear;animation-duration:2.5s;animation-delay:0s;animation-iteration-count:infinite;animation-direction:normal" stroke-dasharray="500"/><path class="nx-icon-line" d="M115.06 144.49c24.98-32.68 49.96-65.35 74.94-98.03M114.89 46.6c25.09 32.58 50.19 65.17 75.29 97.75" style="animation-name:notiflix-x;animation-timing-function:linear;animation-duration:2.5s;animation-delay:.2s;animation-iteration-count:infinite;animation-direction:normal" stroke-dasharray="500"/></svg>'}var y=parseInt((r.svgSize||"").replace(/[^0-9]/g,"")),v=e.innerWidth,w=y>=v?v-40+"px":y+"px",R='<div style="width:'+w+"; height:"+w+';" class="'+r.className+"-icon"+(0<u.length?" nx-with-message":"")+'">'+g+"</div>",P=e.document.createElement("div");P.id=m.ID,P.className=r.className+(r.cssAnimation?" nx-with-animation":"")+(r.clickToClose?" nx-loading-click-to-close":""),P.style.zIndex=r.zindex,P.style.background=r.backgroundColor,P.style.animationDuration=r.cssAnimationDuration+"ms",P.style.fontFamily='"'+r.fontFamily+'", '+a,P.style.display="flex",P.style.flexWrap="wrap",P.style.flexDirection="column",P.style.alignItems="center",P.style.justifyContent="center",r.rtl&&(P.setAttribute("dir","rtl"),P.classList.add("nx-rtl-on")),P.innerHTML=R+p,!e.document.getElementById(P.id)&&(e.document.body.appendChild(P),r.clickToClose)&&e.document.getElementById(P.id).addEventListener("click",function(){P.classList.add("nx-remove");var e=setTimeout(function(){null!==P.parentNode&&(P.parentNode.removeChild(P),clearTimeout(e))},r.cssAnimationDuration)})}else if(e.document.getElementById(m.ID))var A=e.document.getElementById(m.ID),O=setTimeout(function(){A.classList.add("nx-remove");var e=setTimeout(function(){null!==A.parentNode&&(A.parentNode.removeChild(A),clearTimeout(e))},r.cssAnimationDuration);clearTimeout(O)},o);r=k(!0,r,l)},W=function(t){"string"!=typeof t&&(t="");var n=e.document.getElementById(m.ID);if(n){if(0<t.length){t=t.length>r.messageMaxLength?x(t).substring(0,r.messageMaxLength)+"...":x(t);var i=n.getElementsByTagName("p")[0];if(i)i.innerHTML=t;else{var s=e.document.createElement("p");s.id=r.messageID,s.className="nx-loading-message nx-loading-message-new",s.style.color=r.messageColor,s.style.fontSize=r.messageFontSize,s.innerHTML=t,n.appendChild(s)}}else _("Where is the new message?")}},U=function(){return'[id^=NotiflixBlockWrap]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1000;font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;background:rgba(255,255,255,.9);text-align:center;animation-duration:.4s;width:100%;height:100%;left:0;top:0;border-radius:inherit;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}[id^=NotiflixBlockWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixBlockWrap]>span[class*="-icon"]{display:block;width:45px;height:45px;position:relative;margin:0 auto}[id^=NotiflixBlockWrap]>span[class*="-icon"] svg{width:inherit;height:inherit}[id^=NotiflixBlockWrap]>span[class*="-message"]{position:relative;display:block;width:100%;margin:10px auto 0;padding:0 10px;font-family:inherit!important;font-weight:normal;font-size:14px;line-height:1.4}[id^=NotiflixBlockWrap].nx-with-animation{-webkit-animation:block-animation-fade .3s ease-in-out 0s normal;animation:block-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes block-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes block-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixBlockWrap].nx-with-animation.nx-remove{opacity:0;-webkit-animation:block-animation-fade-remove .3s ease-in-out 0s normal;animation:block-animation-fade-remove .3s ease-in-out 0s normal}@-webkit-keyframes block-animation-fade-remove{0%{opacity:1}100%{opacity:0}}@keyframes block-animation-fade-remove{0%{opacity:1}100%{opacity:0}}'},q=0,B=function(t,n,i,r,o,l){if(Array.isArray(i)){if(1>i.length)return _("Array of HTMLElements should contains at least one HTMLElement."),!1;R=i}else if(Object.prototype.isPrototypeOf.call(NodeList.prototype,i)){if(1>i.length)return _("NodeListOf<HTMLElement> should contains at least one HTMLElement."),!1;R=Array.prototype.slice.call(i)}else{if("string"!=typeof i||1>(i||"").length||1===(i||"").length&&("#"===(i||"")[0]||"."===(i||"")[0]))return _("The selector parameter must be a string and matches a specified CSS selector(s)."),!1;var c=e.document.querySelectorAll(i);if(1>c.length)return _('You called the "Notiflix.Block..." function with "'+i+'" selector, but there is no such element(s) in the document.'),!1;R=c}s||j.Block.init({});var u=k(!0,s,{});if("object"==typeof r&&!Array.isArray(r)||"object"==typeof o&&!Array.isArray(o)){var h={};"object"==typeof r?h=r:"object"==typeof o&&(h=o),s=k(!0,s,h)}var d="";"string"==typeof r&&0<r.length&&(d=r),s.cssAnimation||(s.cssAnimationDuration=0);var p=y.className;"string"==typeof s.className&&(p=s.className.trim());var f="number"==typeof s.querySelectorLimit?s.querySelectorLimit:200,m=(R||[]).length>=f?f:R.length,w="nx-block-temporary-position";if(t){for(var R,P,A=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr","html","head","title","script","style","iframe"],O=0;O<m;O++)if(P=R[O]){if(-1<A.indexOf(P.tagName.toLocaleLowerCase("en")))break;var L=P.querySelectorAll("[id^="+y.ID+"]");if(1>L.length){var D="";n&&(D=n===g.Hourglass?C(s.svgSize,s.svgColor):n===g.Circle?T(s.svgSize,s.svgColor):n===g.Arrows?N(s.svgSize,s.svgColor):n===g.Dots?E(s.svgSize,s.svgColor):n===g.Pulse?S(s.svgSize,s.svgColor):I(s.svgSize,s.svgColor));var M='<span class="'+p+'-icon" style="width:'+s.svgSize+";height:"+s.svgSize+';">'+D+"</span>",F="";0<d.length&&(d=d.length>s.messageMaxLength?x(d).substring(0,s.messageMaxLength)+"...":x(d),F='<span style="font-size:'+s.messageFontSize+";color:"+s.messageColor+';" class="'+p+'-message">'+d+"</span>"),q++;var z=e.document.createElement("div");z.id=y.ID+"-"+q,z.className=p+(s.cssAnimation?" nx-with-animation":""),z.style.position=s.position,z.style.zIndex=s.zindex,z.style.background=s.backgroundColor,z.style.animationDuration=s.cssAnimationDuration+"ms",z.style.fontFamily='"'+s.fontFamily+'", '+a,z.style.display="flex",z.style.flexWrap="wrap",z.style.flexDirection="column",z.style.alignItems="center",z.style.justifyContent="center",s.rtl&&(z.setAttribute("dir","rtl"),z.classList.add("nx-rtl-on")),z.innerHTML=M+F;var W=e.getComputedStyle(P).getPropertyValue("position"),U="string"==typeof W?W.toLocaleLowerCase("en"):"relative",B=Math.round(1.25*parseInt(s.svgSize))+40,H=P.offsetHeight||0,V="";B>H&&(V="min-height:"+B+"px;");var $="";$=P.getAttribute("id")?"#"+P.getAttribute("id"):P.classList[0]?"."+P.classList[0]:(P.tagName||"").toLocaleLowerCase("en");var K="",X=-1>=["absolute","relative","fixed","sticky"].indexOf(U);if(X||0<V.length){if(!b("head"))return!1;X&&(K="position:relative!important;");var G='<style id="Style-'+y.ID+"-"+q+'">'+$+"."+w+"{"+K+V+"}</style>",Y=e.document.createRange();Y.selectNode(e.document.head);var Q=Y.createContextualFragment(G);e.document.head.appendChild(Q),P.classList.add(w)}P.appendChild(z)}}}else var J=function(t){var n=setTimeout(function(){null!==t.parentNode&&t.parentNode.removeChild(t);var i=t.getAttribute("id"),r=e.document.getElementById("Style-"+i);r&&null!==r.parentNode&&r.parentNode.removeChild(r),clearTimeout(n)},s.cssAnimationDuration)},Z=function(e){if(e&&0<e.length)for(var t,n=0;n<e.length;n++)(t=e[n])&&(t.classList.add("nx-remove"),J(t));else"string"==typeof i?v('"Notiflix.Block.remove();" function called with "'+i+'" selector, but this selector does not have a "Block" element to remove.'):v('"Notiflix.Block.remove();" function called with "'+i+'", but this "Array<HTMLElement>" or "NodeListOf<HTMLElement>" does not have a "Block" element to remove.')},ee=function(e){var t=setTimeout(function(){e.classList.remove(w),clearTimeout(t)},s.cssAnimationDuration+300)},et=setTimeout(function(){for(var e,t=0;t<m;t++)(e=R[t])&&(ee(e),Z(L=e.querySelectorAll("[id^="+y.ID+"]")));clearTimeout(et)},l);s=k(!0,s,u)},j={Notify:{init:function(e){t=k(!0,c,e),w(R,"NotiflixNotifyInternalCSS")},merge:function(e){return t?void(t=k(!0,t,e)):(_("You have to initialize the Notify module before call Merge function."),!1)},success:function(e,t,n){A(l.Success,e,t,n)},failure:function(e,t,n){A(l.Failure,e,t,n)},warning:function(e,t,n){A(l.Warning,e,t,n)},info:function(e,t,n){A(l.Info,e,t,n)}},Report:{init:function(e){n=k(!0,h,e),w(O,"NotiflixReportInternalCSS")},merge:function(e){return n?void(n=k(!0,n,e)):(_("You have to initialize the Report module before call Merge function."),!1)},success:function(e,t,n,i,r){L(u.Success,e,t,n,i,r)},failure:function(e,t,n,i,r){L(u.Failure,e,t,n,i,r)},warning:function(e,t,n,i,r){L(u.Warning,e,t,n,i,r)},info:function(e,t,n,i,r){L(u.Info,e,t,n,i,r)}},Confirm:{init:function(e){i=k(!0,p,e),w(D,"NotiflixConfirmInternalCSS")},merge:function(e){return i?void(i=k(!0,i,e)):(_("You have to initialize the Confirm module before call Merge function."),!1)},show:function(e,t,n,i,r,s,o){M(d.Show,e,t,null,n,i,r,s,o)},ask:function(e,t,n,i,r,s,o,a){M(d.Ask,e,t,n,i,r,s,o,a)},prompt:function(e,t,n,i,r,s,o,a){M(d.Prompt,e,t,n,i,r,s,o,a)}},Loading:{init:function(e){r=k(!0,m,e),w(F,"NotiflixLoadingInternalCSS")},merge:function(e){return r?void(r=k(!0,r,e)):(_("You have to initialize the Loading module before call Merge function."),!1)},standard:function(e,t){z(f.Standard,e,t,!0,0)},hourglass:function(e,t){z(f.Hourglass,e,t,!0,0)},circle:function(e,t){z(f.Circle,e,t,!0,0)},arrows:function(e,t){z(f.Arrows,e,t,!0,0)},dots:function(e,t){z(f.Dots,e,t,!0,0)},pulse:function(e,t){z(f.Pulse,e,t,!0,0)},custom:function(e,t){z(f.Custom,e,t,!0,0)},notiflix:function(e,t){z(f.Notiflix,e,t,!0,0)},remove:function(e){"number"!=typeof e&&(e=0),z(null,null,null,!1,e)},change:function(e){W(e)}},Block:{init:function(e){s=k(!0,y,e),w(U,"NotiflixBlockInternalCSS")},merge:function(e){return s?void(s=k(!0,s,e)):(_('You have to initialize the "Notiflix.Block" module before call Merge function.'),!1)},standard:function(e,t,n){B(!0,g.Standard,e,t,n)},hourglass:function(e,t,n){B(!0,g.Hourglass,e,t,n)},circle:function(e,t,n){B(!0,g.Circle,e,t,n)},arrows:function(e,t,n){B(!0,g.Arrows,e,t,n)},dots:function(e,t,n){B(!0,g.Dots,e,t,n)},pulse:function(e,t,n){B(!0,g.Pulse,e,t,n)},remove:function(e,t){"number"!=typeof t&&(t=0),B(!1,null,e,null,null,t)}}};return"object"==typeof e.Notiflix?k(!0,e.Notiflix,{Notify:j.Notify,Report:j.Report,Confirm:j.Confirm,Loading:j.Loading,Block:j.Block}):{Notify:j.Notify,Report:j.Report,Confirm:j.Confirm,Loading:j.Loading,Block:j.Block}});var uQ=class{constructor(){tO.initializeApp({apiKey:"AIzaSyCo7Hm3k-gsUsQ5NwATa_fhUGPi8TrU9Lo",authDomain:"localhost",projectId:"bookshelf-2f203",databaseURL:"https://bookshelf-2f203-default-rtdb.firebaseio.com"})}firebaseSignUp(e,t,n){tO.auth().createUserWithEmailAndPassword(e,t).then(e=>{let t=e.user.uid;tO.database().ref("users/"+t).set({name:n}),d(uY).Notify.success("Sign Up Success")}).catch(e=>{"auth/email-already-in-use"===e.code?d(uY).Notify.failure("Email already in use"):d(uY).Notify.failure("Registration failed: "+e.message)})}firebaseSignIn(e,t){return tO.auth().signInWithEmailAndPassword(e,t).then(e=>{let t=e.user.uid;return this.getUserData(t).then(e=>{let n=e&&e.name?e.name:"NONAME";return{userId:t,name:n}})}).catch(e=>{let t=e.code,n=e.message;return"auth/wrong-password"===t?d(uY).Notify.failure("Password is incorrect"):d(uY).Notify.failure("Sign In Error:",n),{userId:null,name:"NONAME"}})}getUserData(e){return tO.database().ref("users/"+e).once("value").then(e=>{if(e.exists())return e.val();throw Error("User data not found")})}firebaseLogOut(){tO.auth().signOut().then(()=>{d(uY).Notify.success("SignOut is Success")}).catch(e=>{d(uY).Notify.failure("SignOut Error",e)})}onAuthStateChanged(e){return tO.auth().onAuthStateChanged(e)}firebaseAddBookToList(e,t){tO.database().ref("users/"+e+"/shoppingList").push({bookID:t}).then(()=>{d(uY).Notify.success("Book was successfully added")}).catch(e=>{d(uY).Notify.failure("Error. Book was not added.",e)})}firebaseRemoveBookFromList(e,t){let n=tO.database().ref("users/"+e+"/shoppingList");n.orderByChild("bookID").equalTo(t).once("value").then(e=>{if(e.exists()){let t=Object.keys(e.val());t.forEach(e=>{n.child(e).remove()}),d(uY).Notify.success("Book was removed.")}else d(uY).Notify.failure("Book was not found.")}).catch(e=>{d(uY).Notify.failure("Error during removing Book:",e)})}firebaseClearShoppingList(e){let t=tO.database().ref("users/"+e+"/shoppingList");t.remove().then(()=>{d(uY).Notify.success("Shopping List was cleaned.")}).catch(e=>{d(uY).Notify.failure("Error during cleaning Shopping List:",e)})}firebaseSelectBooksFromList(e){return tO.database().ref("users/"+e+"/shoppingList").once("value").then(function(e){var t=e.val();return!!t&&Object.values(t).map(function(e){return e.bookID})}).catch(function(e){return console.error("Error getting the list :",e),!1})}};const uJ=new uQ;uJ.firebaseSignIn("taras_678@ukr.net","Taras_123432atdgbdd"),uJ.onAuthStateChanged(function(e){if(!e)return console.log("User is not authenticated"),!1;{let t=e.uid;return console.log("User is authenticated",t),uJ.firebaseSelectBooksFromList(t).then(function(e){!1!==e?console.log("   :",e):console.log(" ")}).catch(function(e){console.error("      :",e)}),t}});
//# sourceMappingURL=index.a97b97a2.js.map
