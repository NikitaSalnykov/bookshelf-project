{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-0e3f373df6d67df4.js","src/shopping-list.js","node_modules/@parcel/runtime-js/lib/runtime-643dfc921be0cb37.js","node_modules/@parcel/runtime-js/lib/runtime-94bc1459a6da464a.js","node_modules/@parcel/runtime-js/lib/runtime-278339704fd82367.js","node_modules/@parcel/runtime-js/lib/runtime-5c4a3b0377f15b46.js","node_modules/@parcel/runtime-js/lib/runtime-d9365c2094fcfabf.js","node_modules/@parcel/runtime-js/lib/runtime-8e2644aaaa3d3484.js","node_modules/@parcel/runtime-js/lib/runtime-9509131efb4e9cad.js","node_modules/@parcel/runtime-js/lib/runtime-e56f5cd2382c6f85.js","node_modules/@parcel/runtime-js/lib/runtime-0611352b588f0df9.js","node_modules/@parcel/runtime-js/lib/runtime-80e43d020a43f453.js","node_modules/@parcel/runtime-js/lib/runtime-ede700c2831495ff.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"f9bx4\\\":\\\"shopping-list.fe610f41.js\\\",\\\"lp5u4\\\":\\\"sprite.898ff988.svg\\\",\\\"35kVv\\\":\\\"empty-desktop-tablet@1x.017eaa98.png\\\",\\\"6fa5k\\\":\\\"empty-desktop-tablet@2x.55899084.png\\\",\\\"49jvD\\\":\\\"empty-mobile@1x.0a4ea4b8.png\\\",\\\"6THUv\\\":\\\"empty-mobile@2x.d86ac43c.png\\\",\\\"4AGaC\\\":\\\"amazon-icon1x.a7ec3af8.png\\\",\\\"9Ah0R\\\":\\\"amazon-icon2x.20dbc182.png\\\",\\\"8uc1C\\\":\\\"applebook-icon1x.a9f158e0.png\\\",\\\"3fItF\\\":\\\"applebook-icon2x.cdd3fb2c.png\\\",\\\"hTaYv\\\":\\\"bookshop-icon1x.eb5fbc1e.png\\\",\\\"cdwLe\\\":\\\"bookshop-icon2x.7a15867f.png\\\",\\\"5UbS1\\\":\\\"index.3a35f18a.css\\\",\\\"4l2W5\\\":\\\"index.ff682ffc.js\\\"}\"));","import './js/support.js'\n\nimport './js/theme.js';\n\n\nimport svgBin from './images/sprite.svg';\nimport emptyDtTab1x from './images/shop-list/empty-desktop-tablet@1x.png';\nimport emptyDtTab2x from './images/shop-list/empty-desktop-tablet@2x.png';\nimport emptyMob1x from './images/shop-list/empty-mobile@1x.png';\nimport emptyMob2x from './images/shop-list/empty-mobile@2x.png';\nimport amazonPng from './images/png-icons/shops/amazon-icon1x.png';\nimport amazonPng2x from './images/png-icons/shops/amazon-icon2x.png';\nimport appleBookPng from './images/png-icons/shops/applebook-icon1x.png';\nimport appleBookPng2x from './images/png-icons/shops/applebook-icon2x.png';\nimport bookShopPng from './images/png-icons/shops/bookshop-icon1x.png';\nimport bookShopPng2x from './images/png-icons/shops/bookshop-icon2x.png';\n\nimport Pagination from 'tui-pagination';\n\n\n\nconst cartEl = document.querySelector('.js-shopping-cart');\nconst cartListEl = document.querySelector('.js-cart-list');\nconst paginationContainer = document.getElementById('pagination');\n\nconst STORAGE_KEY = 'storage-data';\n\nlet page;\nlet currentPage = 1;\nlet itemsPerPage;\nlet visiblePages;\nlet resizeTimeout;\n\ncartListEl.addEventListener('click', deleteCard);\nwindow.addEventListener('resize', changePagOptionsByScreenWidth);\ndocument.addEventListener('DOMContentLoaded', firstPageLoaded);\n\ncreateShoppingList();\n\nfunction createShoppingList() {\n  const storageData = JSON.parse(localStorage.getItem(STORAGE_KEY));\n  if (!storageData || storageData.length === 0) {\n    createEmptyCart(); // виклик функції створення порожнього кошика\n  } else {\n    const totalItems = storageData.length;\n    initPagination(totalItems); // ініціалізація пагінації\n    createFullCart(storageData, currentPage); // виклик функції створення списка кошика\n  }\n}\n\n// Функція створення порожнього кошика\nfunction createEmptyCart() {\n  const markup = `\n    <div class=\"cart-empty\">\n      <p class=\"cart-empty__text\">\n        This page is empty, add some books and proceed to order.\n      </p>\n      <picture>\n        <source\n          srcset=\"\n            ${emptyDtTab1x} 1x,\n            ${emptyDtTab2x} 2x\n          \"\n          media=\"(min-width: 768px)\"\n        />\n        <img\n          srcset=\"\n            ${emptyMob1x} 1x,\n            ${emptyMob2x} 2x\n            \"\n          src=\"${emptyMob1x}\"\n          alt=\"Empty cart\"\n          loading=\"lazy\"\n          class=\"cart-empty__img\"\n        />\n      </picture>\n    </div>`;\n\n  cartEl.innerHTML = markup;\n}\n\n// Функція створення повного кошика\nfunction createFullCart(arr, page) {\n  const startIndex = (page - 1) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n  const itemsOnPage = arr.slice(startIndex, endIndex);\n\n  const markup = itemsOnPage\n    .map(\n      ({\n        id,\n        book_image,\n        title,\n        author,\n        marketAmazon,\n        marketAppleBooks,\n        marketBookshop,\n        list_name,\n      }) =>\n        `\n      <li class=\"cart__item card js-card\" data-book-id=\"${id}\">\n        <picture>\n          <img\n            loading=\"lazy\"\n            src=\"${\n              book_image\n                ? book_image\n                : './images/placeholders/very-small-placeholder.png'\n            }\"\n            alt=\"${title}\"\n            class=\"card__img\"\n            width=\"110\"\n            height=\"142\"\n          />\n        </picture>\n        <div class=\"card__content\">\n          <h3 class=\"card__title\">${title.trim()}</h3>\n          <p class=\"card__category\">${list_name.trim()}</p>\n          <p class=\"card__description\">\n            Lorem, ipsum dolor sit amet consectetur adipisicing elit.\n            Temporibus, architecto voluptate sint debitis ab fugit\n            laudantium nostrum dolore quisquam? Laboriosam nulla eum a,\n            quo, molestiae sed error possimus expedita veniam maiores\n            nam maxime provident quod blanditiis cum voluptate. A\n            provident corrupti dignissimos ullam. Porro architecto\n            maiores est ullam sed. Cum.\n            Temporibus, architecto voluptate sint debitis ab fugit\n            laudantium nostrum dolore quisquam? Laboriosam nulla eum a,\n            quo, molestiae sed error possimus expedita veniam maiores\n            nam maxime provident quod blanditiis cum voluptate. A\n            provident corrupti dignissimos ullam. Porro architecto\n            maiores est ullam sed. Cum.\n          </p>\n          <div class=\"card__footer\">\n            <p class=\"card__author\">${author.trim()}</p>\n            <ul class=\"card__shops list\">\n              <li class=\"shop\">\n                <a\n                  href=\"${marketAmazon}\"\n                  target=\"_blank\"\n                  rel=\"noopener nofollow\"\n                >\n                  <img class=\"shop__image--amazon\"\n                    loading=\"lazy\"\n                    width=\"28\"\n                    height=\"28\"\n                    srcset=\"\n                      ${amazonPng} 1x,\n                      ${amazonPng2x} 2x\n                    \"\n                    src=\"${amazonPng}\"\n                    alt=\"amazon.com\"\n                /></a>\n              </li>\n              <li class=\"shop\">\n                <a\n                  href=\"${marketAppleBooks}\"\n                  target=\"_blank\"\n                  rel=\"noopener nofollow\"\n                >\n                  <img class=\"shop__image--apple\"\n                    loading=\"lazy\"\n                    width=\"28\"\n                    height=\"28\"\n                    srcset=\"\n                      ${appleBookPng} 1x,\n                      ${appleBookPng2x} 2x\n                    \"\n                    src=\"${appleBookPng}\"\n                    alt=\"books.apple.com\"\n                /></a>\n              </li>\n              <li class=\"shop\">\n                <a\n                  href=\"${marketBookshop}\"\n                  target=\"_blank\"\n                  rel=\"noopener nofollow\"\n                >\n                  <img class=\"shop__image--bookshop\"\n                    loading=\"lazy\"\n                    width=\"28\"\n                    height=\"28\"\n                    srcset=\"\n                      ${bookShopPng} 1x,\n                      ${bookShopPng2x} 2x\n                    \"\n                    src=\"${bookShopPng}\"\n                    alt=\"bookshop.org\"\n                /></a>\n              </li>\n            </ul>\n          </div>\n          <button\n            aria-label=\"delete\" class=\"card__delete button js-card__delete\"\n            type=\"button\"\n          >\n            <svg class=\"icon-delete\" width=\"22\" height=\"22\">\n              <use x=\"1%\" href=\"${svgBin}#icon-bin\"></use>\n            </svg>\n          </button>\n        </div>\n      </li>`\n    )\n    .join('');\n\n  cartListEl.innerHTML = markup;\n}\n\n// Функція ініціалізації пагінації\nfunction initPagination(totalItems) {\n  const pagination = new Pagination(paginationContainer, {\n    totalItems: totalItems,\n    itemsPerPage: itemsPerPage,\n    visiblePages: visiblePages,\n    centerAlign: true,\n    page: currentPage,\n  });\n  // Обробка подій пагінації та оновлення списку\n  pagination.on('afterMove', eventData => {\n    currentPage = eventData.page;\n    const storageData = JSON.parse(localStorage.getItem(STORAGE_KEY));\n    createFullCart(storageData, currentPage);\n    return currentPage;\n  });\n}\n\n// Функція видалення картки + виклик функції перемальовки сторінки\nfunction deleteCard(evt) {\n  if (evt.target.classList.contains('js-card__delete')) {\n    const card = evt.target.closest('.js-card');\n    const bookId = card.dataset.bookId;\n    const storageData = JSON.parse(localStorage.getItem(STORAGE_KEY));\n    const newStorageData = storageData.filter(object => object.id !== bookId);\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(newStorageData));\n    if (!newStorageData.length) {\n      card.remove();\n      createEmptyCart();\n    }\n\n    const countPages = Math.ceil(newStorageData.length / itemsPerPage);\n    if (countPages >= currentPage) {\n      card.remove();\n      createShoppingList();\n    } else {\n      page = countPages;\n      currentPage = countPages;\n      card.remove();\n      createShoppingList();\n    }\n  }\n}\n\n// Функція зміни кількості відображення карток на сторінці в залежності від ширини екрану\nfunction changePagOptionsByScreenWidth() {\n  const screenWidth = window.innerWidth;\n  if (screenWidth < 768) {\n    visiblePages = 1;\n    itemsPerPage = 4;\n    clearTimeout(resizeTimeout);\n\n    resizeTimeout = setTimeout(function () {\n      createShoppingList();\n    }, 200);\n  } else if (screenWidth >= 768) {\n    itemsPerPage = 3;\n    visiblePages = 3;\n    clearTimeout(resizeTimeout);\n\n    resizeTimeout = setTimeout(function () {\n      createShoppingList();\n    }, 200);\n  }\n}\n\n// Функція зміни кількості відображення карток на сторінці в залежності від ширини екрану при першій загрузці сторінки\nfunction firstPageLoaded() {\n  const screenWidth = window.innerWidth;\n\n  if (screenWidth < 768) {\n    visiblePages = 1;\n    itemsPerPage = 4;\n    createShoppingList();\n  } else if (screenWidth >= 768) {\n    itemsPerPage = 3;\n    visiblePages = 3;\n    createShoppingList();\n  }\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lp5u4\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"35kVv\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"6fa5k\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"49jvD\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"6THUv\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"4AGaC\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"9Ah0R\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8uc1C\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"3fItF\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"hTaYv\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"cdwLe\")).toString();"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$a4212a039eccdb43$exports","URL","resolve","url","toString","$7a287328ee524edb$exports","$aca0e0b0e1b99dd2$exports","$592a6d8129c796ad$exports","$996a924df09feb9f$exports","$6c188761e8b6fed2$exports","$f628dbed41335e07$exports","$6b4138feaf769040$exports","$261d3d4bd13d3f77$exports","$d7c4805445727c8c$exports","$23de426c97b8d25a$exports","$e4901028ceec97df$var$cartEl","document","querySelector","$e4901028ceec97df$var$cartListEl","$e4901028ceec97df$var$paginationContainer","getElementById","$e4901028ceec97df$var$STORAGE_KEY","$e4901028ceec97df$var$page","$e4901028ceec97df$var$itemsPerPage","$e4901028ceec97df$var$visiblePages","$e4901028ceec97df$var$resizeTimeout","$e4901028ceec97df$var$currentPage","$e4901028ceec97df$var$createShoppingList","storageData","localStorage","getItem","totalItems","pagination","$parcel$interopDefault","$fb9GJ","itemsPerPage","visiblePages","centerAlign","page","on","eventData","$e4901028ceec97df$var$createFullCart","$e4901028ceec97df$var$initPagination","$e4901028ceec97df$var$createEmptyCart","markup","innerHTML","arr","page1","startIndex","endIndex","slice","map","book_image","title","author","marketAmazon","marketAppleBooks","marketBookshop","list_name","trim","join","addEventListener","evt","target","classList","contains","card","closest","bookId","dataset","newStorageData","filter","object","setItem","stringify","remove","countPages","Math","ceil","window","screenWidth","innerWidth","clearTimeout","setTimeout"],"version":3,"file":"shopping-list.fe610f41.js.map"}